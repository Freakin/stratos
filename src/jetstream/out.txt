
> stratos@2.5.0 test-backend /home/kater/dev/git/stratos
> ./build/bk-build.sh test

Running backend tests ...
=== RUN   TestLoginToUAA
=== PAUSE TestLoginToUAA
=== RUN   TestLocalLogin
=== PAUSE TestLocalLogin
=== RUN   TestLocalLoginWithBadCredentials
=== PAUSE TestLocalLoginWithBadCredentials
=== RUN   TestLocalLoginWithNoAdminScope
=== PAUSE TestLocalLoginWithNoAdminScope
=== RUN   TestLoginToUAAWithBadCreds
=== PAUSE TestLoginToUAAWithBadCreds
=== RUN   TestLoginToUAAButCantSaveToken
=== PAUSE TestLoginToUAAButCantSaveToken
=== RUN   TestLoginToCNSI
=== PAUSE TestLoginToCNSI
=== RUN   TestLoginToCNSIWithoutCNSIGuid
=== PAUSE TestLoginToCNSIWithoutCNSIGuid
=== RUN   TestLoginToCNSIWithMissingCNSIRecord
=== PAUSE TestLoginToCNSIWithMissingCNSIRecord
=== RUN   TestLoginToCNSIWithMissingCreds
=== PAUSE TestLoginToCNSIWithMissingCreds
=== RUN   TestLoginToCNSIWithBadUserIDinSession
=== PAUSE TestLoginToCNSIWithBadUserIDinSession
=== RUN   TestLogout
=== PAUSE TestLogout
=== RUN   TestSaveCNSITokenWithInvalidInput
=== PAUSE TestSaveCNSITokenWithInvalidInput
=== RUN   TestSetUAATokenRecord
=== PAUSE TestSetUAATokenRecord
=== RUN   TestLoginToCNSIWithMissingAPIEndpoint
--- SKIP: TestLoginToCNSIWithMissingAPIEndpoint (0.00s)
    auth_test.go:696: Skipping for now - need to verify whether still needed.
=== RUN   TestLoginToCNSIWithBadCreds
--- SKIP: TestLoginToCNSIWithBadCreds (0.00s)
    auth_test.go:727: Skipping for now - need to verify whether still needed.
=== RUN   TestVerifySession
=== PAUSE TestVerifySession
=== RUN   TestVerifySessionNoDate
=== PAUSE TestVerifySessionNoDate
=== RUN   TestVerifySessionExpired
=== PAUSE TestVerifySessionExpired
=== RUN   TestRegisterCFCluster
=== PAUSE TestRegisterCFCluster
=== RUN   TestRegisterCFClusterWithMissingName
=== PAUSE TestRegisterCFClusterWithMissingName
=== RUN   TestRegisterCFClusterWithMissingAPIEndpoint
=== PAUSE TestRegisterCFClusterWithMissingAPIEndpoint
=== RUN   TestRegisterCFClusterWithInvalidAPIEndpoint
=== PAUSE TestRegisterCFClusterWithInvalidAPIEndpoint
=== RUN   TestRegisterCFClusterWithBadV2Request
=== PAUSE TestRegisterCFClusterWithBadV2Request
=== RUN   TestRegisterCFClusterButCantSaveCNSIRecord
=== PAUSE TestRegisterCFClusterButCantSaveCNSIRecord
=== RUN   TestListCNSIs
--- SKIP: TestListCNSIs (0.00s)
    cnsi_test.go:192: TODO: fix this test
=== RUN   TestListCNSIsWhenListFails
=== PAUSE TestListCNSIsWhenListFails
=== RUN   TestGetCFv2InfoWithBadURL
=== PAUSE TestGetCFv2InfoWithBadURL
=== RUN   TestGetCFv2InfoWithInvalidEndpoint
=== PAUSE TestGetCFv2InfoWithInvalidEndpoint
=== RUN   TestGetUserTokenInfo
=== PAUSE TestGetUserTokenInfo
=== RUN   TestGetUserTokenInfoNonsenseToken
=== PAUSE TestGetUserTokenInfoNonsenseToken
=== RUN   TestGetUserTokenInfoBadToken
=== PAUSE TestGetUserTokenInfoBadToken
=== RUN   TestAddLocalUser
=== PAUSE TestAddLocalUser
=== RUN   TestAddLocalUserMissingUsername
=== PAUSE TestAddLocalUserMissingUsername
=== RUN   TestAddLocalUserMissingPassword
=== PAUSE TestAddLocalUserMissingPassword
=== RUN   TestAddLocalUserDuplicate
=== PAUSE TestAddLocalUserDuplicate
=== RUN   TestFindPasswordHash
=== PAUSE TestFindPasswordHash
=== RUN   TestUpdateLastLoginTime
=== PAUSE TestUpdateLastLoginTime
=== RUN   TestLoadPortalConfig
--- PASS: TestLoadPortalConfig (0.00s)
=== RUN   TestLoadDatabaseConfig
--- PASS: TestLoadDatabaseConfig (0.00s)
=== RUN   TestLoadDatabaseConfigWithInvalidSSLMode
--- PASS: TestLoadDatabaseConfigWithInvalidSSLMode (0.00s)
=== RUN   TestDoOauthFlowRequestWithValidToken
=== PAUSE TestDoOauthFlowRequestWithValidToken
=== RUN   TestDoOauthFlowRequestWithExpiredToken
=== PAUSE TestDoOauthFlowRequestWithExpiredToken
=== RUN   TestDoOauthFlowRequestWithFailedRefreshMethod
=== PAUSE TestDoOauthFlowRequestWithFailedRefreshMethod
=== RUN   TestDoOauthFlowRequestWithValidTokenFailFirst
--- SKIP: TestDoOauthFlowRequestWithValidTokenFailFirst (0.00s)
    oauth_requests_test.go:405: Skipping for now.
=== RUN   TestDoOauthFlowRequestWithExpiredTokenFailFirst
--- SKIP: TestDoOauthFlowRequestWithExpiredTokenFailFirst (0.00s)
    oauth_requests_test.go:413: Skipping for now.
=== RUN   TestDoOauthFlowRequestWithMissingCNSITokenRecord
--- SKIP: TestDoOauthFlowRequestWithMissingCNSITokenRecord (0.00s)
    oauth_requests_test.go:421: Skipping for now - need to verify whether still needed.
=== RUN   TestDoOauthFlowRequestWithInvalidCNSIRequest
=== PAUSE TestDoOauthFlowRequestWithInvalidCNSIRequest
=== RUN   TestRefreshTokenWithInvalidRefreshToken
=== PAUSE TestRefreshTokenWithInvalidRefreshToken
=== RUN   TestRefreshTokenWithDatabaseErrorOnSave
=== PAUSE TestRefreshTokenWithDatabaseErrorOnSave
=== RUN   TestPassthroughDoRequest
=== PAUSE TestPassthroughDoRequest
=== RUN   TestPassthroughGetEchoURL
=== PAUSE TestPassthroughGetEchoURL
=== RUN   TestPassthroughGetEchoHeaders
=== PAUSE TestPassthroughGetEchoHeaders
=== RUN   TestPassthroughMakeRequestURI
=== PAUSE TestPassthroughMakeRequestURI
=== RUN   TestPassthroughGetPortalUserGUID
=== PAUSE TestPassthroughGetPortalUserGUID
=== RUN   TestPassthroughGetPortalUserGUIDWhenCorruptedSession
=== PAUSE TestPassthroughGetPortalUserGUIDWhenCorruptedSession
=== RUN   TestPassthroughGetRequestParts
=== PAUSE TestPassthroughGetRequestParts
=== RUN   TestPassthroughBuildCNSIRequest
=== PAUSE TestPassthroughBuildCNSIRequest
=== RUN   TestValidateCNSIListWithValidGUID
=== PAUSE TestValidateCNSIListWithValidGUID
=== RUN   TestValidateCNSIListWithInvalidGUID
=== PAUSE TestValidateCNSIListWithInvalidGUID
=== RUN   TestSession

  Check error struct [32mâœ”[0m

[31m[0m[33m[0m[32m
1 total assertion[0m


  Check error conditions when no session avaialable [32mâœ”[0m[32mâœ”[0m[32mâœ”[0m[32mâœ”[0m[32mâœ”[0m[32mâœ”[0m

[31m[0m[33m[0m[32m
7 total assertions[0m

--- PASS: TestSession (0.00s)
=== RUN   TestConsoleSetup

  Check that we can migrate data from the old console_config table time="2019-09-11T15:53:25+01:00" level=info msg="========================"
time="2019-09-11T15:53:25+01:00" level=info msg="= Stratos DB Migration ="
time="2019-09-11T15:53:25+01:00" level=info msg="========================"
time="2019-09-11T15:53:25+01:00" level=info msg="Database provider: sqlite3"
time="2019-09-11T15:53:25+01:00" level=info msg="Current 0"
time="2019-09-11T15:53:25+01:00" level=info msg="Target: 20190621212700"
time="2019-09-11T15:53:25+01:00" level=info msg="Running migrations ...."
time="2019-09-11T15:53:25+01:00" level=info msg="Running migration: 20170818120003_InitialSchema"
time="2019-09-11T15:53:25+01:00" level=info msg="Running migration: 20170818162837_SetupSchema"
time="2019-09-11T15:53:25+01:00" level=info msg="Running migration: 20170829154900_TokenDisconnected"
time="2019-09-11T15:53:25+01:00" level=info msg="Running migration: 20171108102900_AuthType"
time="2019-09-11T15:53:25+01:00" level=info msg="Running migration: 20180413135700_MetricsSchema"
time="2019-09-11T15:53:25+01:00" level=info msg="Running migration: 20180627111300_UpdateMetadata"
time="2019-09-11T15:53:25+01:00" level=info msg="Running migration: 20180703142800_SetupSchema"
time="2019-09-11T15:53:25+01:00" level=info msg="Running migration: 20180813110300_RemoveStaleTokens"
time="2019-09-11T15:53:25+01:00" level=info msg="Running migration: 20180824092600_LinkedTokens"
time="2019-09-11T15:53:25+01:00" level=info msg="Running migration: 20180831104300_SSOEndpointFlag"
time="2019-09-11T15:53:25+01:00" level=info msg="Running migration: 20180907123000_SSOSetupFlag"
time="2019-09-11T15:53:25+01:00" level=info msg="Running migration: 20181129140500_UserFavorites"
time="2019-09-11T15:53:25+01:00" level=info msg="Running migration: 20190305144600_EndpointSubtype"
time="2019-09-11T15:53:25+01:00" level=info msg="Running migration: 20190515133200_AuthEndpoint"
time="2019-09-11T15:53:25+01:00" level=info msg="Running migration: 20190522121200_LocalUsers"
time="2019-09-11T15:53:25+01:00" level=info msg="Running migration: 20190621212700_ConfigSchema"
time="2019-09-11T15:53:25+01:00" level=info msg="Migrating setup data to config store"
[32mâœ”[0mtime="2019-09-11T15:53:25+01:00" level=info msg="Using UAA Endpoint for Auth Endpoint: TEST_UAA"
[32mâœ”[0m[32mâœ”[0m[32mâœ”[0m[32mâœ”[0m[32mâœ”[0m[32mâœ”[0m[32mâœ”[0m
    Check values stored in the db as patr of migratio [32mâœ”[0m[32mâœ”[0m[32mâœ”[0m[32mâœ”[0m[32mâœ”[0m[32mâœ”[0m

[31m[0m[33m[0m[32m
21 total assertions[0m

--- PASS: TestConsoleSetup (0.00s)
=== RUN   TestVersionContentType
=== PAUSE TestVersionContentType
=== RUN   TestVersionStatusCode
=== PAUSE TestVersionStatusCode
=== RUN   TestVersionDefault
=== PAUSE TestVersionDefault
=== CONT  TestLoginToUAA
=== CONT  TestGetUserTokenInfoBadToken
time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"

=== CONT  TestPassthroughGetEchoURL
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
=== CONT  TestGetUserTokenInfoNonsenseToken
--- PASS: TestGetUserTokenInfoBadToken (0.00s)
=== CONT  TestPassthroughDoRequest
=== CONT  TestVerifySession
time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
=== CONT  TestRegisterCFClusterWithBadV2Request
--- PASS: TestGetUserTokenInfoNonsenseToken (0.00s)
=== CONT  TestSetUAATokenRecord

=== CONT  TestVersionDefault

  Test verify session === CONT  TestDoOauthFlowRequestWithValidToken

  Test saving a UAA Token record with a DB exception   UAA tests 
  default version test time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"

  should have correct URI   Passthrough request tests
  Test OAuth workflow with valid tokens time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
=== CONT  TestUpdateLastLoginTime
 time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"

  Local User tests time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
=== CONT  TestFindPasswordHash
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
=== CONT  TestAddLocalUserDuplicate
=== CONT  TestAddLocalUserMissingPassword


time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
  Local User tests   Local User tests time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"

time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
  Local User tests
    Should fail to set UAA Token Record [32mâœ”[0m

[31m[0m[33m[0m [32m
22 total assertions[0m

[32mâœ”[0mtime="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
[32mâœ”[0m

[31m[0m[33m[0m[32m
24 total assertions[0m

time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
2019/09/11 15:53:25 about to retrieve versions endpoint
=== CONT  TestAddLocalUserMissingUsername
--- PASS: TestSetUAATokenRecord (0.00s)
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
--- PASS: TestPassthroughGetEchoURL (0.00s)
=== CONT  TestAddLocalUser
2019/09/11 15:53:25 receivedJson: &{ProxyVersion:dev DatabaseVersion:20161117141922}
time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
[32m
  Local User tests time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
âœ”[0m

[31m[0m[33mtime="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
[0m[32m
25 total assertions[0m

--- PASS: TestVersionDefault (0.00s)
=== CONT  TestRegisterCFClusterWithMissingName
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"

    Should fail to login [32mtime="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
âœ”[0m
  Local User tests 
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
    Should fail to login [32mâœ”[0m[32mâœ”[0mtime="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
[32m
    Should have expected contentType time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
[32mâœ”[0mtime="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
âœ”[0m
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
    Expectations should be met [32mâœ”[0m

[31mtime="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
[0m[33m[0m[32m
31 total assertions[0m

time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
--- PASS: TestAddLocalUserMissingUsername (0.00s)

    Should be able to set CNSI token records time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
=== CONT  TestRegisterCFClusterWithInvalidAPIEndpoint
[32mâœ”[0mtime="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
[31mðŸ”¥[0m

[31m
Errors:

time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"

    Expectations should be met time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
[32mâœ”[0m

[31m[0m[33m[0m[31m
34 total assertions[0m

--- PASS: TestAddLocalUserMissingPassword (0.00s)
time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
=== CONT  TestRegisterCFClusterWithMissingAPIEndpoint
time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
  * /home/kater/dev/git/stratos/src/jetstream/auth_test.go 
  Line 67: - runtime error: invalid memory address or nil pointer dereference 
  goroutine 259 [running]:
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/reporting/reports.go:148 +0x6d
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/reporting/reports.go:121 +0x71
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:235 +0x137
  panic(0xda3580, 0x1654a30)
  	/usr/local/go/src/runtime/panic.go:522 +0x1b5
  github.com/cloudfoundry-incubator/stratos/src/jetstream.(*portalProxy).loginToUAA(0x0, 0x1028bc0, 0xc0001387e0, 0x1, 0xc000674f80)
  	/home/kater/dev/git/stratos/src/jetstream/authuaa.go:33 +0x99
  github.com/cloudfoundry-incubator/stratos/src/jetstream.(*uaaAuth).Login(0xc0005c6790, 0x1028bc0, 0xc0001387e0, 0xc0006ac9b0, 0xc0006ac960)
  	/home/kater/dev/git/stratos/src/jetstream/authuaa.go:23 +0x43
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestLoginToUAA.func1()
  	/home/kater/dev/git/stratos/src/jetstream/auth_test.go:67 +0x7d1
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/discovery.go:80 +0x24
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:261 +0x154
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:110 +0xf1
  github.com/jtolds/gls.(*ContextManager).SetValues.func1(0x0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:97 +0x40d
  github.com/jtolds/gls.EnsureGoroutineId.func1()
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0x2e
  github.com/jtolds/gls._m(0x0, 0xc0003d68a0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:108 +0x31
  github.com/jtolds/gls.github_com_jtolds_gls_markS(0x0, 0xc0003d68a0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:56 +0x35
  github.com/jtolds/gls.addStackTag(...)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:49
  github.com/jtolds/gls.EnsureGoroutineId(0xc0003dc000)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0xd6
  github.com/jtolds/gls.(*ContextManager).SetValues(0xc00015b810, 0xc0003bbf80, 0xc0003d6860)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:63 +0x14b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:105 +0x22b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/doc.go:75 +0xbf
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestLoginToUAA(0xc00034e300)
  	/home/kater/dev/git/stratos/src/jetstream/auth_test.go:30 +0xcc
  testing.tRunner(0xc00034e300, 0xee4368)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 1 [chan receive]:
  testing.tRunner.func1(0xc00034e200)
  	/usr/local/go/src/testing/testing.go:841 +0x203
  testing.tRunner(0xc00034e200, 0xc0000d3e30)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  testing.runTests(0xc000160f60, 0x1663620, 0x41, 0x41, 0x0)
  	/usr/local/go/src/testing/testing.go:1155 +0x2a9
  testing.(*M).Run(0xc00033c180, 0x0)
  	/usr/local/go/src/testing/testing.go:1072 +0x162
  main.main()
  	_testmain.go:170 +0x13e
  
  goroutine 18 [syscall]:
  os/signal.signal_recv(0x0)
  	/usr/local/go/src/runtime/sigqueue.go:139 +0x9c
  os/signal.loop()
  	/usr/local/go/src/os/signal/signal_unix.go:23 +0x22
  created by os/signal.init.0
  	/usr/local/go/src/os/signal/signal_unix.go:29 +0x41
  
  goroutine 390 [select]:
  database/sql.(*DB).connectionOpener(0xc0006120c0, 0x100f900, 0xc00069a0c0)
  	/usr/local/go/src/database/sql/sql.go:1000 +0xe8
  created by database/sql.OpenDB
  	/usr/local/go/src/database/sql/sql.go:670 +0x15e
  
  goroutine 240 [runnable]:
  database/sql.(*DB).connectionResetter(0xc0001360c0, 0x100f900, 0xc000309f40)
  	/usr/local/go/src/database/sql/sql.go:1013 +0xfb
  created by database/sql.OpenDB
  	/usr/local/go/src/database/sql/sql.go:671 +0x194
  
  goroutine 239 [runnable]:
  database/sql.(*DB).connectionOpener(0xc0001360c0, 0x100f900, 0xc000309f40)
  	/usr/local/go/src/database/sql/sql.go:1000 +0xe8
  created by database/sql.OpenDB
  	/usr/local/go/src/database/sql/sql.go:670 +0x15e
  
  goroutine 391 [select]:
  database/sql.(*DB).connectionResetter(0xc0006120c0, 0x100f900, 0xc00069a0c0)
  	/usr/local/go/src/database/sql/sql.go:1013 +0xfb
  created by database/sql.OpenDB
  	/usr/local/go/src/database/sql/sql.go:671 +0x194
  
  goroutine 260 [chan receive]:
  testing.(*testContext).waitParallel(0xc000339500)
  	/usr/local/go/src/testing/testing.go:964 +0x95
  testing.(*T).Parallel(0xc00034e400)
  	/usr/local/go/src/testing/testing.go:771 +0x1f1
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestLocalLogin(0xc00034e400)
  	/home/kater/dev/git/stratos/src/jetstream/auth_test.go:81 +0x2f
  testing.tRunner(0xc00034e400, 0xee4308)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 261 [chan receive]:
  testing.(*testContext).waitParallel(0xc000339500)
  	/usr/local/go/src/testing/testing.go:964 +0x95
  testing.(*T).Parallel(0xc00034e500)
  	/usr/local/go/src/testing/testing.go:771 +0x1f1
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestLocalLoginWithBadCredentials(0xc00034e500)
  	/home/kater/dev/git/stratos/src/jetstream/auth_test.go:141 +0x2f
  testing.tRunner(0xc00034e500, 0xee42f0)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 262 [chan receive]:
  testing.(*testContext).waitParallel(0xc000339500)
  	/usr/local/go/src/testing/testing.go:964 +0x95
  testing.(*T).Parallel(0xc00034e600)
  	/usr/local/go/src/testing/testing.go:771 +0x1f1
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestLocalLoginWithNoAdminScope(0xc00034e600)
  	/home/kater/dev/git/stratos/src/jetstream/auth_test.go:197 +0x2f
  testing.tRunner(0xc00034e600, 0xee4300)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 263 [chan receive]:
  testing.(*testContext).waitParallel(0xc000339500)
  	/usr/local/go/src/testing/testing.go:964 +0x95
  testing.(*T).Parallel(0xc00034e700)
  	/usr/local/go/src/testing/testing.go:771 +0x1f1
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestLoginToUAAWithBadCreds(0xc00034e700)
  	/home/kater/dev/git/stratos/src/jetstream/auth_test.go:257 +0x2f
  testing.tRunner(0xc00034e700, 0xee4360)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 264 [chan receive]:
  testing.(*testContext).waitParallel(0xc000339500)
  	/usr/local/go/src/testing/testing.go:964 +0x95
  testing.(*T).Parallel(0xc00034e800)
  	/usr/local/go/src/testing/testing.go:771 +0x1f1
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestLoginToUAAButCantSaveToken(0xc00034e800)
  	/home/kater/dev/git/stratos/src/jetstream/auth_test.go:307 +0x2f
  testing.tRunner(0xc00034e800, 0xee4358)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 265 [chan receive]:
  testing.(*testContext).waitParallel(0xc000339500)
  	/usr/local/go/src/testing/testing.go:964 +0x95
  testing.(*T).Parallel(0xc00034e900)
  	/usr/local/go/src/testing/testing.go:771 +0x1f1
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestLoginToCNSI(0xc00034e900)
  	/home/kater/dev/git/stratos/src/jetstream/auth_test.go:363 +0x2f
  testing.tRunner(0xc00034e900, 0xee4350)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 266 [chan receive]:
  testing.(*testContext).waitParallel(0xc000339500)
  	/usr/local/go/src/testing/testing.go:964 +0x95
  testing.(*T).Parallel(0xc00034ea00)
  	/usr/local/go/src/testing/testing.go:771 +0x1f1
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestLoginToCNSIWithoutCNSIGuid(0xc00034ea00)
  	/home/kater/dev/git/stratos/src/jetstream/auth_test.go:438 +0x2f
  testing.tRunner(0xc00034ea00, 0xee4348)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 267 [chan receive]:
  testing.(*testContext).waitParallel(0xc000339500)
  	/usr/local/go/src/testing/testing.go:964 +0x95
  testing.(*T).Parallel(0xc00034eb00)
  	/usr/local/go/src/testing/testing.go:771 +0x1f1
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestLoginToCNSIWithMissingCNSIRecord(0xc00034eb00)
  	/home/kater/dev/git/stratos/src/jetstream/auth_test.go:460 +0x2f
  testing.tRunner(0xc00034eb00, 0xee4330)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 268 [chan receive]:
  testing.(*testContext).waitParallel(0xc000339500)
  	/usr/local/go/src/testing/testing.go:964 +0x95
  testing.(*T).Parallel(0xc00034ec00)
  	/usr/local/go/src/testing/testing.go:771 +0x1f1
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestLoginToCNSIWithMissingCreds(0xc00034ec00)
  	/home/kater/dev/git/stratos/src/jetstream/auth_test.go:493 +0x2f
  testing.tRunner(0xc00034ec00, 0xee4338)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 269 [chan receive]:
  testing.(*testContext).waitParallel(0xc000339500)
  	/usr/local/go/src/testing/testing.go:964 +0x95
  testing.(*T).Parallel(0xc00034ed00)
  	/usr/local/go/src/testing/testing.go:771 +0x1f1
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestLoginToCNSIWithBadUserIDinSession(0xc00034ed00)
  	/home/kater/dev/git/stratos/src/jetstream/auth_test.go:531 +0x2f
  testing.tRunner(0xc00034ed00, 0xee4318)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 270 [chan receive]:
  testing.(*testContext).waitParallel(0xc000339500)
  	/usr/local/go/src/testing/testing.go:964 +0x95
  testing.(*T).Parallel(0xc00034ee00)
  	/usr/local/go/src/testing/testing.go:771 +0x1f1
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestLogout(0xc00034ee00)
  	/home/kater/dev/git/stratos/src/jetstream/auth_test.go:592 +0x2f
  testing.tRunner(0xc00034ee00, 0xee4378)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 271 [chan receive]:
  testing.(*testContext).waitParallel(0xc000339500)
  	/usr/local/go/src/testing/testing.go:964 +0x95
  testing.(*T).Parallel(0xc00034ef00)
  	/usr/local/go/src/testing/testing.go:771 +0x1f1
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestSaveCNSITokenWithInvalidInput(0xc00034ef00)
  	/home/kater/dev/git/stratos/src/jetstream/auth_test.go:627 +0x2f
  testing.tRunner(0xc00034ef00, 0xee4440)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 272 [runnable]:
  syscall.Syscall(0x1, 0x1, 0xc0001a8000, 0x28, 0x28, 0x28, 0x0)
  	/usr/local/go/src/syscall/asm_linux_amd64.s:18 +0x5
  syscall.write(0x1, 0xc0001a8000, 0x28, 0xf0, 0x0, 0xc0005ae128, 0x6)
  	/usr/local/go/src/syscall/zsyscall_linux_amd64.go:1005 +0x5a
  syscall.Write(...)
  	/usr/local/go/src/syscall/syscall_unix.go:191
  internal/poll.(*FD).Write(0xc000052120, 0xc0001a8000, 0x28, 0xf0, 0x0, 0x0, 0x0)
  	/usr/local/go/src/internal/poll/fd_unix.go:268 +0x179
  os.(*File).write(...)
  	/usr/local/go/src/os/file_unix.go:280
  os.(*File).Write(0xc000010018, 0xc0001a8000, 0x28, 0xf0, 0x3, 0x3, 0x434caf)
  	/usr/local/go/src/os/file.go:145 +0x76
  fmt.Fprintf(0xffbc00, 0xc000010018, 0xea20c0, 0x10, 0xc0000d1ee8, 0x3, 0x3, 0xc0000d1e80, 0xc0000d1e90, 0x41235b)
  	/usr/local/go/src/fmt/print.go:200 +0xa5
  testing.(*common).flushToParent(0xc00034f000, 0xea20c0, 0x10, 0xc0000d1ee8, 0x3, 0x3)
  	/usr/local/go/src/testing/testing.go:461 +0xc3
  testing.(*T).report(0xc00034f000)
  	/usr/local/go/src/testing/testing.go:1099 +0x24b
  testing.tRunner.func1(0xc00034f000)
  	/usr/local/go/src/testing/testing.go:852 +0x235
  testing.tRunner(0xc00034f000, 0xee4468)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 275 [runnable]:
  encoding/json.typeFields(0x1024e60, 0xe3c020, 0xe3c020, 0x0, 0x0)
  	/usr/local/go/src/encoding/json/encode.go:1186 +0xc88
  encoding/json.cachedTypeFields(0x1024e60, 0xe3c020, 0x7f4d2dcbd008, 0xc000470470, 0x4bb092)
  	/usr/local/go/src/encoding/json/encode.go:1271 +0xaf
  encoding/json.newStructEncoder(0x1024e60, 0xe3c020, 0xdae660)
  	/usr/local/go/src/encoding/json/encode.go:670 +0x39
  encoding/json.newTypeEncoder(0x1024e60, 0xe3c020, 0xe3c001, 0xd9faa0)
  	/usr/local/go/src/encoding/json/encode.go:426 +0x363
  encoding/json.typeEncoder(0x1024e60, 0xe3c020, 0xe3c020)
  	/usr/local/go/src/encoding/json/encode.go:378 +0x19a
  encoding/json.newPtrEncoder(0x1024e60, 0xd2a880, 0xdae660)
  	/usr/local/go/src/encoding/json/encode.go:810 +0x4d
  encoding/json.newTypeEncoder(0x1024e60, 0xd2a880, 0xd2a801, 0xd9faa0)
  	/usr/local/go/src/encoding/json/encode.go:434 +0x2df
  encoding/json.typeEncoder(0x1024e60, 0xd2a880, 0xd2a880)
  	/usr/local/go/src/encoding/json/encode.go:378 +0x19a
  encoding/json.newMapEncoder(0x1024e60, 0xd89640, 0xdae660)
  	/usr/local/go/src/encoding/json/encode.go:717 +0x8e
  encoding/json.newTypeEncoder(0x1024e60, 0xd89640, 0xd89601, 0xd9faa0)
  	/usr/local/go/src/encoding/json/encode.go:428 +0x30b
  encoding/json.typeEncoder(0x1024e60, 0xd89640, 0xd89640)
  	/usr/local/go/src/encoding/json/encode.go:378 +0x19a
  encoding/json.newMapEncoder(0x1024e60, 0xd8afc0, 0xdae660)
  	/usr/local/go/src/encoding/json/encode.go:717 +0x8e
  encoding/json.newTypeEncoder(0x1024e60, 0xd8afc0, 0xd8af01, 0xd9faa0)
  	/usr/local/go/src/encoding/json/encode.go:428 +0x30b
  encoding/json.typeEncoder(0x1024e60, 0xd8afc0, 0xc00068a4f0)
  	/usr/local/go/src/encoding/json/encode.go:378 +0x19a
  encoding/json.typeFields(0x1024e60, 0xe4d800, 0xe4d800, 0x0, 0x0)
  	/usr/local/go/src/encoding/json/encode.go:1243 +0x170b
  encoding/json.cachedTypeFields(0x1024e60, 0xe4d800, 0x7f4d2dcbd008, 0xc0004712c0, 0x4bb092)
  	/usr/local/go/src/encoding/json/encode.go:1271 +0xaf
  encoding/json.newStructEncoder(0x1024e60, 0xe4d800, 0xdae660)
  	/usr/local/go/src/encoding/json/encode.go:670 +0x39
  encoding/json.newTypeEncoder(0x1024e60, 0xe4d800, 0xe4d801, 0xd9faa0)
  	/usr/local/go/src/encoding/json/encode.go:426 +0x363
  encoding/json.typeEncoder(0x1024e60, 0xe4d800, 0xe4d800)
  	/usr/local/go/src/encoding/json/encode.go:378 +0x19a
  encoding/json.newPtrEncoder(0x1024e60, 0xd2a9c0, 0xdae660)
  	/usr/local/go/src/encoding/json/encode.go:810 +0x4d
  encoding/json.newTypeEncoder(0x1024e60, 0xd2a9c0, 0xd2a901, 0xd9faa0)
  	/usr/local/go/src/encoding/json/encode.go:434 +0x2df
  encoding/json.typeEncoder(0x1024e60, 0xd2a9c0, 0x16)
  	/usr/local/go/src/encoding/json/encode.go:378 +0x19a
  encoding/json.valueEncoder(0xd2a9c0, 0xc00069a200, 0x16, 0xc0004714a0)
  	/usr/local/go/src/encoding/json/encode.go:352 +0x5d
  encoding/json.(*encodeState).reflectValue(0xc0005d63f0, 0xd2a9c0, 0xc00069a200, 0x16, 0xdd0100)
  	/usr/local/go/src/encoding/json/encode.go:334 +0x3f
  encoding/json.(*encodeState).marshal(0xc0005d63f0, 0xd2a9c0, 0xc00069a200, 0xc000470100, 0x0, 0x0)
  	/usr/local/go/src/encoding/json/encode.go:306 +0xee
  encoding/json.(*Encoder).Encode(0xc000471590, 0xd2a9c0, 0xc00069a200, 0xe5b480, 0xc000532b40)
  	/usr/local/go/src/encoding/json/stream.go:200 +0x8a
  github.com/labstack/echo.(*context).json(0xc000454000, 0xc8, 0xd2a9c0, 0xc00069a200, 0x0, 0x0, 0x0, 0x0)
  	/home/kater/go/pkg/mod/github.com/labstack/echo@v3.3.10+incompatible/context.go:434 +0x10a
  github.com/labstack/echo.(*context).JSON(0xc000454000, 0xc8, 0xd2a9c0, 0xc00069a200, 0x0, 0x0)
  	/home/kater/go/pkg/mod/github.com/labstack/echo@v3.3.10+incompatible/context.go:442 +0xb7
  github.com/cloudfoundry-incubator/stratos/src/jetstream.(*portalProxy).verifySession(0xc0001ecc80, 0x1028bc0, 0xc000454000, 0x100bc80, 0xc0005d21e0)
  	/home/kater/dev/git/stratos/src/jetstream/auth.go:850 +0x936
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestVerifySession.func1()
  	/home/kater/dev/git/stratos/src/jetstream/auth_test.go:796 +0xc22
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/discovery.go:80 +0x24
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:261 +0x154
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:110 +0xf1
  github.com/jtolds/gls.(*ContextManager).SetValues.func1(0x3)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:97 +0x40d
  github.com/jtolds/gls.EnsureGoroutineId.func1()
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0x2e
  github.com/jtolds/gls._m(0x0, 0xc000158900)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:108 +0x31
  github.com/jtolds/gls.github_com_jtolds_gls_mark3(0x0, 0xc000158900)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:68 +0x35
  github.com/jtolds/gls._m(0x3, 0xc000158900)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:110 +0x64
  github.com/jtolds/gls.github_com_jtolds_gls_markS(0x3, 0xc000158900)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:56 +0x35
  github.com/jtolds/gls.addStackTag(...)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:49
  github.com/jtolds/gls.EnsureGoroutineId(0xc000263440)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0xd6
  github.com/jtolds/gls.(*ContextManager).SetValues(0xc00015b810, 0xc0002633e0, 0xc0001588c0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:63 +0x14b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:105 +0x22b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/doc.go:75 +0xbf
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestVerifySession(0xc00034f300)
  	/home/kater/dev/git/stratos/src/jetstream/auth_test.go:760 +0xcc
  testing.tRunner(0xc00034f300, 0xee44b8)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 276 [chan receive]:
  testing.(*testContext).waitParallel(0xc000339500)
  	/usr/local/go/src/testing/testing.go:964 +0x95
  testing.(*T).Parallel(0xc00034f400)
  	/usr/local/go/src/testing/testing.go:771 +0x1f1
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestVerifySessionNoDate(0xc00034f400)
  	/home/kater/dev/git/stratos/src/jetstream/auth_test.go:824 +0x2f
  testing.tRunner(0xc00034f400, 0xee44b0)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 277 [chan receive]:
  testing.(*testContext).waitParallel(0xc000339500)
  	/usr/local/go/src/testing/testing.go:964 +0x95
  testing.(*T).Parallel(0xc00034f500)
  	/usr/local/go/src/testing/testing.go:771 +0x1f1
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestVerifySessionExpired(0xc00034f500)
  	/home/kater/dev/git/stratos/src/jetstream/auth_test.go:866 +0x2f
  testing.tRunner(0xc00034f500, 0xee44a0)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 278 [chan receive]:
  testing.(*testContext).waitParallel(0xc000339500)
  	/usr/local/go/src/testing/testing.go:964 +0x95
  testing.(*T).Parallel(0xc00034f700)
  	/usr/local/go/src/testing/testing.go:771 +0x1f1
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestRegisterCFCluster(0xc00034f700)
  	/home/kater/dev/git/stratos/src/jetstream/cnsi_test.go:14 +0x43
  testing.tRunner(0xc00034f700, 0xee4430)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 279 [chan receive]:
  testing.(*testContext).waitParallel(0xc000339500)
  	/usr/local/go/src/testing/testing.go:964 +0x95
  testing.(*T).Parallel(0xc00034f800)
  	/usr/local/go/src/testing/testing.go:771 +0x1f1
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestRegisterCFClusterWithMissingName(0xc00034f800)
  	/home/kater/dev/git/stratos/src/jetstream/cnsi_test.go:49 +0x43
  testing.tRunner(0xc00034f800, 0xee4428)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 280 [chan receive]:
  testing.(*testContext).waitParallel(0xc000339500)
  	/usr/local/go/src/testing/testing.go:964 +0x95
  testing.(*T).Parallel(0xc00034f900)
  	/usr/local/go/src/testing/testing.go:771 +0x1f1
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestRegisterCFClusterWithMissingAPIEndpoint(0xc00034f900)
  	/home/kater/dev/git/stratos/src/jetstream/cnsi_test.go:89 +0x43
  testing.tRunner(0xc00034f900, 0xee4420)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 281 [chan receive]:
  testing.(*testContext).waitParallel(0xc000339500)
  	/usr/local/go/src/testing/testing.go:964 +0x95
  testing.(*T).Parallel(0xc00034fa00)
  	/usr/local/go/src/testing/testing.go:771 +0x1f1
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestRegisterCFClusterWithInvalidAPIEndpoint(0xc00034fa00)
  	/home/kater/dev/git/stratos/src/jetstream/cnsi_test.go:113 +0x43
  testing.tRunner(0xc00034fa00, 0xee4418)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 282 [runnable]:
  sync.runtime_SemacquireMutex(0xc000052334, 0x0)
  	/usr/local/go/src/runtime/sema.go:71 +0x3d
  sync.(*Mutex).Lock(0xc000052330)
  	/usr/local/go/src/sync/mutex.go:134 +0x109
  github.com/sirupsen/logrus.(*MutexWrap).Lock(...)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/logger.go:52
  github.com/sirupsen/logrus.(*Entry).fireHooks(0xc00041e600)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/entry.go:232 +0x124
  github.com/sirupsen/logrus.Entry.log(0xc000052300, 0xc000408840, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/entry.go:212 +0xf4
  github.com/sirupsen/logrus.(*Entry).Log(0xc00041e5a0, 0x3, 0xc000595718, 0x1, 0x1)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/entry.go:256 +0xe4
  github.com/sirupsen/logrus.(*Entry).Logf(0xc00041e5a0, 0xc000000003, 0xeb86e5, 0x23, 0xc000595828, 0x1, 0x1)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/entry.go:301 +0xc5
  github.com/sirupsen/logrus.(*Logger).Logf(0xc000052300, 0x3, 0xeb86e5, 0x23, 0xc000595828, 0x1, 0x1)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/logger.go:137 +0x96
  github.com/sirupsen/logrus.(*Logger).Warnf(...)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/logger.go:161
  github.com/sirupsen/logrus.Warnf(...)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/exported.go:153
  github.com/cloudfoundry-incubator/stratos/src/jetstream.newPortalProxy(0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)
  	/home/kater/dev/git/stratos/src/jetstream/main.go:607 +0x514
  github.com/cloudfoundry-incubator/stratos/src/jetstream.setupPortalProxy(0xc0003f2180, 0x1019980)
  	/home/kater/dev/git/stratos/src/jetstream/mock_server_test.go:141 +0x1ef
  github.com/cloudfoundry-incubator/stratos/src/jetstream.setupHTTPTest(0xc0005dc000, 0x4, 0xeba6ef, 0x24, 0xc000595e58, 0xc0005dc000, 0x539010fb960, 0x64, 0x1634968)
  	/home/kater/dev/git/stratos/src/jetstream/mock_server_test.go:192 +0x198
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestRegisterCFClusterWithBadV2Request(0xc00034fb00)
  	/home/kater/dev/git/stratos/src/jetstream/cnsi_test.go:155 +0x2b4
  testing.tRunner(0xc00034fb00, 0xee4410)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 283 [chan receive]:
  testing.(*testContext).waitParallel(0xc000339500)
  	/usr/local/go/src/testing/testing.go:964 +0x95
  testing.(*T).Parallel(0xc00034fc00)
  	/usr/local/go/src/testing/testing.go:771 +0x1f1
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestRegisterCFClusterButCantSaveCNSIRecord(0xc00034fc00)
  	/home/kater/dev/git/stratos/src/jetstream/cnsi_test.go:165 +0x43
  testing.tRunner(0xc00034fc00, 0xee4408)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 285 [chan receive]:
  testing.(*testContext).waitParallel(0xc000339500)
  	/usr/local/go/src/testing/testing.go:964 +0x95
  testing.(*T).Parallel(0xc00034fe00)
  	/usr/local/go/src/testing/testing.go:771 +0x1f1
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestListCNSIsWhenListFails(0xc00034fe00)
  	/home/kater/dev/git/stratos/src/jetstream/cnsi_test.go:216 +0x40
  testing.tRunner(0xc00034fe00, 0xee42b8)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 286 [chan receive]:
  testing.(*testContext).waitParallel(0xc000339500)
  	/usr/local/go/src/testing/testing.go:964 +0x95
  testing.(*T).Parallel(0xc00034ff00)
  	/usr/local/go/src/testing/testing.go:771 +0x1f1
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestGetCFv2InfoWithBadURL(0xc00034ff00)
  	/home/kater/dev/git/stratos/src/jetstream/cnsi_test.go:235 +0x43
  testing.tRunner(0xc00034ff00, 0xee4290)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 287 [chan receive]:
  testing.(*testContext).waitParallel(0xc000339500)
  	/usr/local/go/src/testing/testing.go:964 +0x95
  testing.(*T).Parallel(0xc000392000)
  	/usr/local/go/src/testing/testing.go:771 +0x1f1
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestGetCFv2InfoWithInvalidEndpoint(0xc000392000)
  	/home/kater/dev/git/stratos/src/jetstream/cnsi_test.go:247 +0x43
  testing.tRunner(0xc000392000, 0xee4298)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 288 [chan receive]:
  testing.(*testContext).waitParallel(0xc000339500)
  	/usr/local/go/src/testing/testing.go:964 +0x95
  testing.(*T).Parallel(0xc000392100)
  	/usr/local/go/src/testing/testing.go:771 +0x1f1
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestGetUserTokenInfo(0xc000392100)
  	/home/kater/dev/git/stratos/src/jetstream/jwt_test.go:6 +0x2f
  testing.tRunner(0xc000392100, 0xee42b0)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 289 [chan send]:
  testing.tRunner.func1(0xc000392200)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc000392200, 0xee42a8)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 290 [chan send]:
  testing.tRunner.func1(0xc000392300)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc000392300, 0xee42a0)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 291 [semacquire]:
  sync.runtime_SemacquireMutex(0xc00034e204, 0xc00033a400)
  	/usr/local/go/src/runtime/sema.go:71 +0x3d
  sync.(*Mutex).Lock(0xc00034e200)
  	/usr/local/go/src/sync/mutex.go:134 +0x109
  sync.(*RWMutex).Lock(0xc00034e200)
  	/usr/local/go/src/sync/rwmutex.go:93 +0x2d
  testing.(*T).Parallel(0xc000392400)
  	/usr/local/go/src/testing/testing.go:778 +0x223
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestAddLocalUser(0xc000392400)
  	/home/kater/dev/git/stratos/src/jetstream/localusers_test.go:24 +0x2f
  testing.tRunner(0xc000392400, 0xee4238)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 292 [runnable]:
  runtime.Caller(0x8, 0xe9c0ff, 0x9, 0x0, 0x6e, 0x101)
  	/usr/local/go/src/runtime/extern.go:183 +0xfb
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/gotest/utils.go:16 +0x85
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/reporting/reports.go:60 +0x26
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:106 +0x76
  github.com/jtolds/gls.(*ContextManager).SetValues.func1(0x1)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:97 +0x40d
  github.com/jtolds/gls.EnsureGoroutineId.func1()
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0x2e
  github.com/jtolds/gls._m(0x0, 0xc00068c160)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:108 +0x31
  github.com/jtolds/gls.github_com_jtolds_gls_mark1(0x0, 0xc00068c160)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:62 +0x35
  github.com/jtolds/gls._m(0x1, 0xc00068c160)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:110 +0x64
  github.com/jtolds/gls.github_com_jtolds_gls_markS(0x1, 0xc00068c160)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:56 +0x35
  github.com/jtolds/gls.addStackTag(...)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:49
  github.com/jtolds/gls.EnsureGoroutineId(0xc0006982d0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0xd6
  github.com/jtolds/gls.(*ContextManager).SetValues(0xc00015b810, 0xc000698270, 0xc00068c120)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:63 +0x14b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:105 +0x22b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/doc.go:75 +0xbf
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestAddLocalUserMissingUsername(0xc000392500)
  	/home/kater/dev/git/stratos/src/jetstream/localusers_test.go:57 +0xa7
  testing.tRunner(0xc000392500, 0xee4230)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 293 [runnable]:
  syscall.Syscall(0x1, 0x2, 0xc000534180, 0x73, 0x73, 0x73, 0x0)
  	/usr/local/go/src/syscall/asm_linux_amd64.s:18 +0x5
  syscall.write(0x2, 0xc000534180, 0x73, 0xbf, 0x0, 0x0, 0x0)
  	/usr/local/go/src/syscall/zsyscall_linux_amd64.go:1005 +0x5a
  syscall.Write(...)
  	/usr/local/go/src/syscall/syscall_unix.go:191
  internal/poll.(*FD).Write(0xc000052180, 0xc000534180, 0x73, 0xbf, 0x0, 0x0, 0x0)
  	/usr/local/go/src/internal/poll/fd_unix.go:268 +0x179
  os.(*File).write(...)
  	/usr/local/go/src/os/file_unix.go:280
  os.(*File).Write(0xc000010020, 0xc000534180, 0x73, 0xbf, 0xbf, 0x0, 0x0)
  	/usr/local/go/src/os/file.go:145 +0x76
  github.com/sirupsen/logrus.(*Entry).write(0xc00041e540)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/entry.go:247 +0x13c
  github.com/sirupsen/logrus.Entry.log(0xc000052300, 0xc0003dd050, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/entry.go:219 +0x193
  github.com/sirupsen/logrus.(*Entry).Log(0xc00041e300, 0x3, 0xc000463348, 0x1, 0x1)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/entry.go:256 +0xe4
  github.com/sirupsen/logrus.(*Entry).Logf(0xc00041e300, 0xc000000003, 0xeb86e5, 0x23, 0xc000463458, 0x1, 0x1)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/entry.go:301 +0xc5
  github.com/sirupsen/logrus.(*Logger).Logf(0xc000052300, 0x3, 0xeb86e5, 0x23, 0xc000463458, 0x1, 0x1)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/logger.go:137 +0x96
  github.com/sirupsen/logrus.(*Logger).Warnf(...)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/logger.go:161
  github.com/sirupsen/logrus.Warnf(...)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/exported.go:153
  github.com/cloudfoundry-incubator/stratos/src/jetstream.newPortalProxy(0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)
  	/home/kater/dev/git/stratos/src/jetstream/main.go:607 +0x514
  github.com/cloudfoundry-incubator/stratos/src/jetstream.setupPortalProxy(0xc00022e600, 0x1019980)
  	/home/kater/dev/git/stratos/src/jetstream/mock_server_test.go:141 +0x1ef
  github.com/cloudfoundry-incubator/stratos/src/jetstream.setupHTTPTest(0xc0003b2700, 0x4, 0xeba6ef, 0x24, 0xc00038aa60, 0xc0003b2700, 0x110, 0x110, 0xc0003b77a0)
  	/home/kater/dev/git/stratos/src/jetstream/mock_server_test.go:192 +0x198
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestAddLocalUserMissingPassword.func1()
  	/home/kater/dev/git/stratos/src/jetstream/localusers_test.go:90 +0x1c9
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/discovery.go:80 +0x24
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:261 +0x154
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:110 +0xf1
  github.com/jtolds/gls.(*ContextManager).SetValues.func1(0xa)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:97 +0x40d
  github.com/jtolds/gls.EnsureGoroutineId.func1()
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0x2e
  github.com/jtolds/gls._m(0x0, 0xc0003d6fa0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:108 +0x31
  github.com/jtolds/gls.github_com_jtolds_gls_markA(0x0, 0xc0003d6fa0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:89 +0x35
  github.com/jtolds/gls._m(0xa, 0xc0003d6fa0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:110 +0x64
  github.com/jtolds/gls.github_com_jtolds_gls_markS(0xa, 0xc0003d6fa0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:56 +0x35
  github.com/jtolds/gls.addStackTag(...)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:49
  github.com/jtolds/gls.EnsureGoroutineId(0xc0003dccc0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0xd6
  github.com/jtolds/gls.(*ContextManager).SetValues(0xc00015b810, 0xc0003dcc60, 0xc0003d6f60)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:63 +0x14b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:105 +0x22b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/doc.go:75 +0xbf
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestAddLocalUserMissingPassword(0xc000392600)
  	/home/kater/dev/git/stratos/src/jetstream/localusers_test.go:83 +0xa7
  testing.tRunner(0xc000392600, 0xee4220)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 294 [semacquire]:
  sync.runtime_SemacquireMutex(0xc000052334, 0x0)
  	/usr/local/go/src/runtime/sema.go:71 +0x3d
  sync.(*Mutex).Lock(0xc000052330)
  	/usr/local/go/src/sync/mutex.go:134 +0x109
  github.com/sirupsen/logrus.(*MutexWrap).Lock(...)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/logger.go:52
  github.com/sirupsen/logrus.(*Entry).fireHooks(0xc00041e7e0)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/entry.go:232 +0x124
  github.com/sirupsen/logrus.Entry.log(0xc000052300, 0xc000408990, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/entry.go:212 +0xf4
  github.com/sirupsen/logrus.(*Entry).Log(0xc00041e780, 0x4, 0xc0004cd2e8, 0x1, 0x1)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/entry.go:256 +0xe4
  github.com/sirupsen/logrus.(*Entry).Logf(0xc00041e780, 0xc000000004, 0xeaa517, 0x17, 0xc0004cd408, 0x1, 0x1)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/entry.go:301 +0xc5
  github.com/sirupsen/logrus.(*Logger).Logf(0xc000052300, 0x4, 0xeaa517, 0x17, 0xc0004cd408, 0x1, 0x1)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/logger.go:137 +0x96
  github.com/sirupsen/logrus.(*Logger).Infof(...)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/logger.go:151
  github.com/sirupsen/logrus.Infof(...)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/exported.go:148
  github.com/cloudfoundry-incubator/stratos/src/jetstream.newPortalProxy(0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)
  	/home/kater/dev/git/stratos/src/jetstream/main.go:578 +0x159
  github.com/cloudfoundry-incubator/stratos/src/jetstream.setupPortalProxy(0xc0003f2240, 0x1019980)
  	/home/kater/dev/git/stratos/src/jetstream/mock_server_test.go:141 +0x1ef
  github.com/cloudfoundry-incubator/stratos/src/jetstream.setupHTTPTest(0xc000614000, 0x4, 0xeba6ef, 0x24, 0xc000418a60, 0xc000614000, 0xc0004b0360, 0x7f4d2ba9ee70, 0x8)
  	/home/kater/dev/git/stratos/src/jetstream/mock_server_test.go:192 +0x198
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestAddLocalUserDuplicate.func1()
  	/home/kater/dev/git/stratos/src/jetstream/localusers_test.go:117 +0x21f
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/discovery.go:80 +0x24
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:261 +0x154
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:110 +0xf1
  github.com/jtolds/gls.(*ContextManager).SetValues.func1(0x8)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:97 +0x40d
  github.com/jtolds/gls.EnsureGoroutineId.func1()
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0x2e
  github.com/jtolds/gls._m(0x0, 0xc000444240)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:108 +0x31
  github.com/jtolds/gls.github_com_jtolds_gls_mark8(0x0, 0xc000444240)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:83 +0x35
  github.com/jtolds/gls._m(0x8, 0xc000444240)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:110 +0x64
  github.com/jtolds/gls.github_com_jtolds_gls_markS(0x8, 0xc000444240)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:56 +0x35
  github.com/jtolds/gls.addStackTag(...)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:49
  github.com/jtolds/gls.EnsureGoroutineId(0xc00044a390)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0xd6
  github.com/jtolds/gls.(*ContextManager).SetValues(0xc00015b810, 0xc00044a330, 0xc000444200)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:63 +0x14b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:105 +0x22b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/doc.go:75 +0xbf
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestAddLocalUserDuplicate(0xc000392700)
  	/home/kater/dev/git/stratos/src/jetstream/localusers_test.go:109 +0xa7
  testing.tRunner(0xc000392700, 0xee4210)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 295 [semacquire]:
  sync.runtime_SemacquireMutex(0xc000052334, 0x0)
  	/usr/local/go/src/runtime/sema.go:71 +0x3d
  sync.(*Mutex).Lock(0xc000052330)
  	/usr/local/go/src/sync/mutex.go:134 +0x109
  github.com/sirupsen/logrus.(*MutexWrap).Lock(...)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/logger.go:52
  github.com/sirupsen/logrus.(*Entry).fireHooks(0xc0006940c0)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/entry.go:232 +0x124
  github.com/sirupsen/logrus.Entry.log(0xc000052300, 0xc0006980c0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/entry.go:212 +0xf4
  github.com/sirupsen/logrus.(*Entry).Log(0xc000694060, 0x4, 0xc000461418, 0x1, 0x1)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/entry.go:256 +0xe4
  github.com/sirupsen/logrus.(*Entry).Logf(0xc000694060, 0xc000000004, 0xeaa517, 0x17, 0xc000461538, 0x1, 0x1)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/entry.go:301 +0xc5
  github.com/sirupsen/logrus.(*Logger).Logf(0xc000052300, 0x4, 0xeaa517, 0x17, 0xc000461538, 0x1, 0x1)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/logger.go:137 +0x96
  github.com/sirupsen/logrus.(*Logger).Infof(...)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/logger.go:151
  github.com/sirupsen/logrus.Infof(...)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/exported.go:148
  github.com/cloudfoundry-incubator/stratos/src/jetstream.newPortalProxy(0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)
  	/home/kater/dev/git/stratos/src/jetstream/main.go:578 +0x159
  github.com/cloudfoundry-incubator/stratos/src/jetstream.setupPortalProxy(0xc00069c000, 0xee3b20)
  	/home/kater/dev/git/stratos/src/jetstream/mock_server_test.go:141 +0x1ef
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestFindPasswordHash.func1()
  	/home/kater/dev/git/stratos/src/jetstream/localusers_test.go:157 +0x90
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/discovery.go:80 +0x24
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:261 +0x154
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:110 +0xf1
  github.com/jtolds/gls.(*ContextManager).SetValues.func1(0x9)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:97 +0x40d
  github.com/jtolds/gls.EnsureGoroutineId.func1()
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0x2e
  github.com/jtolds/gls._m(0x0, 0xc00052c0a0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:108 +0x31
  github.com/jtolds/gls.github_com_jtolds_gls_mark9(0x0, 0xc00052c0a0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:86 +0x35
  github.com/jtolds/gls._m(0x9, 0xc00052c0a0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:110 +0x64
  github.com/jtolds/gls.github_com_jtolds_gls_markS(0x9, 0xc00052c0a0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:56 +0x35
  github.com/jtolds/gls.addStackTag(...)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:49
  github.com/jtolds/gls.EnsureGoroutineId(0xc0005320c0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0xd6
  github.com/jtolds/gls.(*ContextManager).SetValues(0xc00015b810, 0xc000532060, 0xc00052c060)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:63 +0x14b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:105 +0x22b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/doc.go:75 +0xbf
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestFindPasswordHash(0xc000392800)
  	/home/kater/dev/git/stratos/src/jetstream/localusers_test.go:152 +0xa7
  testing.tRunner(0xc000392800, 0xee4288)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 296 [runnable]:
  golang.org/x/crypto/blowfish.ExpandKey(0xc000174a40, 0x9, 0x10, 0xc0001c8600)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/blowfish/block.go:28 +0x2a8
  golang.org/x/crypto/bcrypt.expensiveBlowfishSetup(0xc000425a68, 0x8, 0x20, 0xc00000000e, 0xc00019e7e0, 0x16, 0x18, 0xc00019e7e0, 0x18, 0x18)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/bcrypt/bcrypt.go:227 +0x154
  golang.org/x/crypto/bcrypt.bcrypt(0xc000425a68, 0x8, 0x20, 0xe, 0xc00019e7e0, 0x16, 0x18, 0x0, 0x0, 0x20, ...)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/bcrypt/bcrypt.go:191 +0xd5
  golang.org/x/crypto/bcrypt.newFromPassword(0xc000425a68, 0x8, 0x20, 0xe, 0x20, 0x8, 0xc000425a68)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/bcrypt/bcrypt.go:151 +0x1a1
  golang.org/x/crypto/bcrypt.GenerateFromPassword(0xc000425a68, 0x8, 0x20, 0xe, 0x8, 0x20, 0x0, 0x0, 0x110)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/bcrypt/bcrypt.go:90 +0x4d
  github.com/cloudfoundry-incubator/stratos/src/jetstream.HashPassword(...)
  	/home/kater/dev/git/stratos/src/jetstream/auth.go:220
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestUpdateLastLoginTime.func1()
  	/home/kater/dev/git/stratos/src/jetstream/localusers_test.go:216 +0x19d
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/discovery.go:80 +0x24
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:261 +0x154
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:110 +0xf1
  github.com/jtolds/gls.(*ContextManager).SetValues.func1(0x7)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:97 +0x40d
  github.com/jtolds/gls.EnsureGoroutineId.func1()
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0x2e
  github.com/jtolds/gls._m(0x0, 0xc000158b00)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:108 +0x31
  github.com/jtolds/gls.github_com_jtolds_gls_mark7(0x0, 0xc000158b00)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:80 +0x35
  github.com/jtolds/gls._m(0x7, 0xc000158b00)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:110 +0x64
  github.com/jtolds/gls.github_com_jtolds_gls_markS(0x7, 0xc000158b00)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:56 +0x35
  github.com/jtolds/gls.addStackTag(...)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:49
  github.com/jtolds/gls.EnsureGoroutineId(0xc000263920)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0xd6
  github.com/jtolds/gls.(*ContextManager).SetValues(0xc00015b810, 0xc0002638c0, 0xc000158ac0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:63 +0x14b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:105 +0x22b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/doc.go:75 +0xbf
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestUpdateLastLoginTime(0xc000392900)
  	/home/kater/dev/git/stratos/src/jetstream/localusers_test.go:200 +0xa7
  testing.tRunner(0xc000392900, 0xee4478)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 300 [semacquire]:
  sync.runtime_SemacquireMutex(0xc000052334, 0x0)
  	/usr/local/go/src/runtime/sema.go:71 +0x3d
  sync.(*Mutex).Lock(0xc000052330)
  	/usr/local/go/src/sync/mutex.go:134 +0x109
  github.com/sirupsen/logrus.(*MutexWrap).Lock(...)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/logger.go:52
  github.com/sirupsen/logrus.(*Entry).fireHooks(0xc0004e2480)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/entry.go:232 +0x124
  github.com/sirupsen/logrus.Entry.log(0xc000052300, 0xc0005325a0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/entry.go:212 +0xf4
  github.com/sirupsen/logrus.(*Entry).Log(0xc0004e2420, 0x4, 0xc000577190, 0x1, 0x1)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/entry.go:256 +0xe4
  github.com/sirupsen/logrus.(*Entry).Logf(0xc0004e2420, 0xc000000004, 0xeaa517, 0x17, 0xc0005772b0, 0x1, 0x1)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/entry.go:301 +0xc5
  github.com/sirupsen/logrus.(*Logger).Logf(0xc000052300, 0x4, 0xeaa517, 0x17, 0xc0005772b0, 0x1, 0x1)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/logger.go:137 +0x96
  github.com/sirupsen/logrus.(*Logger).Infof(...)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/logger.go:151
  github.com/sirupsen/logrus.Infof(...)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/exported.go:148
  github.com/cloudfoundry-incubator/stratos/src/jetstream.newPortalProxy(0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)
  	/home/kater/dev/git/stratos/src/jetstream/main.go:578 +0x159
  github.com/cloudfoundry-incubator/stratos/src/jetstream.setupPortalProxy(0xc000688000, 0x1019980)
  	/home/kater/dev/git/stratos/src/jetstream/mock_server_test.go:141 +0x1ef
  github.com/cloudfoundry-incubator/stratos/src/jetstream.setupHTTPTest(0xc000670000, 0x3, 0xc0005aa340, 0x1f, 0x0, 0x0, 0xc000670000, 0x0, 0x0)
  	/home/kater/dev/git/stratos/src/jetstream/mock_server_test.go:192 +0x198
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestDoOauthFlowRequestWithValidToken.func1()
  	/home/kater/dev/git/stratos/src/jetstream/oauth_requests_test.go:75 +0x3d9
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/discovery.go:80 +0x24
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:261 +0x154
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:110 +0xf1
  github.com/jtolds/gls.(*ContextManager).SetValues.func1(0x6)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:97 +0x40d
  github.com/jtolds/gls.EnsureGoroutineId.func1()
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0x2e
  github.com/jtolds/gls._m(0x0, 0xc000444080)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:108 +0x31
  github.com/jtolds/gls.github_com_jtolds_gls_mark6(0x0, 0xc000444080)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:77 +0x35
  github.com/jtolds/gls._m(0x6, 0xc000444080)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:110 +0x64
  github.com/jtolds/gls.github_com_jtolds_gls_markS(0x6, 0xc000444080)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:56 +0x35
  github.com/jtolds/gls.addStackTag(...)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:49
  github.com/jtolds/gls.EnsureGoroutineId(0xc00044a0f0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0xd6
  github.com/jtolds/gls.(*ContextManager).SetValues(0xc00015b810, 0xc00044a090, 0xc000444040)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:63 +0x14b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:105 +0x22b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/doc.go:75 +0xbf
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestDoOauthFlowRequestWithValidToken(0xc000392d00)
  	/home/kater/dev/git/stratos/src/jetstream/oauth_requests_test.go:23 +0xcc
  testing.tRunner(0xc000392d00, 0xee4278)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 301 [chan receive]:
  testing.(*testContext).waitParallel(0xc000339500)
  	/usr/local/go/src/testing/testing.go:964 +0x95
  testing.(*T).Parallel(0xc000392e00)
  	/usr/local/go/src/testing/testing.go:771 +0x1f1
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestDoOauthFlowRequestWithExpiredToken(0xc000392e00)
  	/home/kater/dev/git/stratos/src/jetstream/oauth_requests_test.go:147 +0x2f
  testing.tRunner(0xc000392e00, 0xee4250)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 302 [chan receive]:
  testing.(*testContext).waitParallel(0xc000339500)
  	/usr/local/go/src/testing/testing.go:964 +0x95
  testing.(*T).Parallel(0xc000392f00)
  	/usr/local/go/src/testing/testing.go:771 +0x1f1
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestDoOauthFlowRequestWithFailedRefreshMethod(0xc000392f00)
  	/home/kater/dev/git/stratos/src/jetstream/oauth_requests_test.go:290 +0x2f
  testing.tRunner(0xc000392f00, 0xee4258)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 306 [chan receive]:
  testing.(*testContext).waitParallel(0xc000339500)
  	/usr/local/go/src/testing/testing.go:964 +0x95
  testing.(*T).Parallel(0xc000393300)
  	/usr/local/go/src/testing/testing.go:771 +0x1f1
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestDoOauthFlowRequestWithInvalidCNSIRequest(0xc000393300)
  	/home/kater/dev/git/stratos/src/jetstream/oauth_requests_test.go:445 +0x2f
  testing.tRunner(0xc000393300, 0xee4260)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 307 [chan receive]:
  testing.(*testContext).waitParallel(0xc000339500)
  	/usr/local/go/src/testing/testing.go:964 +0x95
  testing.(*T).Parallel(0xc000393400)
  	/usr/local/go/src/testing/testing.go:771 +0x1f1
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestRefreshTokenWithInvalidRefreshToken(0xc000393400)
  	/home/kater/dev/git/stratos/src/jetstream/oauth_requests_test.go:491 +0x2f
  testing.tRunner(0xc000393400, 0xee4400)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 308 [chan receive]:
  testing.(*testContext).waitParallel(0xc000339500)
  	/usr/local/go/src/testing/testing.go:964 +0x95
  testing.(*T).Parallel(0xc000393500)
  	/usr/local/go/src/testing/testing.go:771 +0x1f1
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestRefreshTokenWithDatabaseErrorOnSave(0xc000393500)
  	/home/kater/dev/git/stratos/src/jetstream/oauth_requests_test.go:529 +0x2f
  testing.tRunner(0xc000393500, 0xee43f8)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 309 [semacquire]:
  sync.runtime_SemacquireMutex(0xc000052334, 0x0)
  	/usr/local/go/src/runtime/sema.go:71 +0x3d
  sync.(*Mutex).Lock(0xc000052330)
  	/usr/local/go/src/sync/mutex.go:134 +0x109
  github.com/sirupsen/logrus.(*MutexWrap).Lock(...)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/logger.go:52
  github.com/sirupsen/logrus.(*Entry).fireHooks(0xc000652180)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/entry.go:232 +0x124
  github.com/sirupsen/logrus.Entry.log(0xc000052300, 0xc0005327b0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/entry.go:212 +0xf4
  github.com/sirupsen/logrus.(*Entry).Log(0xc000652120, 0x4, 0xc0005730e0, 0x1, 0x1)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/entry.go:256 +0xe4
  github.com/sirupsen/logrus.(*Entry).Logf(0xc000652120, 0xc000000004, 0xeaa517, 0x17, 0xc000573200, 0x1, 0x1)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/entry.go:301 +0xc5
  github.com/sirupsen/logrus.(*Logger).Logf(0xc000052300, 0x4, 0xeaa517, 0x17, 0xc000573200, 0x1, 0x1)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/logger.go:137 +0x96
  github.com/sirupsen/logrus.(*Logger).Infof(...)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/logger.go:151
  github.com/sirupsen/logrus.Infof(...)
  	/home/kater/go/pkg/mod/github.com/sirupsen/logrus@v1.3.0/exported.go:148
  github.com/cloudfoundry-incubator/stratos/src/jetstream.newPortalProxy(0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)
  	/home/kater/dev/git/stratos/src/jetstream/main.go:578 +0x159
  github.com/cloudfoundry-incubator/stratos/src/jetstream.setupPortalProxy(0xc0006120c0, 0x1019980)
  	/home/kater/dev/git/stratos/src/jetstream/mock_server_test.go:141 +0x1ef
  github.com/cloudfoundry-incubator/stratos/src/jetstream.setupHTTPTest(0xc000670100, 0x4, 0xeba6ef, 0x24, 0xc000573918, 0xc000670100, 0x1f, 0x1b, 0x462260)
  	/home/kater/dev/git/stratos/src/jetstream/mock_server_test.go:192 +0x198
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestPassthroughDoRequest.func1()
  	/home/kater/dev/git/stratos/src/jetstream/passthrough_test.go:45 +0x448
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/discovery.go:80 +0x24
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:261 +0x154
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:110 +0xf1
  github.com/jtolds/gls.(*ContextManager).SetValues.func1(0x2)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:97 +0x40d
  github.com/jtolds/gls.EnsureGoroutineId.func1()
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0x2e
  github.com/jtolds/gls._m(0x0, 0xc00000f1c0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:108 +0x31
  github.com/jtolds/gls.github_com_jtolds_gls_mark2(0x0, 0xc00000f1c0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:65 +0x35
  github.com/jtolds/gls._m(0x2, 0xc00000f1c0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:110 +0x64
  github.com/jtolds/gls.github_com_jtolds_gls_markS(0x2, 0xc00000f1c0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:56 +0x35
  github.com/jtolds/gls.addStackTag(...)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:49
  github.com/jtolds/gls.EnsureGoroutineId(0xc0003428a0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0xd6
  github.com/jtolds/gls.(*ContextManager).SetValues(0xc00015b810, 0xc000342840, 0xc00000f180)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:63 +0x14b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:105 +0x22b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/doc.go:75 +0xbf
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestPassthroughDoRequest(0xc000393600)
  	/home/kater/dev/git/stratos/src/jetstream/passthrough_test.go:18 +0xcc
  testing.tRunner(0xc000393600, 0xee4390)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 310 [semacquire]:
  sync.runtime_SemacquireMutex(0xc00034e204, 0x414500)
  	/usr/local/go/src/runtime/sema.go:71 +0x3d
  sync.(*Mutex).Lock(0xc00034e200)
  	/usr/local/go/src/sync/mutex.go:134 +0x109
  sync.(*RWMutex).Lock(0xc00034e200)
  	/usr/local/go/src/sync/rwmutex.go:93 +0x2d
  testing.(*common).flushToParent(0xc000393700, 0xea20c0, 0x10, 0xc000499ee8, 0x3, 0x3)
  	/usr/local/go/src/testing/testing.go:458 +0x3d
  testing.(*T).report(0xc000393700)
  	/usr/local/go/src/testing/testing.go:1099 +0x24b
  testing.tRunner.func1(0xc000393700)
  	/usr/local/go/src/testing/testing.go:852 +0x235
  testing.tRunner(0xc000393700, 0xee43b0)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 311 [chan receive]:
  testing.(*testContext).waitParallel(0xc000339500)
  	/usr/local/go/src/testing/testing.go:964 +0x95
  testing.(*T).Parallel(0xc000393800)
  	/usr/local/go/src/testing/testing.go:771 +0x1f1
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestPassthroughGetEchoHeaders(0xc000393800)
  	/home/kater/dev/git/stratos/src/jetstream/passthrough_test.go:131 +0x2f
  testing.tRunner(0xc000393800, 0xee43a0)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 312 [chan receive]:
  testing.(*testContext).waitParallel(0xc000339500)
  	/usr/local/go/src/testing/testing.go:964 +0x95
  testing.(*T).Parallel(0xc000393900)
  	/usr/local/go/src/testing/testing.go:771 +0x1f1
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestPassthroughMakeRequestURI(0xc000393900)
  	/home/kater/dev/git/stratos/src/jetstream/passthrough_test.go:154 +0x2f
  testing.tRunner(0xc000393900, 0xee43f0)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 313 [chan receive]:
  testing.(*testContext).waitParallel(0xc000339500)
  	/usr/local/go/src/testing/testing.go:964 +0x95
  testing.(*T).Parallel(0xc000393a00)
  	/usr/local/go/src/testing/testing.go:771 +0x1f1
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestPassthroughGetPortalUserGUID(0xc000393a00)
  	/home/kater/dev/git/stratos/src/jetstream/passthrough_test.go:170 +0x2f
  testing.tRunner(0xc000393a00, 0xee43d0)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 314 [chan receive]:
  testing.(*testContext).waitParallel(0xc000339500)
  	/usr/local/go/src/test

time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
[0m[33m[0m[31m
34 total assertions[0m

--- FAIL: TestLoginToUAA (0.00s)
=== CONT  TestDoOauthFlowRequestWithInvalidCNSIRequest
time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"

  Test Oauth flow request with invalid CNSI request time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
--- PASS: TestRegisterCFClusterWithInvalidAPIEndpoint (0.00s)
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
=== CONT  TestRefreshTokenWithDatabaseErrorOnSave
--- PASS: TestRegisterCFClusterWithMissingAPIEndpoint (0.00s)
=== CONT  TestRefreshTokenWithInvalidRefreshToken

  Test refreshing of token with DB error 
  Test refresh of token with invalid refresh token time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"

time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
    Should contain expected body time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
[32mâœ”[0m[32mâœ”[0m

[31m[0m[33m[0m[31m
36 total assertions[0m

--- PASS: TestVerifySession (0.00s)
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
time="2019-09-11T15:53:25+01:00" level=error msg="Unable to Find CNSI token: exec query 'SELECT token_guid, auth_token, refresh_token, token_expiry, disconnected, auth_type, meta_data, user_guid, linked_token FROM tokens WHERE cnsi_guid = $1 AND (user_guid = $2 OR user_guid = $3) AND token_type = 'cnsi'', arguments do not match: expected 2, but got 3 arguments"

    Oauth flow request erroneously succeeded [32mâœ”[0m

[31m[0m[33m[0m[31m
37 total assertions[0m

=== CONT  TestLoginToCNSIWithoutCNSIGuid

    Oauth flow request erroneously succeeded time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
--- PASS: TestRegisterCFClusterWithMissingName (0.00s)
=== CONT  TestSaveCNSITokenWithInvalidInput

  Login to CNSI should fail without CNSI GUID 
  Should not save CNSI token with invalid inputs --- PASS: TestDoOauthFlowRequestWithInvalidCNSIRequest (0.00s)
=== CONT  TestLogout
time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
[32mâœ”time="2019-09-11T15:53:25+01:00" level=error msg="Unable to save a CNSI Token: Unable to save CNSI Token without a valid CNSI GUID."

  logout tests [0m
    Login should fail [32mâœ”[0m

[31m[0m[33m[0m[31m
39 total assertions[0m

--- PASS: TestRefreshTokenWithInvalidRefreshToken (0.00s)
=== CONT  TestLoginToCNSIWithBadUserIDinSession


[31m[0m[33m[0m[31m
39 total assertions[0m

--- PASS: TestLoginToCNSIWithoutCNSIGuid (0.00s)

  Should fail to login to CNSI with invalid user session time="2019-09-11T15:53:25+01:00" level=info msg="tr is: interfaces.TokenRecord {TokenGUID: AuthToken: RefreshToken: TokenExpiry:0 Disconnected:false AuthType:OAuth2 Metadata: SystemShared:false LinkedGUID: Certificate: CertificateKey:}"
time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
=== CONT  TestLoginToCNSIWithMissingCreds
time="2019-09-11T15:53:25+01:00" level=info msg="emptyTokenRecord is: interfaces.TokenRecord {TokenGUID: AuthToken: RefreshToken: TokenExpiry:0 Disconnected:false AuthType: Metadata: SystemShared:false LinkedGUID: Certificate: CertificateKey:}"
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"

    Should fail to logintime="2019-09-11T15:53:25+01:00" level=error msg="Unable to Find CNSI token: sql: expected 6 destination arguments in Scan, not 9"
 [32mâœ”[0m

[32m  should fail to login to CNSI with missing credentials time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
    Oauth flow request erroneously succeeded time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
[32mâœ”[0mtime="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
âœ”[0m[32mâœ”[0m
    Should unset Cookie 

[31m[0m[33m[0m[31m
43 total assertions[0m[32mâœ”[0m
    Should mock/stub user in session object 

--- PASS: TestSaveCNSITokenWithInvalidInput (0.00s)


[31m[0m[33m[0m[31m
43 total assertions[0m

--- PASS: TestRefreshTokenWithDatabaseErrorOnSave (0.00s)
=== CONT  TestDoOauthFlowRequestWithFailedRefreshMethod
[32mâœ”[0m[32mâœ”[0m

=== CONT  TestLoginToCNSIWithMissingCNSIRecord

  Test Oauth Flow Request wieth failed refresh method [31m[0m[33m[0m[31m
46 total assertions[0m

--- PASS: TestLogout (0.00s)

  CNSI Login should fail is CNSI record is missing time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"

    Should fail to logintime="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
 [32mâœ”[0mtime="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
=== CONT  TestDoOauthFlowRequestWithExpiredToken

    Should fail to login time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
[32mâœ”[0m
  Test OAuth workflow with expired token time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"

    Should fail to login --- PASS: TestRegisterCFClusterWithBadV2Request (0.01s)
=== CONT  TestGetCFv2InfoWithBadURL
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
[32mâœ”[0m
    Should meet expectations [32mâœ”[0m

[31m[0m[33m[0m[31m
50 total assertions[0m


    Should meet expectations time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
[32mâœ”[0mtime="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"


[31m[0m[33m[0m[31m
51 total assertions[0m

=== CONT  TestGetUserTokenInfo
[32mtime="2019-09-11T15:53:25+01:00" level=error msg="Unable to Find CNSI token: sql: expected 8 destination arguments in Scan, not 9"
âœ”[0mtime="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"

time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
    Oauth flow request erroneously succeeded --- PASS: TestGetCFv2InfoWithBadURL (0.00s)
time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
--- PASS: TestLoginToCNSIWithMissingCNSIRecord (0.00s)
=== CONT  TestGetCFv2InfoWithInvalidEndpoint
[32mâœ”[0mtime="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
--- PASS: TestLoginToCNSIWithMissingCreds (0.00s)
=== CONT  TestPassthroughBuildCNSIRequest


[31m[0m[33m[0m[31m
53 total assertions[0m

--- PASS: TestDoOauthFlowRequestWithFailedRefreshMethod (0.00s)
=== CONT  TestVersionStatusCode

  Passthrough request should succeed 
  Request should have `200` status code time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"

    Should meet expectations 
    should have all expectations met when savign token [32mâœ”[0m[32mâœ”[0mtime="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"


time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
[31m[0m[33m[0m[31mtime="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"

55 total assertions[0m


    Oauth flow request failed time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
2019/09/11 15:53:25 about to retrieve versions endpoint
[32mâœ”[0m[32mâœ”[0m[32mâœ”[0m

[31m
    All expectations should be met [0m[33m[0m[31m[32mâœ”[0m--- PASS: TestGetUserTokenInfo (0.00s)

58 total assertions[0m

=== CONT  TestVersionContentType
--- PASS: TestLoginToCNSIWithBadUserIDinSession (0.00s)
=== CONT  TestValidateCNSIListWithInvalidGUID
time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"

  Response should have the correct content-type --- PASS: TestVersionStatusCode (0.00s)
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"

  should fail with invalid CNSI Guid time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
[32mâœ”[0m=== CONT  TestValidateCNSIListWithValidGUID

    Request GUID should equal expected GUID [32mâœ”[0m[32mâœ”[0mtime="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"

    should have all expectations met 2019/09/11 15:53:25 about to retrieve versions endpoint
[32mâœ”[0m
  should succeed with valid CNSI Guid time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
[32mâœ”[0m

[31m[0m[33m[0m[31m
64 total assertions[0m
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"

--- PASS: TestVersionContentType (0.00s)


=== CONT  TestVerifySessionExpired
[32mâœ”[0mtime="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"

    Request Method should equal expected Method time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
[31m[0m[33m[0m[32mâœ”[0m[32mâœ”[0m[31m
65 total assertions[0m

--- PASS: TestValidateCNSIListWithInvalidGUID (0.00s)
=== CONT  TestRegisterCFCluster

  Test verification of expired session time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"

    should have all expectations met time="2019-09-11T15:53:25+01:00" level=error msg="Database error finding UAA token: Unable to Find UAA token: sql: no rows in result set"
time="2019-09-11T15:53:25+01:00" level=error msg="Unable to find UAA Token: Unable to Find UAA token: sql: no rows in result setUnable to Find UAA token: sql: no rows in result set"
[32mâœ”[0mtime="2019-09-11T15:53:25+01:00" level=error msg="code=403, message=Unable to find UAA Token: Unable to Find UAA token: sql: no rows in result set"


[31m[0m[33m[0m[31m
68 total assertions[0m

--- PASS: TestValidateCNSIListWithValidGUID (0.00s)
=== CONT  TestListCNSIsWhenListFails

    Should fail to verify session time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
[32mâœ”[0mtime="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
[32mâœ”[0mtime="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"

    Request UserGUID should equal expected UserGUID [32mâœ”[0m

[31m[0m[33m[0m[31m
71 total assertions[0m

--- PASS: TestListCNSIsWhenListFails (0.00s)
=== CONT  TestPassthroughGetPortalUserGUID
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"

  User ID from portal should be correct time="2019-09-11T15:53:25+01:00" level=error msg="Database error finding UAA token: Unable to Find UAA token: sql: no rows in result set"
time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
=== CONT  TestVerifySessionNoDate
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
[32mâœ”[0m[32mâœ”[0m

[31m[0m[33m[0m[31m
73 total assertions[0m

--- PASS: TestPassthroughGetPortalUserGUID (0.00s)
=== CONT  TestPassthroughGetRequestParts

  Test verify sesson without date time="2019-09-11T15:53:25+01:00" level=error msg="Unable to find UAA Token: Unable to Find UAA token: sql: no rows in result setUnable to Find UAA token: sql: no rows in result set"
time="2019-09-11T15:53:25+01:00" level=error msg="code=403, message=Unable to find UAA Token: Unable to Find UAA token: sql: no rows in result set"

  passthrough get request parts should not error time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
--- PASS: TestPassthroughBuildCNSIRequest (0.00s)

    should be able to cast error to HTTPError [32mâœ”[0m
    Should be able to mock/stub user in session object. [32mâœ”[0mtime="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:25+01:00" level=error msg="Could not find session date"
time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
[32mâœ”[0mtime="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"


[31m[0m[33m[0m[31m
76 total assertions[0m

--- PASS: TestPassthroughGetRequestParts (0.00s)
=== CONT  TestPassthroughGetPortalUserGUIDWhenCorruptedSession
time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:25+01:00" level=error msg="Database error finding UAA token: Unable to Find UAA token: sql: no rows in result set"
time="2019-09-11T15:53:25+01:00" level=error msg="Unable to find UAA Token: Unable to Find UAA token: sql: no rows in result setUnable to Find UAA token: sql: no rows in result set"
time="2019-09-11T15:53:25+01:00" level=error msg="code=403, message=Unable to find UAA Token: Unable to Find UAA token: sql: no rows in result set"

  should fail to get portal user Guid from invalid session time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"

time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
    Request should have expected code time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
[32mâœ”[32mâœ”time="2019-09-11T15:53:25+01:00" level=error msg="Could not find session date"
[0m

[31m[0m[33m[0m[31m
77 total assertions[0m

--- PASS: TestPassthroughGetPortalUserGUIDWhenCorruptedSession (0.00s)
=== CONT  TestPassthroughMakeRequestURI

    Should fail to verify session. [32mâœ”[0m[0m

[31m[0m[33m[0m[31m
79 total assertions[0m

--- PASS: TestVerifySessionExpired (0.00s)

  Creation of request URI should succeed time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
[32mâœ”[0mtime="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
time="2019-09-11T15:53:25+01:00" level=error msg="Could not find session date"

    should be able to cast error to HTTPError [32mâœ”[0mtime="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
time="2019-09-11T15:53:25+01:00" level=error msg="Could not find session date"

    Request should have expected code [32mâœ”[0m

[31m[0m[33m[0m[31m
82 total assertions[0m

=== CONT  TestRegisterCFClusterButCantSaveCNSIRecord
--- PASS: TestPassthroughMakeRequestURI (0.00s)
=== CONT  TestLoginToUAAWithBadCreds

time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
  UAA tests with bad credentials time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"


[31m[0m[33m[0m[31m
82 total assertions[0m

time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
--- PASS: TestVerifySessionNoDate (0.00s)
=== CONT  TestLoginToCNSI

  Login to CNSI tests 
    Expectation should be met time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
[32mâœ”[0mtime="2019-09-11T15:53:25+01:00" level=info msg="Updating token mock-token-guid"
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
[32mâœ”[0mtime="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:25+01:00" level=info msg="CloudFoundry Connect..."
[31mðŸ”¥[0m

[31m
Errors:

time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
--- PASS: TestRegisterCFCluster (0.01s)
=== CONT  TestLoginToUAAButCantSaveToken
  * /home/kater/dev/git/stratos/src/jetstream/auth_test.go 
  Line 291: - runtime error: invalid memory address or nil pointer dereference 
  goroutine 263 [running]:
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/reporting/reports.go:148 +0x6d
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/reporting/reports.go:121 +0x71
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:235 +0x137
  panic(0xda3580, 0x1654a30)
  	/usr/local/go/src/runtime/panic.go:522 +0x1b5
  github.com/cloudfoundry-incubator/stratos/src/jetstream.(*portalProxy).loginToUAA(0x0, 0x1028bc0, 0xc000752070, 0x0, 0xc0002ee2d0)
  	/home/kater/dev/git/stratos/src/jetstream/authuaa.go:33 +0x99
  github.com/cloudfoundry-incubator/stratos/src/jetstream.(*uaaAuth).Login(0xc000446d30, 0x1028bc0, 0xc000752070, 0x0, 0x0)
  	/home/kater/dev/git/stratos/src/jetstream/authuaa.go:23 +0x43
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestLoginToUAAWithBadCreds.func1()
  	/home/kater/dev/git/stratos/src/jetstream/auth_test.go:291 +0x503
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/discovery.go:80 +0x24
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:261 +0x154
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:110 +0xf1
  github.com/jtolds/gls.(*ContextManager).SetValues.func1(0x0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:97 +0x40d
  github.com/jtolds/gls.EnsureGoroutineId.func1()
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0x2e
  github.com/jtolds/gls._m(0x0, 0xc0004060c0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:108 +0x31
  github.com/jtolds/gls.github_com_jtolds_gls_markS(0x0, 0xc0004060c0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:56 +0x35
  github.com/jtolds/gls.addStackTag(...)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:49
  github.com/jtolds/gls.EnsureGoroutineId(0xc00015e480)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0xd6
  github.com/jtolds/gls.(*ContextManager).SetValues(0xc00015b810, 0xc00015e420, 0xc000406080)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:63 +0x14b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:105 +0x22b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/doc.go:75 +0xbf
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestLoginToUAAWithBadCreds(0xc00034e700)
  	/home/kater/dev/git/stratos/src/jetstream/auth_test.go:259 +0xcc
  testing.tRunner(0xc00034e700, 0xee4360)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 1 [chan receive]:
  testing.tRunner.func1(0xc00034e200)
  	/usr/local/go/src/testing/testing.go:841 +0x203
  testing.tRunner(0xc00034e200, 0xc0000d3e30)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  testing.runTests(0xc000160f60, 0x1663620, 0x41, 0x41, 0x0)
  	/usr/local/go/src/testing/testing.go:1155 +0x2a9
  testing.(*M).Run(0xc00033c180, 0x0)
  	/usr/local/go/src/testing/testing.go:1072 +0x162
  main.main()
  	_testmain.go:170 +0x13e
  
  goroutine 18 [syscall]:
  os/signal.signal_recv(0x0)
  	/usr/local/go/src/runtime/sigqueue.go:139 +0x9c
  os/signal.loop()
  	/usr/local/go/src/os/signal/signal_unix.go:23 +0x22
  created by os/signal.init.0
  	/usr/local/go/src/os/signal/signal_unix.go:29 +0x41
  
  goroutine 491 [IO wait]:
  internal/poll.runtime_pollWait(0x7f4d2921b0d8, 0x72, 0xffffffffffffffff)
  	/usr/local/go/src/runtime/netpoll.go:182 +0x56
  internal/poll.(*pollDesc).wait(0xc00021eb18, 0x72, 0x200, 0x205, 0xffffffffffffffff)
  	/usr/local/go/src/internal/poll/fd_poll_runtime.go:87 +0x9b
  internal/poll.(*pollDesc).waitRead(...)
  	/usr/local/go/src/internal/poll/fd_poll_runtime.go:92
  internal/poll.(*FD).Read(0xc00021eb00, 0xc0005e4240, 0x205, 0x205, 0x0, 0x0, 0x0)
  	/usr/local/go/src/internal/poll/fd_unix.go:169 +0x19b
  net.(*netFD).Read(0xc00021eb00, 0xc0005e4240, 0x205, 0x205, 0x203000, 0x40, 0xc0008003d8)
  	/usr/local/go/src/net/fd_unix.go:202 +0x4f
  net.(*conn).Read(0xc000010570, 0xc0005e4240, 0x205, 0x205, 0x0, 0x0, 0x0)
  	/usr/local/go/src/net/net.go:177 +0x69
  crypto/tls.(*atLeastReader).Read(0xc0006021e0, 0xc0005e4240, 0x205, 0x205, 0xc00066e480, 0xd, 0xc00051f6d0)
  	/usr/local/go/src/crypto/tls/conn.go:761 +0x60
  bytes.(*Buffer).ReadFrom(0xc0002065d8, 0xffaa80, 0xc0006021e0, 0x412665, 0xdb1860, 0xe6aa80)
  	/usr/local/go/src/bytes/buffer.go:207 +0xbd
  crypto/tls.(*Conn).readFromUntil(0xc000206380, 0xffb800, 0xc000010570, 0x5, 0xc000010570, 0x8)
  	/usr/local/go/src/crypto/tls/conn.go:783 +0xf8
  crypto/tls.(*Conn).readRecordOrCCS(0xc000206380, 0xee6000, 0xc0002064b8, 0x7337c1)
  	/usr/local/go/src/crypto/tls/conn.go:590 +0x125
  crypto/tls.(*Conn).readRecord(...)
  	/usr/local/go/src/crypto/tls/conn.go:558
  crypto/tls.(*Conn).Read(0xc000206380, 0xc00056e000, 0x1000, 0x1000, 0x0, 0x0, 0x0)
  	/usr/local/go/src/crypto/tls/conn.go:1236 +0x137
  net/http.(*connReader).Read(0xc000338690, 0xc00056e000, 0x1000, 0x1000, 0xc00051fa50, 0xc0003386c0, 0x7f4d2bad7700)
  	/usr/local/go/src/net/http/server.go:787 +0x107
  bufio.(*Reader).fill(0xc0004c0c60)
  	/usr/local/go/src/bufio/bufio.go:100 +0x10f
  bufio.(*Reader).ReadSlice(0xc0004c0c60, 0xa, 0x28, 0xc00051fb00, 0x414559, 0xc0003b2600, 0x100)
  	/usr/local/go/src/bufio/bufio.go:356 +0x3d
  bufio.(*Reader).ReadLine(0xc0004c0c60, 0xc00051fb08, 0xc00046c380, 0x7f4d2dcbeb28, 0x0, 0x414de8, 0x30)
  	/usr/local/go/src/bufio/bufio.go:385 +0x34
  net/textproto.(*Reader).readLineSlice(0xc0003386c0, 0xc0003b2600, 0xc00021eb00, 0x0, 0x0, 0x0)
  	/usr/local/go/src/net/textproto/reader.go:55 +0x6f
  net/textproto.(*Reader).ReadLine(...)
  	/usr/local/go/src/net/textproto/reader.go:36
  net/http.readRequest(0xc0004c0c60, 0x0, 0xc0003b2600, 0x0, 0x0)
  	/usr/local/go/src/net/http/request.go:968 +0x8d
  net/http.(*conn).readRequest(0xc0003a2820, 0x100f900, 0xc0005ba280, 0x0, 0x0, 0x0)
  	/usr/local/go/src/net/http/server.go:967 +0x163
  net/http.(*conn).serve(0xc0003a2820, 0x100f900, 0xc0005ba280)
  	/usr/local/go/src/net/http/server.go:1819 +0x6ad
  created by net/http.(*Server).Serve
  	/usr/local/go/src/net/http/server.go:2884 +0x2f4
  
  goroutine 537 [select]:
  net/http.setRequestCancel.func3(0x0, 0xc0003bb9e0, 0xc0002239a0, 0xc0005dbcdc, 0xc0005d4ae0)
  	/usr/local/go/src/net/http/client.go:321 +0xcf
  created by net/http.setRequestCancel
  	/usr/local/go/src/net/http/client.go:320 +0x251
  
  goroutine 494 [select]:
  net/http.(*persistConn).readLoop(0xc00044ed80)
  	/usr/local/go/src/net/http/transport.go:1798 +0x95a
  created by net/http.(*Transport).dialConn
  	/usr/local/go/src/net/http/transport.go:1357 +0xae8
  
  goroutine 530 [IO wait]:
  internal/poll.runtime_pollWait(0x7f4d2921ba98, 0x72, 0x0)
  	/usr/local/go/src/runtime/netpoll.go:182 +0x56
  internal/poll.(*pollDesc).wait(0xc00033c898, 0x72, 0x0, 0x0, 0xe99da0)
  	/usr/local/go/src/internal/poll/fd_poll_runtime.go:87 +0x9b
  internal/poll.(*pollDesc).waitRead(...)
  	/usr/local/go/src/internal/poll/fd_poll_runtime.go:92
  internal/poll.(*FD).Accept(0xc00033c880, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0)
  	/usr/local/go/src/internal/poll/fd_unix.go:384 +0x1ba
  net.(*netFD).accept(0xc00033c880, 0xc0000bc750, 0x23007f4d2dcbeb28, 0xc000416e18)
  	/usr/local/go/src/net/fd_unix.go:238 +0x42
  net.(*TCPListener).accept(0xc0006ae098, 0xc0000bc750, 0xee60e0, 0xe5b480)
  	/usr/local/go/src/net/tcpsock_posix.go:139 +0x32
  net.(*TCPListener).Accept(0xc0006ae098, 0xc000416e88, 0xc0000bc7d8, 0x5d790a00, 0xc00044ca80)
  	/usr/local/go/src/net/tcpsock.go:260 +0x48
  crypto/tls.(*listener).Accept(0xc0002d8780, 0xc000416ee8, 0x18, 0xc0002f0180, 0x73e034)
  	/usr/local/go/src/crypto/tls/tls.go:62 +0x37
  net/http.(*Server).Serve(0xc000296a90, 0x100a900, 0xc0002d8780, 0x0, 0x0)
  	/usr/local/go/src/net/http/server.go:2859 +0x22d
  net/http/httptest.(*Server).goServe.func1(0xc00044ca80)
  	/usr/local/go/src/net/http/httptest/server.go:298 +0x6d
  created by net/http/httptest.(*Server).goServe
  	/usr/local/go/src/net/http/httptest/server.go:296 +0x5c
  
  goroutine 166 [select]:
  database/sql.(*DB).connectionOpener(0xc000410000, 0x100f900, 0xc00067e5c0)
  	/usr/local/go/src/database/sql/sql.go:1000 +0xe8
  created by database/sql.OpenDB
  	/usr/local/go/src/database/sql/sql.go:670 +0x15e
  
  goroutine 565 [IO wait]:
  internal/poll.runtime_pollWait(0x7f4d2921b1a8, 0x72, 0xffffffffffffffff)
  	/usr/local/go/src/runtime/netpoll.go:182 +0x56
  internal/poll.(*pollDesc).wait(0xc000306c18, 0x72, 0x600, 0x661, 0xffffffffffffffff)
  	/usr/local/go/src/internal/poll/fd_poll_runtime.go:87 +0x9b
  internal/poll.(*pollDesc).waitRead(...)
  	/usr/local/go/src/internal/poll/fd_poll_runtime.go:92
  internal/poll.(*FD).Read(0xc000306c00, 0xc0002d0e00, 0x661, 0x661, 0x0, 0x0, 0x0)
  	/usr/local/go/src/internal/poll/fd_unix.go:169 +0x19b
  net.(*netFD).Read(0xc000306c00, 0xc0002d0e00, 0x661, 0x661, 0x203000, 0x0, 0x0)
  	/usr/local/go/src/net/fd_unix.go:202 +0x4f
  net.(*conn).Read(0xc000650100, 0xc0002d0e00, 0x661, 0x661, 0x0, 0x0, 0x0)
  	/usr/local/go/src/net/net.go:177 +0x69
  crypto/tls.(*atLeastReader).Read(0xc000602200, 0xc0002d0e00, 0x661, 0x661, 0x0, 0x0, 0xc000505938)
  	/usr/local/go/src/crypto/tls/conn.go:761 +0x60
  bytes.(*Buffer).ReadFrom(0xc0004af3d8, 0xffaa80, 0xc000602200, 0x412665, 0xdb1860, 0xe6aa80)
  	/usr/local/go/src/bytes/buffer.go:207 +0xbd
  crypto/tls.(*Conn).readFromUntil(0xc0004af180, 0xffb800, 0xc000650100, 0x5, 0xc000650100, 0x0)
  	/usr/local/go/src/crypto/tls/conn.go:783 +0xf8
  crypto/tls.(*Conn).readRecordOrCCS(0xc0004af180, 0xee6000, 0xc0004af2b8, 0xc000306900)
  	/usr/local/go/src/crypto/tls/conn.go:590 +0x125
  crypto/tls.(*Conn).readRecord(...)
  	/usr/local/go/src/crypto/tls/conn.go:558
  crypto/tls.(*Conn).Read(0xc0004af180, 0xc0005ac000, 0x1000, 0x1000, 0x0, 0x0, 0x0)
  	/usr/local/go/src/crypto/tls/conn.go:1236 +0x137
  net/http.(*persistConn).Read(0xc0004b0a20, 0xc0005ac000, 0x1000, 0x1000, 0x60, 0xc0003b0c88, 0x434caf)
  	/usr/local/go/src/net/http/transport.go:1524 +0x7b
  bufio.(*Reader).fill(0xc0004c0d80)
  	/usr/local/go/src/bufio/bufio.go:100 +0x10f
  bufio.(*Reader).Peek(0xc0004c0d80, 0x1, 0xc0006924e0, 0xc0003b0d88, 0x1832, 0x0, 0x0)
  	/usr/local/go/src/bufio/bufio.go:138 +0x4f
  net/http.(*persistConn).readLoop(0xc0004b0a20)
  	/usr/local/go/src/net/http/transport.go:1677 +0x1a3
  created by net/http.(*Transport).dialConn
  	/usr/local/go/src/net/http/transport.go:1357 +0xae8
  
  goroutine 442 [select]:
  net/http.setRequestCancel.func3(0x0, 0xc0003ba2a0, 0xc0005d2000, 0xc0005da210, 0xc0004fa060)
  	/usr/local/go/src/net/http/client.go:321 +0xcf
  created by net/http.setRequestCancel
  	/usr/local/go/src/net/http/client.go:320 +0x251
  
  goroutine 260 [chan receive]:
  testing.(*testContext).waitParallel(0xc000339500)
  	/usr/local/go/src/testing/testing.go:964 +0x95
  testing.(*T).Parallel(0xc00034e400)
  	/usr/local/go/src/testing/testing.go:771 +0x1f1
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestLocalLogin(0xc00034e400)
  	/home/kater/dev/git/stratos/src/jetstream/auth_test.go:81 +0x2f
  testing.tRunner(0xc00034e400, 0xee4308)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 261 [chan receive]:
  testing.(*testContext).waitParallel(0xc000339500)
  	/usr/local/go/src/testing/testing.go:964 +0x95
  testing.(*T).Parallel(0xc00034e500)
  	/usr/local/go/src/testing/testing.go:771 +0x1f1
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestLocalLoginWithBadCredentials(0xc00034e500)
  	/home/kater/dev/git/stratos/src/jetstream/auth_test.go:141 +0x2f
  testing.tRunner(0xc00034e500, 0xee42f0)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 262 [chan receive]:
  testing.(*testContext).waitParallel(0xc000339500)
  	/usr/local/go/src/testing/testing.go:964 +0x95
  testing.(*T).Parallel(0xc00034e600)
  	/usr/local/go/src/testing/testing.go:771 +0x1f1
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestLocalLoginWithNoAdminScope(0xc00034e600)
  	/home/kater/dev/git/stratos/src/jetstream/auth_test.go:197 +0x2f
  testing.tRunner(0xc00034e600, 0xee4300)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 264 [chan receive]:
  testing.(*testContext).waitParallel(0xc000339500)
  	/usr/local/go/src/testing/testing.go:964 +0x95
  testing.(*T).Parallel(0xc00034e800)
  	/usr/local/go/src/testing/testing.go:771 +0x1f1
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestLoginToUAAButCantSaveToken(0xc00034e800)
  	/home/kater/dev/git/stratos/src/jetstream/auth_test.go:307 +0x2f
  testing.tRunner(0xc00034e800, 0xee4358)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 265 [runnable]:
  encoding/asn1.BitString.RightAlign(0xc000456617, 0x80, 0x82, 0x400, 0x217, 0x0, 0x10)
  	/usr/local/go/src/encoding/asn1/asn1.go:176 +0x136
  crypto/x509.parseCertificate(0xc0005a8000, 0x217, 0x219, 0xd27c40)
  	/usr/local/go/src/crypto/x509/x509.go:1343 +0x15d
  crypto/x509.ParseCertificate(0xc000456480, 0x217, 0x219, 0xc00030a801, 0x167b625, 0x0)
  	/usr/local/go/src/crypto/x509/x509.go:1569 +0x11d
  crypto/tls.X509KeyPair(0x167a51c, 0x0, 0x0, 0x167b625, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)
  	/usr/local/go/src/crypto/tls/tls.go:252 +0x523
  net/http/httptest.(*Server).StartTLS(0xc0006523c0)
  	/usr/local/go/src/net/http/httptest/server.go:142 +0x9c
  net/http/httptest.NewTLSServer(0xffc720, 0xc000444a80, 0xbf4ebd)
  	/usr/local/go/src/net/http/httptest/server.go:180 +0xb5
  github.com/cloudfoundry-incubator/stratos/src/jetstream.setupMockServer(0xc00034e900, 0xc00060b848, 0x4, 0x4, 0xc0006c9500)
  	/home/kater/dev/git/stratos/src/jetstream/mock_server_test.go:229 +0xbd
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestLoginToCNSI.func1()
  	/home/kater/dev/git/stratos/src/jetstream/auth_test.go:376 +0x3ab
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/discovery.go:80 +0x24
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:261 +0x154
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:110 +0xf1
  github.com/jtolds/gls.(*ContextManager).SetValues.func1(0x3)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:97 +0x40d
  github.com/jtolds/gls.EnsureGoroutineId.func1()
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0x2e
  github.com/jtolds/gls._m(0x0, 0xc000444340)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:108 +0x31
  github.com/jtolds/gls.github_com_jtolds_gls_mark3(0x0, 0xc000444340)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:68 +0x35
  github.com/jtolds/gls._m(0x3, 0xc000444340)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:110 +0x64
  github.com/jtolds/gls.github_com_jtolds_gls_markS(0x3, 0xc000444340)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:56 +0x35
  github.com/jtolds/gls.addStackTag(...)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:49
  github.com/jtolds/gls.EnsureGoroutineId(0xc00030a180)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0xd6
  github.com/jtolds/gls.(*ContextManager).SetValues(0xc00015b810, 0xc00030a120, 0xc000444300)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:63 +0x14b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:105 +0x22b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/doc.go:75 +0xbf
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestLoginToCNSI(0xc00034e900)
  	/home/kater/dev/git/stratos/src/jetstream/auth_test.go:365 +0xcc
  testing.tRunner(0xc00034e900, 0xee4350)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 266 [chan send]:
  testing.tRunner.func1(0xc00034ea00)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc00034ea00, 0xee4348)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 267 [chan send]:
  testing.tRunner.func1(0xc00034eb00)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc00034eb00, 0xee4330)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 268 [chan send]:
  testing.tRunner.func1(0xc00034ec00)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc00034ec00, 0xee4338)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 269 [chan send]:
  testing.tRunner.func1(0xc00034ed00)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc00034ed00, 0xee4318)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 270 [chan send]:
  testing.tRunner.func1(0xc00034ee00)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc00034ee00, 0xee4378)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 271 [chan send]:
  testing.tRunner.func1(0xc00034ef00)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc00034ef00, 0xee4440)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 272 [chan send]:
  testing.tRunner.func1(0xc00034f000)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc00034f000, 0xee4468)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 275 [chan send]:
  testing.tRunner.func1(0xc00034f300)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc00034f300, 0xee44b8)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 276 [chan send]:
  testing.tRunner.func1(0xc00034f400)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc00034f400, 0xee44b0)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 277 [chan send]:
  testing.tRunner.func1(0xc00034f500)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc00034f500, 0xee44a0)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 278 [runnable]:
  net/http.(*persistConn).roundTrip(0xc0004b0a20, 0xc000263260, 0x0, 0x0, 0x0)
  	/usr/local/go/src/net/http/transport.go:2192 +0x75c
  net/http.(*Transport).roundTrip(0xc00024d440, 0xc0003b2800, 0xc000263230, 0xc0003d83fc, 0xc0003d8400)
  	/usr/local/go/src/net/http/transport.go:481 +0xa1b
  net/http.(*Transport).RoundTrip(0xc00024d440, 0xc0003b2800, 0xc00024d440, 0xbf56607bd5c2f251, 0x2553bc0ad)
  	/usr/local/go/src/net/http/roundtrip.go:17 +0x35
  net/http.send(0xc0003b2700, 0xffb8a0, 0xc00024d440, 0xbf56607bd5c2f251, 0x2553bc0ad, 0x16be960, 0xc0006500f0, 0xbf56607bd5c2f251, 0x1, 0x0)
  	/usr/local/go/src/net/http/client.go:250 +0x461
  net/http.(*Client).send(0xc000263140, 0xc0003b2700, 0xbf56607bd5c2f251, 0x2553bc0ad, 0x16be960, 0xc0006500f0, 0x0, 0x1, 0xc000206a80)
  	/usr/local/go/src/net/http/client.go:174 +0xfb
  net/http.(*Client).do(0xc000263140, 0xc0003b2700, 0x0, 0x0, 0x0)
  	/usr/local/go/src/net/http/client.go:641 +0x279
  net/http.(*Client).Do(...)
  	/usr/local/go/src/net/http/client.go:509
  net/http.(*Client).Get(0xc000263140, 0xc00019e7a0, 0x1f, 0xc00024d440, 0x0, 0x0)
  	/usr/local/go/src/net/http/client.go:398 +0x9e
  github.com/cloudfoundry-incubator/stratos/src/jetstream/plugins/cloudfoundry.(*CloudFoundrySpecification).Info(0xc000160b60, 0xc00019e5c0, 0x17, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)
  	/home/kater/dev/git/stratos/src/jetstream/plugins/cloudfoundry/main.go:206 +0x223
  github.com/cloudfoundry-incubator/stratos/src/jetstream.(*portalProxy).DoRegisterEndpoint(0xc0003b8c80, 0xc00019e640, 0x15, 0xc00019e5c0, 0x17, 0x514301, 0xc0004e024c, 0x10, 0xc0004e0270, 0xa, ...)
  	/home/kater/dev/git/stratos/src/jetstream/cnsi.go:107 +0x326
  github.com/cloudfoundry-incubator/stratos/src/jetstream.(*portalProxy).RegisterEndpoint(0xc0003b8c80, 0x1028bc0, 0xc000752d90, 0xc000281e20, 0xc000160b60, 0xc0003b8c80)
  	/home/kater/dev/git/stratos/src/jetstream/cnsi.go:67 +0x438
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestRegisterCFCluster(0xc00034f700)
  	/home/kater/dev/git/stratos/src/jetstream/cnsi_test.go:39 +0x7fc
  testing.tRunner(0xc00034f700, 0xee4430)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 279 [chan send]:
  testing.tRunner.func1(0xc00034f800)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc00034f800, 0xee4428)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 280 [chan send]:
  testing.tRunner.func1(0xc00034f900)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc00034f900, 0xee4420)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 281 [chan send]:
  testing.tRunner.func1(0xc00034fa00)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc00034fa00, 0xee4418)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 282 [chan send]:
  testing.tRunner.func1(0xc00034fb00)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc00034fb00, 0xee4410)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 283 [select]:
  net/http.(*Transport).getConn(0xc00024d440, 0xc0002633e0, 0x0, 0xc00019ef20, 0x5, 0xc0003d8df0, 0xf, 0x0, 0x0, 0x0, ...)
  	/usr/local/go/src/net/http/transport.go:1020 +0x63d
  net/http.(*Transport).roundTrip(0xc00024d440, 0xc00034f600, 0xc000263350, 0xc0003d8ddc, 0xc0003d8de0)
  	/usr/local/go/src/net/http/transport.go:467 +0x6ef
  net/http.(*Transport).RoundTrip(0xc00024d440, 0xc00034f600, 0xc00024d440, 0xbf56607bd5fee755, 0x25577b5b4)
  	/usr/local/go/src/net/http/roundtrip.go:17 +0x35
  net/http.send(0xc00034f200, 0xffb8a0, 0xc00024d440, 0xbf56607bd5fee755, 0x25577b5b4, 0x16be960, 0xc000010300, 0xbf56607bd5fee755, 0x1, 0x0)
  	/usr/local/go/src/net/http/client.go:250 +0x461
  net/http.(*Client).send(0xc0002630b0, 0xc00034f200, 0xbf56607bd5fee755, 0x25577b5b4, 0x16be960, 0xc000010300, 0x0, 0x1, 0xc000206a80)
  	/usr/local/go/src/net/http/client.go:174 +0xfb
  net/http.(*Client).do(0xc0002630b0, 0xc00034f200, 0x0, 0x0, 0x0)
  	/usr/local/go/src/net/http/client.go:641 +0x279
  net/http.(*Client).Do(...)
  	/usr/local/go/src/net/http/client.go:509
  net/http.(*Client).Get(0xc0002630b0, 0xc00019ef20, 0x1f, 0xc00024d440, 0x0, 0x0)
  	/usr/local/go/src/net/http/client.go:398 +0x9e
  github.com/cloudfoundry-incubator/stratos/src/jetstream/plugins/cloudfoundry.(*CloudFoundrySpecification).Info(0xc000161fc0, 0xc00019ede0, 0x17, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)
  	/home/kater/dev/git/stratos/src/jetstream/plugins/cloudfoundry/main.go:206 +0x223
  github.com/cloudfoundry-incubator/stratos/src/jetstream.(*portalProxy).DoRegisterEndpoint(0xc0000fa780, 0xc00019ee20, 0x15, 0xc00019ede0, 0x17, 0x514301, 0x0, 0x0, 0x0, 0x0, ...)
  	/home/kater/dev/git/stratos/src/jetstream/cnsi.go:107 +0x326
  github.com/cloudfoundry-incubator/stratos/src/jetstream.(*portalProxy).RegisterEndpoint(0xc0000fa780, 0x1028bc0, 0xc0003ee1c0, 0xc0006d7e20, 0xc000161fc0, 0xc0000fa780)
  	/home/kater/dev/git/stratos/src/jetstream/cnsi.go:67 +0x438
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestRegisterCFClusterButCantSaveCNSIRecord(0xc00034fc00)
  	/home/kater/dev/git/stratos/src/jetstream/cnsi_test.go:187 +0x4bf
  testing.tRunner(0xc00034fc00, 0xee4408)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 285 [chan send]:
  testing.tRunner.func1(0xc00034fe00)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc00034fe00, 0xee42b8)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 286 [chan send]:
  testing.tRunner.func1(0xc00034ff00)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc00034ff00, 0xee4290)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 287 [select]:
  net/http.(*Transport).getConn(0xc00024d440, 0xc0003ba2d0, 0x0, 0xc0002a4060, 0x4, 0xc0005da270, 0xe, 0x0, 0x0, 0x0, ...)
  	/usr/local/go/src/net/http/transport.go:1020 +0x63d
  net/http.(*Transport).roundTrip(0xc00024d440, 0xc00034f100, 0xc0003ba2a0, 0xc0005da210, 0xc0005da1d4)
  	/usr/local/go/src/net/http/transport.go:467 +0x6ef
  net/http.(*Transport).RoundTrip(0xc00024d440, 0xc00034f100, 0xc00024d440, 0xbf56607bd5a9c542, 0x25522939d)
  	/usr/local/go/src/net/http/roundtrip.go:17 +0x35
  net/http.send(0xc00034e000, 0xffb8a0, 0xc00024d440, 0xbf56607bd5a9c542, 0x25522939d, 0x16be960, 0xc0004aa030, 0xbf56607bd5a9c542, 0x1, 0x0)
  	/usr/local/go/src/net/http/client.go:250 +0x461
  net/http.(*Client).send(0xc0003ba1b0, 0xc00034e000, 0xbf56607bd5a9c542, 0x25522939d, 0x16be960, 0xc0004aa030, 0x0, 0x1, 0xc0004ae380)
  	/usr/local/go/src/net/http/client.go:174 +0xfb
  net/http.(*Client).do(0xc0003ba1b0, 0xc00034e000, 0x0, 0x0, 0x0)
  	/usr/local/go/src/net/http/client.go:641 +0x279
  net/http.(*Client).Do(...)
  	/usr/local/go/src/net/http/client.go:509
  net/http.(*Client).Get(0xc0003ba1b0, 0xc0002a4060, 0x1a, 0xc00024d440, 0x0, 0x0)
  	/usr/local/go/src/net/http/client.go:398 +0x9e
  github.com/cloudfoundry-incubator/stratos/src/jetstream/plugins/cloudfoundry.(*CloudFoundrySpecification).Info(0xc000158120, 0xea51fa, 0x12, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)
  	/home/kater/dev/git/stratos/src/jetstream/plugins/cloudfoundry/main.go:206 +0x223
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestGetCFv2InfoWithInvalidEndpoint(0xc000392000)
  	/home/kater/dev/git/stratos/src/jetstream/cnsi_test.go:253 +0xfa
  testing.tRunner(0xc000392000, 0xee4298)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 288 [chan send]:
  testing.tRunner.func1(0xc000392100)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc000392100, 0xee42b0)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 289 [chan send]:
  testing.tRunner.func1(0xc000392200)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc000392200, 0xee42a8)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 290 [chan send]:
  testing.tRunner.func1(0xc000392300)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc000392300, 0xee42a0)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 291 [runnable]:
  golang.org/x/crypto/blowfish.ExpandKey(0xc0005dacb0, 0x9, 0x10, 0xc00001a000)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/blowfish/block.go:28 +0x2a8
  golang.org/x/crypto/bcrypt.expensiveBlowfishSetup(0xc000427850, 0x8, 0x20, 0xc00000000e, 0xc0005aa8e0, 0x16, 0x18, 0xc0005aa8e0, 0x18, 0x18)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/bcrypt/bcrypt.go:227 +0x154
  golang.org/x/crypto/bcrypt.bcrypt(0xc000427850, 0x8, 0x20, 0xe, 0xc0005aa8e0, 0x16, 0x18, 0x0, 0x0, 0xc000214270, ...)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/bcrypt/bcrypt.go:191 +0xd5
  golang.org/x/crypto/bcrypt.newFromPassword(0xc000427850, 0x8, 0x20, 0xe, 0x20, 0x8, 0xc000427850)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/bcrypt/bcrypt.go:151 +0x1a1
  golang.org/x/crypto/bcrypt.GenerateFromPassword(0xc000427850, 0x8, 0x20, 0xe, 0x8, 0x20, 0x20, 0x20, 0x18)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/bcrypt/bcrypt.go:90 +0x4d
  github.com/cloudfoundry-incubator/stratos/src/jetstream.HashPassword(...)
  	/home/kater/dev/git/stratos/src/jetstream/auth.go:220
  github.com/cloudfoundry-incubator/stratos/src/jetstream.(*portalProxy).AddLocalUser(0xc000625900, 0x1028bc0, 0xc0001851f0, 0xc0002222d0, 0xc0001851f0, 0xc000625900, 0xc000410000)
  	/home/kater/dev/git/stratos/src/jetstream/localusers.go:50 +0x2fe
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestAddLocalUser.func1()
  	/home/kater/dev/git/stratos/src/jetstream/localusers_test.go:37 +0x329
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/discovery.go:80 +0x24
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:261 +0x154
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:110 +0xf1
  github.com/jtolds/gls.(*ContextManager).SetValues.func1(0x4)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:97 +0x40d
  github.com/jtolds/gls.EnsureGoroutineId.func1()
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0x2e
  github.com/jtolds/gls._m(0x0, 0xc00052d300)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:108 +0x31
  github.com/jtolds/gls.github_com_jtolds_gls_mark4(0x0, 0xc00052d300)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:71 +0x35
  github.com/jtolds/gls._m(0x4, 0xc00052d300)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:110 +0x64
  github.com/jtolds/gls.github_com_jtolds_gls_markS(0x4, 0xc00052d300)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:56 +0x35
  github.com/jtolds/gls.addStackTag(...)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:49
  github.com/jtolds/gls.EnsureGoroutineId(0xc000152540)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0xd6
  github.com/jtolds/gls.(*ContextManager).SetValues(0xc00015b810, 0xc0001524b0, 0xc00052d2c0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:63 +0x14b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:105 +0x22b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/doc.go:75 +0xbf
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestAddLocalUser(0xc000392400)
  	/home/kater/dev/git/stratos/src/jetstream/localusers_test.go:26 +0xa7
  testing.tRunner(0xc000392400, 0xee4238)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 292 [chan send]:
  testing.tRunner.func1(0xc000392500)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc000392500, 0xee4230)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 293 [chan send]:
  testing.tRunner.func1(0xc000392600)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc000392600, 0xee4220)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 294 [runnable]:
  golang.org/x/crypto/blowfish.ExpandKey(0xc0002a42e0, 0x10, 0x12, 0xc000810000)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/blowfish/block.go:28 +0x2a8
  golang.org/x/crypto/bcrypt.expensiveBlowfishSetup(0xc0004cd840, 0x8, 0x20, 0xc00000000e, 0xc0002a42a0, 0x16, 0x18, 0xc0002a42a0, 0x18, 0x18)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/bcrypt/bcrypt.go:228 +0x183
  golang.org/x/crypto/bcrypt.bcrypt(0xc0004cd840, 0x8, 0x20, 0xe, 0xc0002a42a0, 0x16, 0x18, 0x0, 0x0, 0xc0003c00c0, ...)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/bcrypt/bcrypt.go:191 +0xd5
  golang.org/x/crypto/bcrypt.newFromPassword(0xc0004cd840, 0x8, 0x20, 0xe, 0x20, 0x8, 0xc0004cd840)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/bcrypt/bcrypt.go:151 +0x1a1
  golang.org/x/crypto/bcrypt.GenerateFromPassword(0xc0004cd840, 0x8, 0x20, 0xe, 0x8, 0x20, 0x20, 0x4294f5, 0xc0003ec3d0)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/bcrypt/bcrypt.go:90 +0x4d
  github.com/cloudfoundry-incubator/stratos/src/jetstream.HashPassword(...)
  	/home/kater/dev/git/stratos/src/jetstream/auth.go:220
  github.com/cloudfoundry-incubator/stratos/src/jetstream.(*portalProxy).AddLocalUser(0xc0007e8280, 0x1028bc0, 0xc0004e4310, 0xc0001865a0, 0xc0004e4310, 0xc0007e8280, 0xc0003f2240)
  	/home/kater/dev/git/stratos/src/jetstream/localusers.go:50 +0x2fe
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestAddLocalUserDuplicate.func1()
  	/home/kater/dev/git/stratos/src/jetstream/localusers_test.go:121 +0x369
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/discovery.go:80 +0x24
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:261 +0x154
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:110 +0xf1
  github.com/jtolds/gls.(*ContextManager).SetValues.func1(0x8)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:97 +0x40d
  github.com/jtolds/gls.EnsureGoroutineId.func1()
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0x2e
  github.com/jtolds/gls._m(0x0, 0xc000444240)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:108 +0x31
  github.com/jtolds/gls.github_com_jtolds_gls_mark8(0x0, 0xc000444240)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:83 +0x35
  github.com/jtolds/gls._m(0x8, 0xc000444240)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:110 +0x64
  github.com/jtolds/gls.github_com_jtolds_gls_markS(0x8, 0xc000444240)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:56 +0x35
  github.com/jtolds/gls.addStackTag(...)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:49
  github.com/jtolds/gls.EnsureGoroutineId(0xc00044a390)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0xd6
  github.com/jtolds/gls.(*ContextManager).SetValues(0xc00015b810, 0xc00044a330, 0xc000444200)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:63 +0x14b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:105 +0x22b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/doc.go:75 +0xbf
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestAddLocalUserDuplicate(0xc000392700)
  	/home/kater/dev/git/stratos/src/jetstream/localusers_test.go:109 +0xa7
  testing.tRunner(0xc000392700, 0xee4210)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 295 [runnable]:
  golang.org/x/crypto/blowfish.ExpandKey(0xc000642100, 0x9, 0x10, 0xc0001c9900)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/blowfish/block.go:28 +0x2a8
  golang.org/x/crypto/bcrypt.expensiveBlowfishSetup(0xc000461a80, 0x8, 0x20, 0xc00000000e, 0xc00064c260, 0x16, 0x18, 0xc00064c260, 0x18, 0x18)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/bcrypt/bcrypt.go:227 +0x154
  golang.org/x/crypto/bcrypt.bcrypt(0xc000461a80, 0x8, 0x20, 0xe, 0xc00064c260, 0x16, 0x18, 0x0, 0x0, 0x20, ...)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/bcrypt/bcrypt.go:191 +0xd5
  golang.org/x/crypto/bcrypt.newFromPassword(0xc000461a80, 0x8, 0x20, 0xe, 0x20, 0x8, 0xc000461a80)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/bcrypt/bcrypt.go:151 +0x1a1
  golang.org/x/crypto/bcrypt.GenerateFromPassword(0xc000461a80, 0x8, 0x20, 0xe, 0x8, 0x20, 0xc00062e060, 0x1, 0xc000628000)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/bcrypt/bcrypt.go:90 +0x4d
  github.com/cloudfoundry-incubator/stratos/src/jetstream.HashPassword(...)
  	/home/kater/dev/git/stratos/src/jetstream/auth.go:220
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestFindPasswordHash.func1()
  	/home/kater/dev/git/stratos/src/jetstream/localusers_test.go:171 +0x19d
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/discovery.go:80 +0x24
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:261 +0x154
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:110 +0xf1
  github.com/jtolds/gls.(*ContextManager).SetValues.func1(0x9)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:97 +0x40d
  github.com/jtolds/gls.EnsureGoroutineId.func1()
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0x2e
  github.com/jtolds/gls._m(0x0, 0xc00052c0a0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:108 +0x31
  github.com/jtolds/gls.github_com_jtolds_gls_mark9(0x0, 0xc00052c0a0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:86 +0x35
  github.com/jtolds/gls._m(0x9, 0xc00052c0a0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:110 +0x64
  github.com/jtolds/gls.github_com_jtolds_gls_markS(0x9, 0xc00052c0a0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:56 +0x35
  github.com/jtolds/gls.addStackTag(...)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:49
  github.com/jtolds/gls.EnsureGoroutineId(0xc0005320c0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0xd6
  github.com/jtolds/gls.(*ContextManager).SetValues(0xc00015b810, 0xc000532060, 0xc00052c060)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:63 +0x14b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:105 +0x22b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/doc.go:75 +0xbf
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestFindPasswordHash(0xc000392800)
  	/home/kater/dev/git/stratos/src/jetstream/localusers_test.go:152 +0xa7
  testing.tRunner(0xc000392800, 0xee4288)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 296 [runnable]:
  golang.org/x/crypto/blowfish.ExpandKey(0xc000174a40, 0x9, 0x10, 0xc0001c8600)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/blowfish/block.go:28 +0x2a8
  golang.org/x/crypto/bcrypt.expensiveBlowfishSetup(0xc000425a68, 0x8, 0x20, 0xc00000000e, 0xc00019e7e0, 0x16, 0x18, 0xc00019e7e0, 0x18, 0x18)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/bcrypt/bcrypt.go:227 +0x154
  golang.org/x/crypto/bcrypt.bcrypt(0xc000425a68, 0x8, 0x20, 0xe, 0xc00019e7e0, 0x16, 0x18, 0x0, 0x0, 0x20, ...)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/bcrypt/bcrypt.go:191 +0xd5
  golang.org/x/crypto/bcrypt.newFromPassword(0xc000425a68, 0x8, 0x20, 0xe, 0x20, 0x8, 0xc000425a68)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/bcrypt/bcrypt.go:151 +0x1a1
  golang.org/x/crypto/bcrypt.GenerateFromPassword(0xc000425a68, 0x8, 0x20, 0xe, 0x8, 0x20, 0x0, 0x0, 0x110)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/bcrypt/bcrypt.go:90 +0x4d
  github.com/cloudfoundry-incubator/stratos/src/jetstream.HashPassword(...)
  	/home/kater/dev/git/stratos/src/jetstream/auth.go:220
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestUpdateLastLoginTime.func1()
  	/home/kater/dev/git/stratos/src/jetstream/localusers_test.go:216 +0x19d
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/discovery.go:80 +0x24
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:261 +0x154
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:110 +0xf1
  github.com/jtolds/gls.(*ContextManager).SetValues.func1(0x7)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:97 +0x40d
  github.com/jtolds/gls.EnsureGoroutineId.func1()
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0x2e
  github.com/jtolds/gls._m(0x0, 0xc000158b00)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:108 +0x31
  github.com/jtolds/gls.github_com_jtolds_gls_mark7(0x0, 0xc000158b00)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:80 +0x35
  github.com/jtolds/gls._m(0x7, 0xc000158b00)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:110 +0x64
  github.com/jtolds/gls.github_com_jtolds_gls_markS(0x7, 0xc000158b00)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:56 +0x35
  github.com/jtolds/gls.addStackTag(...)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:49
  github.com/jtolds/gls.EnsureGoroutineId(0xc000263920)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0xd6
  github.com/jtolds/gls.(*ContextManager).SetValues(0xc00015b810, 0xc0002638c0, 0xc000158ac0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:63 +0x14b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:105 +0x22b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/doc.go:75 +0xbf
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestUpdateLastLoginTime(0xc000392900)
  	/home/kater/dev/git/stratos/src/jetstream/localusers_test.go:200 +0xa7
  testing.tRunner(0xc000392900, 0xee4478)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 300 [runnable]:
  bytes.makeSlice.func1()
  	/usr/local/go/src/bytes/buffer.go:227 +0x69
  bytes.makeSlice(0x2b20, 0xc00057a000, 0x2b20, 0x2b20)
  	/usr/local/go/src/bytes/buffer.go:232 +0x87
  bytes.(*Buffer).grow(0xc0003ee000, 0xcbc, 0xcbc)
  	/usr/local/go/src/bytes/buffer.go:145 +0x16f
  bytes.(*Buffer).WriteString(0xc0003ee000, 0xedc9fa, 0xcbc, 0x0, 0xc00027d578, 0x0)
  	/usr/local/go/src/bytes/buffer.go:187 +0xe7
  encoding/json.(*encodeState).string(0xc0003ee000, 0xedc9fa, 0xcbc, 0xedc901)
  	/usr/local/go/src/encoding/json/encode.go:953 +0x463
  encoding/json.stringEncoder(0xc0003ee000, 0xd54500, 0xc0003ee870, 0x98, 0x100)
  	/usr/local/go/src/encoding/json/encode.go:611 +0xd9
  encoding/json.structEncoder.encode(0xc0004ea000, 0x7, 0x8, 0xc0003ee000, 0xe460c0, 0xc0003ee850, 0x99, 0xe40100)
  	/usr/local/go/src/encoding/json/encode.go:660 +0x304
  encoding/json.(*encodeState).reflectValue(0xc0003ee000, 0xe460c0, 0xc0003ee850, 0x99, 0x16b0100)
  	/usr/local/go/src/encoding/json/encode.go:334 +0x82
  encoding/json.(*encodeState).marshal(0xc0003ee000, 0xe460c0, 0xc0003ee850, 0x100, 0x0, 0x0)
  	/usr/local/go/src/encoding/json/encode.go:306 +0xee
  encoding/json.Marshal(0xe460c0, 0xc0003ee850, 0xe460c0, 0xc0003ee850, 0x0, 0x1, 0x16032b23)
  	/usr/local/go/src/encoding/json/encode.go:160 +0x52
  github.com/cloudfoundry-incubator/stratos/src/jetstream.jsonMust(...)
  	/home/kater/dev/git/stratos/src/jetstream/helpers_test.go:6
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestDoOauthFlowRequestWithValidToken.func1()
  	/home/kater/dev/git/stratos/src/jetstream/oauth_requests_test.go:34 +0x124
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/discovery.go:80 +0x24
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:261 +0x154
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:110 +0xf1
  github.com/jtolds/gls.(*ContextManager).SetValues.func1(0x6)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:97 +0x40d
  github.com/jtolds/gls.EnsureGoroutineId.func1()
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0x2e
  github.com/jtolds/gls._m(0x0, 0xc000444080)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:108 +0x31
  github.com/jtolds/gls.github_com_jtolds_gls_mark6(0x0, 0xc000444080)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:77 +0x35
  github.com/jtolds/gls._m(0x6, 0xc000444080)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:110 +0x64
  github.com/jtolds/gls.github_com_jtolds_gls_markS(0x6, 0xc000444080)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:56 +0x35
  github.com/jtolds/gls.addStackTag(...)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:49
  github.com/jtolds/gls.EnsureGoroutineId(0xc00044a0f0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0xd6
  github.com/jtolds/gls.(*ContextManager).SetValues(0xc00015b810, 0xc00044a090, 0xc000444040)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:63 +0x14b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:105 +0x22b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/doc.go:75 +0xbf
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestDoOauthFlowRequestWithValidToken(0xc000392d00)
  	/home/kater/dev/git/stratos/src/jetstream/oauth_requests_test.go:23 +0xcc
  testing.tRunner(0xc000392d00, 0xee4278)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 301 [select]:
  net/http.(*Transport).getConn(0xc00024d440, 0xc000698c30, 0x0, 0xc0004f2680, 0x5, 0xc0003f65a0, 0xf, 0x0, 0x0, 0x0, ...)
  	/usr/local/go/src/net/http/transport.go:1020 +0x63d
  net/http.(*Transport).roundTrip(0xc00024d440, 0xc000392b00, 0xc0006981b0, 0xc0003f656c, 0xc0003f6590)
  	/usr/local/go/src/net/http/transport.go:467 +0x6ef
  net/http.(*Transport).RoundTrip(0xc00024d440, 0xc000392b00, 0xc00024d440, 0xbf56607bd6023a5c, 0x2557b08bb)
  	/usr/local/go/src/net/http/roundtrip.go:17 +0x35
  net/http.send(0xc00021c200, 0xffb8a0, 0xc00024d440, 0xbf56607bd6023a5c, 0x2557b08bb, 0x16be960, 0xc0004aa0a0, 0xbf56607bd6023a5c, 0x1, 0x0)
  	/usr/local/go/src/net/http/client.go:250 +0x461
  net/http.(*Client).send(0xc000153fb0, 0xc00021c200, 0xbf56607bd6023a5c, 0x2557b08bb, 0x16be960, 0xc0004aa0a0, 0x0, 0x1, 0xc0003f0e00)
  	/usr/local/go/src/net/http/client.go:174 +0xfb
  net/http.(*Client).do(0xc000153fb0, 0xc00021c200, 0x0, 0x0, 0x0)
  	/usr/local/go/src/net/http/client.go:641 +0x279
  net/http.(*Client).Do(...)
  	/usr/local/go/src/net/http/client.go:509
  github.com/cloudfoundry-incubator/stratos/src/jetstream.(*portalProxy).OAuthHandlerFunc.func1(0xea1b2d, 0xf, 0xc0004d8000, 0xcbc, 0xc0004d8d80, 0xcbc, 0x577c6630, 0x0, 0xe98728, 0x6, ...)
  	/home/kater/dev/git/stratos/src/jetstream/oauth_requests.go:33 +0x307
  github.com/cloudfoundry-incubator/stratos/src/jetstream.(*portalProxy).DoAuthFlowRequest(0xc000624280, 0xc000232160, 0xc00021c200, 0xc00064f4d0, 0xc00064f4d0, 0xb0, 0xe66920)
  	/home/kater/dev/git/stratos/src/jetstream/auth.go:1133 +0x2e0
  github.com/cloudfoundry-incubator/stratos/src/jetstream.(*portalProxy).doOauthFlowRequest(0xc000624280, 0xc000232160, 0xc00021c200, 0xc0003db360, 0xc0003db270, 0xc0003db270)
  	/home/kater/dev/git/stratos/src/jetstream/oauth_requests.go:53 +0xfa
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestDoOauthFlowRequestWithExpiredToken.func1()
  	/home/kater/dev/git/stratos/src/jetstream/oauth_requests_test.go:258 +0x16be
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/discovery.go:80 +0x24
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:261 +0x154
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:110 +0xf1
  github.com/jtolds/gls.(*ContextManager).SetValues.func1(0x5)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:97 +0x40d
  github.com/jtolds/gls.EnsureGoroutineId.func1()
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0x2e
  github.com/jtolds/gls._m(0x0, 0xc0004beb00)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:108 +0x31
  github.com/jtolds/gls.github_com_jtolds_gls_mark5(0x0, 0xc0004beb00)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:74 +0x35
  github.com/jtolds/gls._m(0x5, 0xc0004beb00)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:110 +0x64
  github.com/jtolds/gls.github_com_jtolds_gls_markS(0x5, 0xc0004beb00)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:56 +0x35
  github.com/jtolds/gls.addStackTag(...)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:49
  github.com/jtolds/gls.EnsureGoroutineId(0xc000532c00)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0xd6
  github.com/jtolds/gls.(*ContextManager).SetValues(0xc00015b810, 0xc000532ba0, 0xc0004beac0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:63 +0x14b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:105 +0x22b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/doc.go:75 +0xbf
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestDoOauthFlowRequestWithExpiredToken(0xc000392e00)
  	/home/kater/dev/git/stratos/src/jetstream/oauth_requests_test.go:149 +0xcc
  testing.tRunner(0xc000392e00, 0xee4250)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 302 [chan send]:
  testing.tRunner.func1(0xc000392f00)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc000392f00, 0xee4258)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 306 [chan send]:
  testing.tRunner.func1(0xc000393300)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc000393300, 0xee4260)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 307 [chan send]:
  testing.tRunner.func1(0xc000393400)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc000393400, 0xee4400)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 308 [chan send]:
  testing.tRunner.func1(0xc000393500)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc000393500, 0xee43f8)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 309 [runnable]:
  math/big.lehmerUpdate(0xc00084cc08, 0xc00084cbe8, 0xc00084cbc8, 0xc00084cba8, 0xc00084cb88, 0xc00084cb68, 0x58f680d, 0xd83f5e4, 0x109f8a4b, 0x28683337, ...)
  	/usr/local/go/src/math/big/int.go:564 +0x370
  math/big.(*Int).lehmerGCD(0xc00084cd88, 0xc00084cd28, 0x0, 0xc0002d8bc0, 0xc0002d8ba0, 0x203000)
  	/usr/local/go/src/math/big/int.go:653 +0x40a
  math/big.(*Int).GCD(0xc00084cd88, 0xc00084cd28, 0x0, 0xc0002d8bc0, 0xc0002d8ba0, 0x414559)
  	/usr/local/go/src/math/big/int.go:500 +0xe0
  math/big.(*Int).ModInverse(0xc0002d8ce0, 0xc0002d8bc0, 0xc0002d8ba0, 0xc0002d8cc0)
  	/usr/local/go/src/math/big/int.go:748 +0x162
  crypto/rsa.(*PrivateKey).Precompute(0xc00044c360)
  	/usr/local/go/src/crypto/rsa/rsa.go:442 +0x185
  crypto/x509.ParsePKCS1PrivateKey(0xc0004e6000, 0x262, 0x264, 0x0, 0xc0004ee000, 0xc0004e8630)
  	/usr/local/go/src/crypto/x509/pkcs1.go:86 +0x2ca
  crypto/tls.parsePrivateKey(0xc0004e6000, 0x262, 0x264, 0xc0001fcb00, 0x0, 0x0, 0x0)
  	/usr/local/go/src/crypto/tls/tls.go:290 +0x43
  crypto/tls.X509KeyPair(0x167a51c, 0x0, 0x0, 0x167b625, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)
  	/usr/local/go/src/crypto/tls/tls.go:257 +0x567
  net/http/httptest.(*Server).StartTLS(0xc00044c240)
  	/usr/local/go/src/net/http/httptest/server.go:142 +0x9c
  net/http/httptest.NewTLSServer(0xffc720, 0xc0002d8360, 0xbf4ebd)
  	/usr/local/go/src/net/http/httptest/server.go:180 +0xb5
  github.com/cloudfoundry-incubator/stratos/src/jetstream.setupMockServer(0xc000393600, 0xc0006c58f8, 0x4, 0x4, 0xc00066a2d0)
  	/home/kater/dev/git/stratos/src/jetstream/mock_server_test.go:229 +0xbd
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestPassthroughDoRequest.func1()
  	/home/kater/dev/git/stratos/src/jetstream/passthrough_test.go:19 +0x1af
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/discovery.go:80 +0x24
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:261 +0x154
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:110 +0xf1
  github.com/jtolds/gls.(*ContextManager).SetValues.func1(0x2)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:97 +0x40d
  github.com/jtolds/gls.EnsureGoroutineId.func1()
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0x2e
  github.com/jtolds/gls._m(0x0, 0xc00000f1c0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:108 +0x31
  github.com/jtolds/gls.github_com_jtolds_gls_mark2(0x0, 0xc00000f1c0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:65 +0x35
  github.com/jtolds/gls._m(0x2, 0xc00000f1c0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:110 +0x64
  github.com/jtolds/gls.github_com_jtolds_gls_markS(0x2, 0xc00000f1c0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:56 +0x35
  github.com/jtolds/gls.addStackTag(...)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:49
  github.com/jtolds/gls.EnsureGoroutineId(0xc0003428a0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0xd6
  github.com/jtolds/gls.(*ContextManager).SetValues(0xc00015b810, 0xc000342840, 0xc00000f180)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:63 +0x14b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:105 +0x22b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/doc.go:75 +0xbf
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestPassthroughDoRequest(0xc000393600)
  	/home/kater/dev/git/stratos/src/jetstream/passthrough_test.go:18 +0xcc
  testing.tRunner(0xc000393600, 0xee4390)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 310 [chan send]:
  testing.tRunner.func1(0xc000393700)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc000393700, 0xee43b0)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 311 [chan receive]:
  testing.(*testContext).waitParallel(0xc000339500)
  	/usr/local/go/src/testing/testing.go:964 +0x95
  testing.(*T).Parallel(0xc000393800)
  	/usr/local/go/src/testing/testing.go:771 +0x1f1
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestPassthroughGetEchoHeaders(0xc000393800)
  	/home/kater/dev/git/stratos/src/jetstream/passthrough_test.go:131 +0x2f
  testing.tRunner(0xc000393800, 0xee43a0)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 312 [chan send]:
  testing.tRunner.func1(0xc000393900)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc000393900, 0xee43f0)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 313 [chan send]:
  testing.tRunner.func1(0xc000393a00)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc000393a00, 0xee43d0)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 314 [chan send]:
  testing.tRunner.func1(0xc000393b00)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc000393b00, 0xee43c8)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 315 [chan send]:
  testing.tRunner.func1(0xc000393c00)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc000393c00, 0xee43e0)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 316 [chan send]:
  testing.tRunner.func1(0xc000393d00)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc000393d00, 0xee4388)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 317 [chan send]:
  testing.tRunner.func1(0xc000393e00)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc000393e00, 0xee4498)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 318 [chan send]:
  testing.tRunner.func1(0xc000393f00)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc000393f00, 0xee4488)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 340 [chan send]:
  testing.tRunner.func1(0xc0003b2200)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc0003b2200, 0xee44c0)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 504 [IO wait]:
  internal/poll.runtime_pollWait(0x7f4d2921b828, 0x72, 0x0)
  	/usr/local/go/src/runtime/netpoll.go:182 +0x56
  internal/poll.(*pollDesc).wait(0xc00040e018, 0x72, 0x0, 0x0, 0xe99da0)
  	/usr/local/go/src/internal/poll/fd_poll_runtime.go:87 +0x9b
  internal/poll.(*pollDesc).waitRead(...)
  	/usr/local/go/src/internal/poll/fd_poll_runtime.go:92
  internal/poll.(*FD).Accept(0xc00040e000, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0)
  	/usr/local/go/src/internal/poll/fd_unix.go:384 +0x1ba
  net.(*netFD).accept(0xc00040e000, 0xc000338450, 0x30, 0x30)
  	/usr/local/go/src/net/fd_unix.go:238 +0x42
  net.(*TCPListener).accept(0xc000656018, 0xc000338450, 0xc000054070, 0xc000054000)
  	/usr/local/go/src/net/tcpsock_posix.go:139 +0x32
  net.(*TCPListener).Accept(0xc000656018, 0xee60e0, 0xc000084ea0, 0xc000084e98, 0x414de8)
  	/usr/local/go/src/net/tcpsock.go:260 +0x48
  crypto/tls.(*listener).Accept(0xc000161d60, 0xe2e2c0, 0xc000338450, 0xd93f60, 0x1654920)
  	/usr/local/go/src/crypto/tls/tls.go:62 +0x37
  net/http.(*Server).Serve(0xc000220000, 0x100a900, 0xc000161d60, 0x0, 0x0)
  	/usr/local/go/src/net/http/server.go:2859 +0x22d
  net/http/httptest.(*Server).goServe.func1(0xc000286f00)
  	/usr/local/go/src/net/http/httptest/server.go:298 +0x6d
  created by net/http/httptest.(*Server).goServe
  	/usr/local/go/src/net/http/httptest/server.go:296 +0x5c
  
  goroutine 457 [select]:
  net/http.(*persistConn).writeLoop(0xc000448240)
  	/usr/local/go/src/net/http/transport.go:1976 +0x113
  created by net/http.(*Transport).dialConn
  	/usr/local/go/src/net/http/transport.go:1358 +0xb0d
  
  goroutine 456 [select]:
  net/http.(*persistConn).readLoop(0xc000448240)
  	/usr/local/go/src/net/http/transport.go:1798 +0x95a
  created by net/http.(*Transport).dialConn
  	/usr/local/go/src/net/http/transport.go:1357 +0xae8
  
  goroutine 497 [runnable]:
  net/http.setRequestCancel.func3(0x0, 0xc0006981b0, 0xc0003da280, 0xc0003f656c, 0xc0003963c0)
  	/usr/local/go/src

[0m[33m[0m[31m
85 total assertions[0m

--- FAIL: TestLoginToUAAWithBadCreds (0.00s)
=== CONT  TestLocalLoginWithBadCredentials

  Local Login tests 
  Should fail to authenticate with a DB error time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
[31mtime="2019-09-11T15:53:25+01:00" level=error msg="Unable to save a CNSI Token: Unable to Save CNSI record: Unknown Database Error"
ðŸ”¥[0m

[31m
Errors:


    Oauth flow request failed [32mâœ”[0m  * /home/kater/dev/git/stratos/src/jetstream/auth_test.go 
  Line 349: - runtime error: invalid memory address or nil pointer dereference 
  goroutine 264 [running]:
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/reporting/reports.go:148 +0x6d
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/reporting/reports.go:121 +0x71
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:235 +0x137
  panic(0xda3580, 0x1654a30)
  	/usr/local/go/src/runtime/panic.go:522 +0x1b5
  github.com/cloudfoundry-incubator/stratos/src/jetstream.(*portalProxy).loginToUAA(0x0, 0x1028bc0, 0xc0001380e0, 0x4a, 0x4b)
  	/home/kater/dev/git/stratos/src/jetstream/authuaa.go:33 +0x99
  github.com/cloudfoundry-incubator/stratos/src/jetstream.(*uaaAuth).Login(0xc00063c410, 0x1028bc0, 0xc0001380e0, 0xc000640d70, 0xc000640d20)
  	/home/kater/dev/git/stratos/src/jetstream/authuaa.go:23 +0x43
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestLoginToUAAButCantSaveToken.func1()
  	/home/kater/dev/git/stratos/src/jetstream/auth_test.go:349 +0x7e0
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/discovery.go:80 +0x24
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:261 +0x154
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:110 +0xf1
  github.com/jtolds/gls.(*ContextManager).SetValues.func1(0xa)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:97 +0x40d
  github.com/jtolds/gls.EnsureGoroutineId.func1()
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0x2e
  github.com/jtolds/gls._m(0x0, 0xc000674200)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:108 +0x31
  github.com/jtolds/gls.github_com_jtolds_gls_markA(0x0, 0xc000674200)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:89 +0x35
  github.com/jtolds/gls._m(0xa, 0xc000674200)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:110 +0x64
  github.com/jtolds/gls.github_com_jtolds_gls_markS(0xa, 0xc000674200)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:56 +0x35
  github.com/jtolds/gls.addStackTag(...)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:49
  github.com/jtolds/gls.EnsureGoroutineId(0xc000698990)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0xd6
  github.com/jtolds/gls.(*ContextManager).SetValues(0xc00015b810, 0xc000698930, 0xc0006741c0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:63 +0x14b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:105 +0x22b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/doc.go:75 +0xbf
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestLoginToUAAButCantSaveToken(0xc00034e800)
  	/home/kater/dev/git/stratos/src/jetstream/auth_test.go:309 +0xcc
  testing.tRunner(0xc00034e800, 0xee4358)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 1 [chan receive]:
  testing.tRunner.func1(0xc00034e200)
  	/usr/local/go/src/testing/testing.go:841 +0x203
  testing.tRunner(0xc00034e200, 0xc0000d3e30)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  testing.runTests(0xc000160f60, 0x1663620, 0x41, 0x41, 0x0)
  	/usr/local/go/src/testing/testing.go:1155 +0x2a9
  testing.(*M).Run(0xc00033c180, 0x0)
  	/usr/local/go/src/testing/testing.go:1072 +0x162
  main.main()
  	_testmain.go:170 +0x13e
  
  goroutine 18 [syscall]:
  os/signal.signal_recv(0x0)
  	/usr/local/go/src/runtime/sigqueue.go:139 +0x9c
  os/signal.loop()
  	/usr/local/go/src/os/signal/signal_unix.go:23 +0x22
  created by os/signal.init.0
  	/usr/local/go/src/os/signal/signal_unix.go:29 +0x41
  
  goroutine 585 [runnable]:
  database/sql.(*DB).connectionOpener(0xc0001fa0c0, 0x100f900, 0xc000490a40)
  	/usr/local/go/src/database/sql/sql.go:1000 +0xe8
  created by database/sql.OpenDB
  	/usr/local/go/src/database/sql/sql.go:670 +0x15e
  
  goroutine 537 [select]:
  net/http.setRequestCancel.func3(0x0, 0xc0003bb9e0, 0xc0002239a0, 0xc0005dbcdc, 0xc0005d4ae0)
  	/usr/local/go/src/net/http/client.go:321 +0xcf
  created by net/http.setRequestCancel
  	/usr/local/go/src/net/http/client.go:320 +0x251
  
  goroutine 494 [select]:
  net/http.(*persistConn).readLoop(0xc00044ed80)
  	/usr/local/go/src/net/http/transport.go:1798 +0x95a
  created by net/http.(*Transport).dialConn
  	/usr/local/go/src/net/http/transport.go:1357 +0xae8
  
  goroutine 674 [runnable]:
  net/http.(*persistConn).writeLoop(0xc00033e900)
  	/usr/local/go/src/net/http/transport.go:1973
  created by net/http.(*Transport).dialConn
  	/usr/local/go/src/net/http/transport.go:1358 +0xb0d
  
  goroutine 552 [IO wait]:
  internal/poll.runtime_pollWait(0x7f4d08639fd0, 0x72, 0x0)
  	/usr/local/go/src/runtime/netpoll.go:182 +0x56
  internal/poll.(*pollDesc).wait(0xc00040e998, 0x72, 0x0, 0x0, 0xe99da0)
  	/usr/local/go/src/internal/poll/fd_poll_runtime.go:87 +0x9b
  internal/poll.(*pollDesc).waitRead(...)
  	/usr/local/go/src/internal/poll/fd_poll_runtime.go:92
  internal/poll.(*FD).Accept(0xc00040e980, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0)
  	/usr/local/go/src/internal/poll/fd_unix.go:384 +0x1ba
  net.(*netFD).accept(0xc00040e980, 0xc0002201a0, 0xde007f4d2dcd0c80, 0xc0007c9e18)
  	/usr/local/go/src/net/fd_unix.go:238 +0x42
  net.(*TCPListener).accept(0xc000656040, 0xc0002201a0, 0xee60e0, 0xe5b480)
  	/usr/local/go/src/net/tcpsock_posix.go:139 +0x32
  net.(*TCPListener).Accept(0xc000656040, 0xc0007c9e88, 0xc000220228, 0x5d790a00, 0xc0006523c0)
  	/usr/local/go/src/net/tcpsock.go:260 +0x48
  crypto/tls.(*listener).Accept(0xc000445ce0, 0xc0007c9ee8, 0x18, 0xc00028ca80, 0x73e034)
  	/usr/local/go/src/crypto/tls/tls.go:62 +0x37
  net/http.(*Server).Serve(0xc0000bcc30, 0x100a900, 0xc000445ce0, 0x0, 0x0)
  	/usr/local/go/src/net/http/server.go:2859 +0x22d
  net/http/httptest.(*Server).goServe.func1(0xc0006523c0)
  	/usr/local/go/src/net/http/httptest/server.go:298 +0x6d
  created by net/http/httptest.(*Server).goServe
  	/usr/local/go/src/net/http/httptest/server.go:296 +0x5c
  
  goroutine 661 [chan receive]:
  net/http.(*persistConn).addTLS(0xc00033ec60, 0xc0003f6b90, 0x9, 0x0, 0xc0003f6b9a, 0x5)
  	/usr/local/go/src/net/http/transport.go:1196 +0x1d4
  net/http.(*Transport).dialConn(0xc00024d440, 0x100f940, 0xc00003a288, 0x0, 0xc0005aa280, 0x5, 0xc0003f6b90, 0xf, 0x0, 0xc0002b7f80, ...)
  	/usr/local/go/src/net/http/transport.go:1269 +0x1cde
  net/http.(*Transport).getConn.func4(0xc00024d440, 0x100f940, 0xc00003a288, 0xc000263740, 0xc000048c60)
  	/usr/local/go/src/net/http/transport.go:1015 +0xa6
  created by net/http.(*Transport).getConn
  	/usr/local/go/src/net/http/transport.go:1014 +0x455
  
  goroutine 663 [IO wait]:
  internal/poll.runtime_pollWait(0x7f4d2921b5b8, 0x72, 0xffffffffffffffff)
  	/usr/local/go/src/runtime/netpoll.go:182 +0x56
  internal/poll.(*pollDesc).wait(0xc000306f18, 0x72, 0x200, 0x205, 0xffffffffffffffff)
  	/usr/local/go/src/internal/poll/fd_poll_runtime.go:87 +0x9b
  internal/poll.(*pollDesc).waitRead(...)
  	/usr/local/go/src/internal/poll/fd_poll_runtime.go:92
  internal/poll.(*FD).Read(0xc000306f00, 0xc000456240, 0x205, 0x205, 0x0, 0x0, 0x0)
  	/usr/local/go/src/internal/poll/fd_unix.go:169 +0x19b
  net.(*netFD).Read(0xc000306f00, 0xc000456240, 0x205, 0x205, 0x203000, 0x0, 0xc00005af58)
  	/usr/local/go/src/net/fd_unix.go:202 +0x4f
  net.(*conn).Read(0xc000650140, 0xc000456240, 0x205, 0x205, 0x0, 0x0, 0x0)
  	/usr/local/go/src/net/net.go:177 +0x69
  crypto/tls.(*atLeastReader).Read(0xc0005c9660, 0xc000456240, 0x205, 0x205, 0xc000456240, 0x0, 0xc00038e9e0)
  	/usr/local/go/src/crypto/tls/conn.go:761 +0x60
  bytes.(*Buffer).ReadFrom(0xc00013acd8, 0xffaa80, 0xc0005c9660, 0x412665, 0xdb1860, 0xe6aa80)
  	/usr/local/go/src/bytes/buffer.go:207 +0xbd
  crypto/tls.(*Conn).readFromUntil(0xc00013aa80, 0xffb800, 0xc000650140, 0x5, 0xc000650140, 0x0)
  	/usr/local/go/src/crypto/tls/conn.go:783 +0xf8
  crypto/tls.(*Conn).readRecordOrCCS(0xc00013aa80, 0xc00038ec00, 0x435551, 0xee60e0)
  	/usr/local/go/src/crypto/tls/conn.go:590 +0x125
  crypto/tls.(*Conn).readRecord(...)
  	/usr/local/go/src/crypto/tls/conn.go:558
  crypto/tls.(*Conn).readHandshake(0xc00013aa80, 0xc000606116, 0xc000606180, 0xba, 0xc0)
  	/usr/local/go/src/crypto/tls/conn.go:974 +0x6f
  crypto/tls.(*Conn).clientHandshake(0xc00013aa80, 0x0, 0x0)
  	/usr/local/go/src/crypto/tls/handshake_client.go:171 +0x1a0
  crypto/tls.(*Conn).Handshake(0xc00013aa80, 0x0, 0x0)
  	/usr/local/go/src/crypto/tls/conn.go:1343 +0xef
  net/http.(*persistConn).addTLS.func2(0x0, 0xc00013aa80, 0xc0006ad270, 0xc0003a9380)
  	/usr/local/go/src/net/http/transport.go:1190 +0x42
  created by net/http.(*persistConn).addTLS
  	/usr/local/go/src/net/http/transport.go:1186 +0x1ab
  
  goroutine 660 [select]:
  net/http.setRequestCancel.func3(0x0, 0xc0002636e0, 0xc0006ad1d0, 0xc0003f6b3c, 0xc000048c00)
  	/usr/local/go/src/net/http/client.go:321 +0xcf
  created by net/http.setRequestCancel
  	/usr/local/go/src/net/http/client.go:320 +0x251
  
  goroutine 530 [IO wait]:
  internal/poll.runtime_pollWait(0x7f4d2921ba98, 0x72, 0x0)
  	/usr/local/go/src/runtime/netpoll.go:182 +0x56
  internal/poll.(*pollDesc).wait(0xc00033c898, 0x72, 0x0, 0x0, 0xe99da0)
  	/usr/local/go/src/internal/poll/fd_poll_runtime.go:87 +0x9b
  internal/poll.(*pollDesc).waitRead(...)
  	/usr/local/go/src/internal/poll/fd_poll_runtime.go:92
  internal/poll.(*FD).Accept(0xc00033c880, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0)
  	/usr/local/go/src/internal/poll/fd_unix.go:384 +0x1ba
  net.(*netFD).accept(0xc00033c880, 0xc0000bc750, 0x23007f4d2dcbeb28, 0xc000416e18)
  	/usr/local/go/src/net/fd_unix.go:238 +0x42
  net.(*TCPListener).accept(0xc0006ae098, 0xc0000bc750, 0xee60e0, 0xe5b480)
  	/usr/local/go/src/net/tcpsock_posix.go:139 +0x32
  net.(*TCPListener).Accept(0xc0006ae098, 0xc000416e88, 0xc0000bc7d8, 0x5d790a00, 0xc00044ca80)
  	/usr/local/go/src/net/tcpsock.go:260 +0x48
  crypto/tls.(*listener).Accept(0xc0002d8780, 0xc000416ee8, 0x18, 0xc0002f0180, 0x73e034)
  	/usr/local/go/src/crypto/tls/tls.go:62 +0x37
  net/http.(*Server).Serve(0xc000296a90, 0x100a900, 0xc0002d8780, 0x0, 0x0)
  	/usr/local/go/src/net/http/server.go:2859 +0x22d
  net/http/httptest.(*Server).goServe.func1(0xc00044ca80)
  	/usr/local/go/src/net/http/httptest/server.go:298 +0x6d
  created by net/http/httptest.(*Server).goServe
  	/usr/local/go/src/net/http/httptest/server.go:296 +0x5c
  
  goroutine 166 [select]:
  database/sql.(*DB).connectionOpener(0xc000410000, 0x100f900, 0xc00067e5c0)
  	/usr/local/go/src/database/sql/sql.go:1000 +0xe8
  created by database/sql.OpenDB
  	/usr/local/go/src/database/sql/sql.go:670 +0x15e
  
  goroutine 567 [IO wait]:
  internal/poll.runtime_pollWait(0x7f4d2921bc38, 0x72, 0x0)
  	/usr/local/go/src/runtime/netpoll.go:182 +0x56
  internal/poll.(*pollDesc).wait(0xc00033c218, 0x72, 0x0, 0x0, 0xe99da0)
  	/usr/local/go/src/internal/poll/fd_poll_runtime.go:87 +0x9b
  internal/poll.(*pollDesc).waitRead(...)
  	/usr/local/go/src/internal/poll/fd_poll_runtime.go:92
  internal/poll.(*FD).Accept(0xc00033c200, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0)
  	/usr/local/go/src/internal/poll/fd_unix.go:384 +0x1ba
  net.(*netFD).accept(0xc00033c200, 0xc000620820, 0x0, 0xc00006f280)
  	/usr/local/go/src/net/fd_unix.go:238 +0x42
  net.(*TCPListener).accept(0xc00015c0a0, 0xc000620820, 0xee60e0, 0xfdfd79)
  	/usr/local/go/src/net/tcpsock_posix.go:139 +0x32
  net.(*TCPListener).Accept(0xc00015c0a0, 0xc0007c4e88, 0xc0006208a8, 0x5d790a00, 0xc00044c240)
  	/usr/local/go/src/net/tcpsock.go:260 +0x48
  crypto/tls.(*listener).Accept(0xc000602580, 0xc0007c4ee8, 0x18, 0xc0002f0600, 0x73e034)
  	/usr/local/go/src/crypto/tls/tls.go:62 +0x37
  net/http.(*Server).Serve(0xc0006720d0, 0x100a900, 0xc000602580, 0x0, 0x0)
  	/usr/local/go/src/net/http/server.go:2859 +0x22d
  net/http/httptest.(*Server).goServe.func1(0xc00044c240)
  	/usr/local/go/src/net/http/httptest/server.go:298 +0x6d
  created by net/http/httptest.(*Server).goServe
  	/usr/local/go/src/net/http/httptest/server.go:296 +0x5c
  
  goroutine 542 [runnable]:
  crypto/tls.(*Config).supportedVersions(0xc00069e300, 0x1, 0x0, 0x0, 0x0)
  	/usr/local/go/src/crypto/tls/common.go:770 +0x59
  crypto/tls.(*Conn).makeClientHello(0xc000628a80, 0xc0003a8600, 0x60, 0x60, 0xe67820, 0x0)
  	/usr/local/go/src/crypto/tls/handshake_client.go:52 +0x136
  crypto/tls.(*Conn).clientHandshake(0xc000628a80, 0x0, 0x0)
  	/usr/local/go/src/crypto/tls/handshake_client.go:147 +0x5d
  crypto/tls.(*Conn).Handshake(0xc000628a80, 0x0, 0x0)
  	/usr/local/go/src/crypto/tls/conn.go:1343 +0xef
  net/http.(*persistConn).addTLS.func2(0x0, 0xc000628a80, 0xc0002233b0, 0xc000312840)
  	/usr/local/go/src/net/http/transport.go:1190 +0x42
  created by net/http.(*persistConn).addTLS
  	/usr/local/go/src/net/http/transport.go:1186 +0x1ab
  
  goroutine 604 [select]:
  net/http.setRequestCancel.func3(0x0, 0xc00015f050, 0xc000640c30, 0xc0005db01c, 0xc00033a120)
  	/usr/local/go/src/net/http/client.go:321 +0xcf
  created by net/http.setRequestCancel
  	/usr/local/go/src/net/http/client.go:320 +0x251
  
  goroutine 442 [select]:
  net/http.setRequestCancel.func3(0x0, 0xc0003ba2a0, 0xc0005d2000, 0xc0005da210, 0xc0004fa060)
  	/usr/local/go/src/net/http/client.go:321 +0xcf
  created by net/http.setRequestCancel
  	/usr/local/go/src/net/http/client.go:320 +0x251
  
  goroutine 260 [chan receive]:
  testing.(*testContext).waitParallel(0xc000339500)
  	/usr/local/go/src/testing/testing.go:964 +0x95
  testing.(*T).Parallel(0xc00034e400)
  	/usr/local/go/src/testing/testing.go:771 +0x1f1
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestLocalLogin(0xc00034e400)
  	/home/kater/dev/git/stratos/src/jetstream/auth_test.go:81 +0x2f
  testing.tRunner(0xc00034e400, 0xee4308)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 261 [runnable]:
  golang.org/x/crypto/blowfish.ExpandKey(0xc0005e0100, 0x10, 0x12, 0xc000812600)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/blowfish/block.go:28 +0x2a8
  golang.org/x/crypto/bcrypt.expensiveBlowfishSetup(0xc0005599d0, 0xd, 0x20, 0xc00000000e, 0xc0005e00c0, 0x16, 0x18, 0xc0005e00c0, 0x18, 0x18)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/bcrypt/bcrypt.go:228 +0x183
  golang.org/x/crypto/bcrypt.bcrypt(0xc0005599d0, 0xd, 0x20, 0xe, 0xc0005e00c0, 0x16, 0x18, 0x0, 0x0, 0xc00029ea80, ...)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/bcrypt/bcrypt.go:191 +0xd5
  golang.org/x/crypto/bcrypt.newFromPassword(0xc0005599d0, 0xd, 0x20, 0xe, 0x20, 0xd, 0xc0005599d0)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/bcrypt/bcrypt.go:151 +0x1a1
  golang.org/x/crypto/bcrypt.GenerateFromPassword(0xc0005599d0, 0xd, 0x20, 0xe, 0xd, 0x20, 0x8, 0x0, 0xc000578c60)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/bcrypt/bcrypt.go:90 +0x4d
  github.com/cloudfoundry-incubator/stratos/src/jetstream.HashPassword(...)
  	/home/kater/dev/git/stratos/src/jetstream/auth.go:220
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestLocalLoginWithBadCredentials.func1()
  	/home/kater/dev/git/stratos/src/jetstream/auth_test.go:151 +0x84
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/discovery.go:80 +0x24
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:261 +0x154
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:110 +0xf1
  github.com/jtolds/gls.(*ContextManager).SetValues.func1(0x0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:97 +0x40d
  github.com/jtolds/gls.EnsureGoroutineId.func1()
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0x2e
  github.com/jtolds/gls._m(0x0, 0xc000160220)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:108 +0x31
  github.com/jtolds/gls.github_com_jtolds_gls_markS(0x0, 0xc000160220)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:56 +0x35
  github.com/jtolds/gls.addStackTag(...)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:49
  github.com/jtolds/gls.EnsureGoroutineId(0xc000152c60)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0xd6
  github.com/jtolds/gls.(*ContextManager).SetValues(0xc00015b810, 0xc000152b70, 0xc0001601c0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:63 +0x14b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:105 +0x22b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/doc.go:75 +0xbf
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestLocalLoginWithBadCredentials(0xc00034e500)
  	/home/kater/dev/git/stratos/src/jetstream/auth_test.go:143 +0xa7
  testing.tRunner(0xc00034e500, 0xee42f0)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 262 [chan receive]:
  testing.(*testContext).waitParallel(0xc000339500)
  	/usr/local/go/src/testing/testing.go:964 +0x95
  testing.(*T).Parallel(0xc00034e600)
  	/usr/local/go/src/testing/testing.go:771 +0x1f1
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestLocalLoginWithNoAdminScope(0xc00034e600)
  	/home/kater/dev/git/stratos/src/jetstream/auth_test.go:197 +0x2f
  testing.tRunner(0xc00034e600, 0xee4300)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 263 [chan send]:
  testing.tRunner.func1(0xc00034e700)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc00034e700, 0xee4360)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 265 [select]:
  net/http.(*Transport).getConn(0xc00024d440, 0xc0006986c0, 0x0, 0xc000041080, 0x5, 0xc00068a070, 0xf, 0x0, 0x0, 0x0, ...)
  	/usr/local/go/src/net/http/transport.go:1020 +0x63d
  net/http.(*Transport).roundTrip(0xc00024d440, 0xc000393000, 0xc000698690, 0xc00068a00c, 0xc00068a050)
  	/usr/local/go/src/net/http/transport.go:467 +0x6ef
  net/http.(*Transport).RoundTrip(0xc00024d440, 0xc000393000, 0xc00024d440, 0xbf56607bd61981fe, 0x255925060)
  	/usr/local/go/src/net/http/roundtrip.go:17 +0x35
  net/http.send(0xc000392a00, 0xffb8a0, 0xc00024d440, 0xbf56607bd61981fe, 0x255925060, 0x16be960, 0xc0004aa0e8, 0xbf56607bd61981fe, 0x1, 0x0)
  	/usr/local/go/src/net/http/client.go:250 +0x461
  net/http.(*Client).send(0xc0006985d0, 0xc000392a00, 0xbf56607bd61981fe, 0x255925060, 0x16be960, 0xc0004aa0e8, 0x0, 0x1, 0xc000618160)
  	/usr/local/go/src/net/http/client.go:174 +0xfb
  net/http.(*Client).do(0xc0006985d0, 0xc000392a00, 0x0, 0x0, 0x0)
  	/usr/local/go/src/net/http/client.go:641 +0x279
  net/http.(*Client).Do(...)
  	/usr/local/go/src/net/http/client.go:509
  github.com/cloudfoundry-incubator/stratos/src/jetstream.(*portalProxy).getUAAToken(0xc0001ec280, 0xc00060a9e0, 0xe9fd01, 0x0, 0x0, 0xc00068b210, 0xa, 0xc000041080, 0x23, 0x0, ...)
  	/home/kater/dev/git/stratos/src/jetstream/auth.go:711 +0x59f
  github.com/cloudfoundry-incubator/stratos/src/jetstream.(*portalProxy).getUAATokenWithCreds(0xc0001ec280, 0xe9b701, 0xc00076004d, 0x5, 0xc000760022, 0x8, 0x0, 0x0, 0xc00068b210, 0xa, ...)
  	/home/kater/dev/git/stratos/src/jetstream/auth.go:680 +0x3c7
  github.com/cloudfoundry-incubator/stratos/src/jetstream.(*portalProxy).login(0xc0001ec280, 0x1028bc0, 0xc0002e00e0, 0x1, 0x0, 0x0, 0xc00068b210, 0xa, 0xc000041080, 0x23, ...)
  	/home/kater/dev/git/stratos/src/jetstream/auth.go:628 +0x26c
  github.com/cloudfoundry-incubator/stratos/src/jetstream.(*portalProxy).FetchOAuth2Token(0xc0001ec280, 0xea0c24, 0xe, 0xe98fc2, 0x6, 0xe95de2, 0x2, 0xc000668c00, 0xc0005fca40, 0x17, ...)
  	/home/kater/dev/git/stratos/src/jetstream/auth.go:505 +0x174
  github.com/cloudfoundry-incubator/stratos/src/jetstream.(*portalProxy).ConnectOAuth2(0xc0001ec280, 0x1028bc0, 0xc0002e00e0, 0xea0c24, 0xe, 0xe98fc2, 0x6, 0xe95de2, 0x2, 0xc000668c00, ...)
  	/home/kater/dev/git/stratos/src/jetstream/auth.go:479 +0x90
  github.com/cloudfoundry-incubator/stratos/src/jetstream/plugins/cloudfoundry.(*CloudFoundrySpecification).Connect(0xc000444a00, 0x1028bc0, 0xc0002e00e0, 0xea0c24, 0xe, 0xe98fc2, 0x6, 0xe95de2, 0x2, 0xc000668c00, ...)
  	/home/kater/dev/git/stratos/src/jetstream/plugins/cloudfoundry/main.go:74 +0x1d4
  github.com/cloudfoundry-incubator/stratos/src/jetstream.(*portalProxy).DoLoginToCNSI(0xc0001ec280, 0x1028bc0, 0xc0002e00e0, 0xc00076000a, 0xe, 0xc0003d6100, 0x50, 0xde41e0, 0xc000206000)
  	/home/kater/dev/git/stratos/src/jetstream/auth.go:367 +0x396
  github.com/cloudfoundry-incubator/stratos/src/jetstream.(*portalProxy).loginToCNSI(0xc0001ec280, 0x1028bc0, 0xc0002e00e0, 0xc0004ac1e0, 0xc0004ac190)
  	/home/kater/dev/git/stratos/src/jetstream/auth.go:309 +0x175
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestLoginToCNSI.func1()
  	/home/kater/dev/git/stratos/src/jetstream/auth_test.go:424 +0xdaf
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/discovery.go:80 +0x24
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:261 +0x154
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:110 +0xf1
  github.com/jtolds/gls.(*ContextManager).SetValues.func1(0x3)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:97 +0x40d
  github.com/jtolds/gls.EnsureGoroutineId.func1()
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0x2e
  github.com/jtolds/gls._m(0x0, 0xc000444340)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:108 +0x31
  github.com/jtolds/gls.github_com_jtolds_gls_mark3(0x0, 0xc000444340)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:68 +0x35
  github.com/jtolds/gls._m(0x3, 0xc000444340)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:110 +0x64
  github.com/jtolds/gls.github_com_jtolds_gls_markS(0x3, 0xc000444340)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:56 +0x35
  github.com/jtolds/gls.addStackTag(...)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:49
  github.com/jtolds/gls.EnsureGoroutineId(0xc00030a180)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0xd6
  github.com/jtolds/gls.(*ContextManager).SetValues(0xc00015b810, 0xc00030a120, 0xc000444300)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:63 +0x14b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:105 +0x22b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/doc.go:75 +0xbf
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestLoginToCNSI(0xc00034e900)
  	/home/kater/dev/git/stratos/src/jetstream/auth_test.go:365 +0xcc
  testing.tRunner(0xc00034e900, 0xee4350)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 266 [chan send]:
  testing.tRunner.func1(0xc00034ea00)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc00034ea00, 0xee4348)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 267 [chan send]:
  testing.tRunner.func1(0xc00034eb00)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc00034eb00, 0xee4330)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 268 [chan send]:
  testing.tRunner.func1(0xc00034ec00)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc00034ec00, 0xee4338)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 269 [chan send]:
  testing.tRunner.func1(0xc00034ed00)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc00034ed00, 0xee4318)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 270 [chan send]:
  testing.tRunner.func1(0xc00034ee00)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc00034ee00, 0xee4378)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 271 [chan send]:
  testing.tRunner.func1(0xc00034ef00)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc00034ef00, 0xee4440)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 272 [chan send]:
  testing.tRunner.func1(0xc00034f000)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc00034f000, 0xee4468)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 275 [chan send]:
  testing.tRunner.func1(0xc00034f300)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc00034f300, 0xee44b8)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 276 [chan send]:
  testing.tRunner.func1(0xc00034f400)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc00034f400, 0xee44b0)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 277 [chan send]:
  testing.tRunner.func1(0xc00034f500)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc00034f500, 0xee44a0)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 278 [chan send]:
  testing.tRunner.func1(0xc00034f700)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc00034f700, 0xee4430)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 279 [chan send]:
  testing.tRunner.func1(0xc00034f800)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc00034f800, 0xee4428)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 280 [chan send]:
  testing.tRunner.func1(0xc00034f900)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc00034f900, 0xee4420)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 281 [chan send]:
  testing.tRunner.func1(0xc00034fa00)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc00034fa00, 0xee4418)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 282 [chan send]:
  testing.tRunner.func1(0xc00034fb00)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc00034fb00, 0xee4410)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 283 [select]:
  net/http.(*persistConn).roundTrip(0xc00033e900, 0xc0002633e0, 0x0, 0x0, 0x0)
  	/usr/local/go/src/net/http/transport.go:2192 +0x75c
  net/http.(*Transport).roundTrip(0xc00024d440, 0xc00034f600, 0xc000263350, 0xc0003d8ddc, 0xc0003d8de0)
  	/usr/local/go/src/net/http/transport.go:481 +0xa1b
  net/http.(*Transport).RoundTrip(0xc00024d440, 0xc00034f600, 0xc00024d440, 0xbf56607bd5fee755, 0x25577b5b4)
  	/usr/local/go/src/net/http/roundtrip.go:17 +0x35
  net/http.send(0xc00034f200, 0xffb8a0, 0xc00024d440, 0xbf56607bd5fee755, 0x25577b5b4, 0x16be960, 0xc000010300, 0xbf56607bd5fee755, 0x1, 0x0)
  	/usr/local/go/src/net/http/client.go:250 +0x461
  net/http.(*Client).send(0xc0002630b0, 0xc00034f200, 0xbf56607bd5fee755, 0x25577b5b4, 0x16be960, 0xc000010300, 0x0, 0x1, 0xc000206a80)
  	/usr/local/go/src/net/http/client.go:174 +0xfb
  net/http.(*Client).do(0xc0002630b0, 0xc00034f200, 0x0, 0x0, 0x0)
  	/usr/local/go/src/net/http/client.go:641 +0x279
  net/http.(*Client).Do(...)
  	/usr/local/go/src/net/http/client.go:509
  net/http.(*Client).Get(0xc0002630b0, 0xc00019ef20, 0x1f, 0xc00024d440, 0x0, 0x0)
  	/usr/local/go/src/net/http/client.go:398 +0x9e
  github.com/cloudfoundry-incubator/stratos/src/jetstream/plugins/cloudfoundry.(*CloudFoundrySpecification).Info(0xc000161fc0, 0xc00019ede0, 0x17, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)
  	/home/kater/dev/git/stratos/src/jetstream/plugins/cloudfoundry/main.go:206 +0x223
  github.com/cloudfoundry-incubator/stratos/src/jetstream.(*portalProxy).DoRegisterEndpoint(0xc0000fa780, 0xc00019ee20, 0x15, 0xc00019ede0, 0x17, 0x514301, 0x0, 0x0, 0x0, 0x0, ...)
  	/home/kater/dev/git/stratos/src/jetstream/cnsi.go:107 +0x326
  github.com/cloudfoundry-incubator/stratos/src/jetstream.(*portalProxy).RegisterEndpoint(0xc0000fa780, 0x1028bc0, 0xc0003ee1c0, 0xc0006d7e20, 0xc000161fc0, 0xc0000fa780)
  	/home/kater/dev/git/stratos/src/jetstream/cnsi.go:67 +0x438
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestRegisterCFClusterButCantSaveCNSIRecord(0xc00034fc00)
  	/home/kater/dev/git/stratos/src/jetstream/cnsi_test.go:187 +0x4bf
  testing.tRunner(0xc00034fc00, 0xee4408)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 285 [chan send]:
  testing.tRunner.func1(0xc00034fe00)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc00034fe00, 0xee42b8)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 286 [chan send]:
  testing.tRunner.func1(0xc00034ff00)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc00034ff00, 0xee4290)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 287 [select]:
  net/http.(*Transport).getConn(0xc00024d440, 0xc0003ba2d0, 0x0, 0xc0002a4060, 0x4, 0xc0005da270, 0xe, 0x0, 0x0, 0x0, ...)
  	/usr/local/go/src/net/http/transport.go:1020 +0x63d
  net/http.(*Transport).roundTrip(0xc00024d440, 0xc00034f100, 0xc0003ba2a0, 0xc0005da210, 0xc0005da1d4)
  	/usr/local/go/src/net/http/transport.go:467 +0x6ef
  net/http.(*Transport).RoundTrip(0xc00024d440, 0xc00034f100, 0xc00024d440, 0xbf56607bd5a9c542, 0x25522939d)
  	/usr/local/go/src/net/http/roundtrip.go:17 +0x35
  net/http.send(0xc00034e000, 0xffb8a0, 0xc00024d440, 0xbf56607bd5a9c542, 0x25522939d, 0x16be960, 0xc0004aa030, 0xbf56607bd5a9c542, 0x1, 0x0)
  	/usr/local/go/src/net/http/client.go:250 +0x461
  net/http.(*Client).send(0xc0003ba1b0, 0xc00034e000, 0xbf56607bd5a9c542, 0x25522939d, 0x16be960, 0xc0004aa030, 0x0, 0x1, 0xc0004ae380)
  	/usr/local/go/src/net/http/client.go:174 +0xfb
  net/http.(*Client).do(0xc0003ba1b0, 0xc00034e000, 0x0, 0x0, 0x0)
  	/usr/local/go/src/net/http/client.go:641 +0x279
  net/http.(*Client).Do(...)
  	/usr/local/go/src/net/http/client.go:509
  net/http.(*Client).Get(0xc0003ba1b0, 0xc0002a4060, 0x1a, 0xc00024d440, 0x0, 0x0)
  	/usr/local/go/src/net/http/client.go:398 +0x9e
  github.com/cloudfoundry-incubator/stratos/src/jetstream/plugins/cloudfoundry.(*CloudFoundrySpecification).Info(0xc000158120, 0xea51fa, 0x12, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)
  	/home/kater/dev/git/stratos/src/jetstream/plugins/cloudfoundry/main.go:206 +0x223
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestGetCFv2InfoWithInvalidEndpoint(0xc000392000)
  	/home/kater/dev/git/stratos/src/jetstream/cnsi_test.go:253 +0xfa
  testing.tRunner(0xc000392000, 0xee4298)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 288 [chan send]:
  testing.tRunner.func1(0xc000392100)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc000392100, 0xee42b0)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 289 [chan send]:
  testing.tRunner.func1(0xc000392200)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc000392200, 0xee42a8)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 290 [chan send]:
  testing.tRunner.func1(0xc000392300)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc000392300, 0xee42a0)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 291 [runnable]:
  golang.org/x/crypto/blowfish.ExpandKey(0xc0005dacb0, 0x9, 0x10, 0xc00001a000)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/blowfish/block.go:28 +0x2a8
  golang.org/x/crypto/bcrypt.expensiveBlowfishSetup(0xc000427850, 0x8, 0x20, 0xc00000000e, 0xc0005aa8e0, 0x16, 0x18, 0xc0005aa8e0, 0x18, 0x18)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/bcrypt/bcrypt.go:227 +0x154
  golang.org/x/crypto/bcrypt.bcrypt(0xc000427850, 0x8, 0x20, 0xe, 0xc0005aa8e0, 0x16, 0x18, 0x0, 0x0, 0xc000214270, ...)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/bcrypt/bcrypt.go:191 +0xd5
  golang.org/x/crypto/bcrypt.newFromPassword(0xc000427850, 0x8, 0x20, 0xe, 0x20, 0x8, 0xc000427850)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/bcrypt/bcrypt.go:151 +0x1a1
  golang.org/x/crypto/bcrypt.GenerateFromPassword(0xc000427850, 0x8, 0x20, 0xe, 0x8, 0x20, 0x20, 0x20, 0x18)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/bcrypt/bcrypt.go:90 +0x4d
  github.com/cloudfoundry-incubator/stratos/src/jetstream.HashPassword(...)
  	/home/kater/dev/git/stratos/src/jetstream/auth.go:220
  github.com/cloudfoundry-incubator/stratos/src/jetstream.(*portalProxy).AddLocalUser(0xc000625900, 0x1028bc0, 0xc0001851f0, 0xc0002222d0, 0xc0001851f0, 0xc000625900, 0xc000410000)
  	/home/kater/dev/git/stratos/src/jetstream/localusers.go:50 +0x2fe
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestAddLocalUser.func1()
  	/home/kater/dev/git/stratos/src/jetstream/localusers_test.go:37 +0x329
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/discovery.go:80 +0x24
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:261 +0x154
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:110 +0xf1
  github.com/jtolds/gls.(*ContextManager).SetValues.func1(0x4)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:97 +0x40d
  github.com/jtolds/gls.EnsureGoroutineId.func1()
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0x2e
  github.com/jtolds/gls._m(0x0, 0xc00052d300)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:108 +0x31
  github.com/jtolds/gls.github_com_jtolds_gls_mark4(0x0, 0xc00052d300)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:71 +0x35
  github.com/jtolds/gls._m(0x4, 0xc00052d300)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:110 +0x64
  github.com/jtolds/gls.github_com_jtolds_gls_markS(0x4, 0xc00052d300)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:56 +0x35
  github.com/jtolds/gls.addStackTag(...)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:49
  github.com/jtolds/gls.EnsureGoroutineId(0xc000152540)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0xd6
  github.com/jtolds/gls.(*ContextManager).SetValues(0xc00015b810, 0xc0001524b0, 0xc00052d2c0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:63 +0x14b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:105 +0x22b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/doc.go:75 +0xbf
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestAddLocalUser(0xc000392400)
  	/home/kater/dev/git/stratos/src/jetstream/localusers_test.go:26 +0xa7
  testing.tRunner(0xc000392400, 0xee4238)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 292 [chan send]:
  testing.tRunner.func1(0xc000392500)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc000392500, 0xee4230)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 293 [chan send]:
  testing.tRunner.func1(0xc000392600)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc000392600, 0xee4220)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 294 [runnable]:
  golang.org/x/crypto/blowfish.ExpandKey(0xc00003a820, 0x9, 0x10, 0xc000810000)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/blowfish/block.go:28 +0x2a8
  golang.org/x/crypto/bcrypt.expensiveBlowfishSetup(0xc0004cd840, 0x8, 0x20, 0xc00000000e, 0xc0002a42a0, 0x16, 0x18, 0xc0002a42a0, 0x18, 0x18)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/bcrypt/bcrypt.go:227 +0x154
  golang.org/x/crypto/bcrypt.bcrypt(0xc0004cd840, 0x8, 0x20, 0xe, 0xc0002a42a0, 0x16, 0x18, 0x0, 0x0, 0xc0003c00c0, ...)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/bcrypt/bcrypt.go:191 +0xd5
  golang.org/x/crypto/bcrypt.newFromPassword(0xc0004cd840, 0x8, 0x20, 0xe, 0x20, 0x8, 0xc0004cd840)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/bcrypt/bcrypt.go:151 +0x1a1
  golang.org/x/crypto/bcrypt.GenerateFromPassword(0xc0004cd840, 0x8, 0x20, 0xe, 0x8, 0x20, 0x20, 0x4294f5, 0xc0003ec3d0)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/bcrypt/bcrypt.go:90 +0x4d
  github.com/cloudfoundry-incubator/stratos/src/jetstream.HashPassword(...)
  	/home/kater/dev/git/stratos/src/jetstream/auth.go:220
  github.com/cloudfoundry-incubator/stratos/src/jetstream.(*portalProxy).AddLocalUser(0xc0007e8280, 0x1028bc0, 0xc0004e4310, 0xc0001865a0, 0xc0004e4310, 0xc0007e8280, 0xc0003f2240)
  	/home/kater/dev/git/stratos/src/jetstream/localusers.go:50 +0x2fe
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestAddLocalUserDuplicate.func1()
  	/home/kater/dev/git/stratos/src/jetstream/localusers_test.go:121 +0x369
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/discovery.go:80 +0x24
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:261 +0x154
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:110 +0xf1
  github.com/jtolds/gls.(*ContextManager).SetValues.func1(0x8)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:97 +0x40d
  github.com/jtolds/gls.EnsureGoroutineId.func1()
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0x2e
  github.com/jtolds/gls._m(0x0, 0xc000444240)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:108 +0x31
  github.com/jtolds/gls.github_com_jtolds_gls_mark8(0x0, 0xc000444240)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:83 +0x35
  github.com/jtolds/gls._m(0x8, 0xc000444240)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:110 +0x64
  github.com/jtolds/gls.github_com_jtolds_gls_markS(0x8, 0xc000444240)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:56 +0x35
  github.com/jtolds/gls.addStackTag(...)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:49
  github.com/jtolds/gls.EnsureGoroutineId(0xc00044a390)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0xd6
  github.com/jtolds/gls.(*ContextManager).SetValues(0xc00015b810, 0xc00044a330, 0xc000444200)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:63 +0x14b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:105 +0x22b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/doc.go:75 +0xbf
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestAddLocalUserDuplicate(0xc000392700)
  	/home/kater/dev/git/stratos/src/jetstream/localusers_test.go:109 +0xa7
  testing.tRunner(0xc000392700, 0xee4210)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 295 [runnable]:
  golang.org/x/crypto/blowfish.ExpandKey(0xc00064c2a0, 0x10, 0x12, 0xc0001c9900)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/blowfish/block.go:28 +0x2a8
  golang.org/x/crypto/bcrypt.expensiveBlowfishSetup(0xc000461a80, 0x8, 0x20, 0xc00000000e, 0xc00064c260, 0x16, 0x18, 0xc00064c260, 0x18, 0x18)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/bcrypt/bcrypt.go:228 +0x183
  golang.org/x/crypto/bcrypt.bcrypt(0xc000461a80, 0x8, 0x20, 0xe, 0xc00064c260, 0x16, 0x18, 0x0, 0x0, 0x20, ...)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/bcrypt/bcrypt.go:191 +0xd5
  golang.org/x/crypto/bcrypt.newFromPassword(0xc000461a80, 0x8, 0x20, 0xe, 0x20, 0x8, 0xc000461a80)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/bcrypt/bcrypt.go:151 +0x1a1
  golang.org/x/crypto/bcrypt.GenerateFromPassword(0xc000461a80, 0x8, 0x20, 0xe, 0x8, 0x20, 0xc00062e060, 0x1, 0xc000628000)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/bcrypt/bcrypt.go:90 +0x4d
  github.com/cloudfoundry-incubator/stratos/src/jetstream.HashPassword(...)
  	/home/kater/dev/git/stratos/src/jetstream/auth.go:220
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestFindPasswordHash.func1()
  	/home/kater/dev/git/stratos/src/jetstream/localusers_test.go:171 +0x19d
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/discovery.go:80 +0x24
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:261 +0x154
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:110 +0xf1
  github.com/jtolds/gls.(*ContextManager).SetValues.func1(0x9)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:97 +0x40d
  github.com/jtolds/gls.EnsureGoroutineId.func1()
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0x2e
  github.com/jtolds/gls._m(0x0, 0xc00052c0a0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:108 +0x31
  github.com/jtolds/gls.github_com_jtolds_gls_mark9(0x0, 0xc00052c0a0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:86 +0x35
  github.com/jtolds/gls._m(0x9, 0xc00052c0a0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:110 +0x64
  github.com/jtolds/gls.github_com_jtolds_gls_markS(0x9, 0xc00052c0a0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:56 +0x35
  github.com/jtolds/gls.addStackTag(...)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:49
  github.com/jtolds/gls.EnsureGoroutineId(0xc0005320c0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0xd6
  github.com/jtolds/gls.(*ContextManager).SetValues(0xc00015b810, 0xc000532060, 0xc00052c060)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:63 +0x14b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:105 +0x22b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/doc.go:75 +0xbf
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestFindPasswordHash(0xc000392800)
  	/home/kater/dev/git/stratos/src/jetstream/localusers_test.go:152 +0xa7
  testing.tRunner(0xc000392800, 0xee4288)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 296 [runnable]:
  golang.org/x/crypto/blowfish.ExpandKey(0xc00019e820, 0x10, 0x12, 0xc0001c8600)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/blowfish/block.go:28 +0x2a8
  golang.org/x/crypto/bcrypt.expensiveBlowfishSetup(0xc000425a68, 0x8, 0x20, 0xc00000000e, 0xc00019e7e0, 0x16, 0x18, 0xc00019e7e0, 0x18, 0x18)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/bcrypt/bcrypt.go:228 +0x183
  golang.org/x/crypto/bcrypt.bcrypt(0xc000425a68, 0x8, 0x20, 0xe, 0xc00019e7e0, 0x16, 0x18, 0x0, 0x0, 0x20, ...)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/bcrypt/bcrypt.go:191 +0xd5
  golang.org/x/crypto/bcrypt.newFromPassword(0xc000425a68, 0x8, 0x20, 0xe, 0x20, 0x8, 0xc000425a68)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/bcrypt/bcrypt.go:151 +0x1a1
  golang.org/x/crypto/bcrypt.GenerateFromPassword(0xc000425a68, 0x8, 0x20, 0xe, 0x8, 0x20, 0x0, 0x0, 0x110)
  	/home/kater/go/pkg/mod/golang.org/x/crypto@v0.0.0-20190513172903-22d7a77e9e5f/bcrypt/bcrypt.go:90 +0x4d
  github.com/cloudfoundry-incubator/stratos/src/jetstream.HashPassword(...)
  	/home/kater/dev/git/stratos/src/jetstream/auth.go:220
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestUpdateLastLoginTime.func1()
  	/home/kater/dev/git/stratos/src/jetstream/localusers_test.go:216 +0x19d
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/discovery.go:80 +0x24
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:261 +0x154
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:110 +0xf1
  github.com/jtolds/gls.(*ContextManager).SetValues.func1(0x7)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:97 +0x40d
  github.com/jtolds/gls.EnsureGoroutineId.func1()
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0x2e
  github.com/jtolds/gls._m(0x0, 0xc000158b00)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:108 +0x31
  github.com/jtolds/gls.github_com_jtolds_gls_mark7(0x0, 0xc000158b00)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:80 +0x35
  github.com/jtolds/gls._m(0x7, 0xc000158b00)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:110 +0x64
  github.com/jtolds/gls.github_com_jtolds_gls_markS(0x7, 0xc000158b00)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:56 +0x35
  github.com/jtolds/gls.addStackTag(...)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:49
  github.com/jtolds/gls.EnsureGoroutineId(0xc000263920)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0xd6
  github.com/jtolds/gls.(*ContextManager).SetValues(0xc00015b810, 0xc0002638c0, 0xc000158ac0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:63 +0x14b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:105 +0x22b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/doc.go:75 +0xbf
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestUpdateLastLoginTime(0xc000392900)
  	/home/kater/dev/git/stratos/src/jetstream/localusers_test.go:200 +0xa7
  testing.tRunner(0xc000392900, 0xee4478)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 300 [select]:
  net/http.(*Transport).getConn(0xc00024d440, 0xc000263710, 0x0, 0xc0005aa280, 0x5, 0xc0003f6b90, 0xf, 0x0, 0x0, 0x0, ...)
  	/usr/local/go/src/net/http/transport.go:1020 +0x63d
  net/http.(*Transport).roundTrip(0xc00024d440, 0xc000176100, 0xc0002636e0, 0xc0003f6b3c, 0xc0003f6b80)
  	/usr/local/go/src/net/http/transport.go:467 +0x6ef
  net/http.(*Transport).RoundTrip(0xc00024d440, 0xc000176100, 0xc00024d440, 0xbf56607bd61de669, 0x25596b4c3)
  	/usr/local/go/src/net/http/roundtrip.go:17 +0x35
  net/http.send(0xc00034fd00, 0xffb8a0, 0xc00024d440, 0xbf56607bd61de669, 0x25596b4c3, 0x16be960, 0xc000650130, 0xbf56607bd61de669, 0x1, 0x0)
  	/usr/local/go/src/net/http/client.go:250 +0x461
  net/http.(*Client).send(0xc000263620, 0xc00034fd00, 0xbf56607bd61de669, 0x25596b4c3, 0x16be960, 0xc000650130, 0x0, 0x1, 0xc000628000)
  	/usr/local/go/src/net/http/client.go:174 +0xfb
  net/http.(*Client).do(0xc000263620, 0xc00034fd00, 0x0, 0x0, 0x0)
  	/usr/local/go/src/net/http/client.go:641 +0x279
  net/http.(*Client).Do(...)
  	/usr/local/go/src/net/http/client.go:509
  github.com/cloudfoundry-incubator/stratos/src/jetstream.(*portalProxy).OAuthHandlerFunc.func1(0xea1b2d, 0xf, 0xc000310380, 0xcbc, 0xc000311100, 0xcbc, 0x5d7a5be5, 0x0, 0xe98728, 0x6, ...)
  	/home/kater/dev/git/stratos/src/jetstream/oauth_requests.go:33 +0x307
  github.com/cloudfoundry-incubator/stratos/src/jetstream.(*portalProxy).DoAuthFlowRequest(0xc00018c500, 0xc0004822c0, 0xc00034fd00, 0xc000263410, 0xc000263410, 0xb0, 0xe66920)
  	/home/kater/dev/git/stratos/src/jetstream/auth.go:1133 +0x2e0
  github.com/cloudfoundry-incubator/stratos/src/jetstream.(*portalProxy).doOauthFlowRequest(0xc00018c500, 0xc0004822c0, 0xc00034fd00, 0x100bc80, 0xc0006acfa0, 0xc0006acfa0)
  	/home/kater/dev/git/stratos/src/jetstream/oauth_requests.go:53 +0xfa
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestDoOauthFlowRequestWithValidToken.func1()
  	/home/kater/dev/git/stratos/src/jetstream/oauth_requests_test.go:116 +0x11a5
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/discovery.go:80 +0x24
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:261 +0x154
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:110 +0xf1
  github.com/jtolds/gls.(*ContextManager).SetValues.func1(0x6)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:97 +0x40d
  github.com/jtolds/gls.EnsureGoroutineId.func1()
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0x2e
  github.com/jtolds/gls._m(0x0, 0xc000444080)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:108 +0x31
  github.com/jtolds/gls.github_com_jtolds_gls_mark6(0x0, 0xc000444080)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:77 +0x35
  github.com/jtolds/gls._m(0x6, 0xc000444080)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:110 +0x64
  github.com/jtolds/gls.github_com_jtolds_gls_markS(0x6, 0xc000444080)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:56 +0x35
  github.com/jtolds/gls.addStackTag(...)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:49
  github.com/jtolds/gls.EnsureGoroutineId(0xc00044a0f0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0xd6
  github.com/jtolds/gls.(*ContextManager).SetValues(0xc00015b810, 0xc00044a090, 0xc000444040)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:63 +0x14b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:105 +0x22b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/doc.go:75 +0xbf
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestDoOauthFlowRequestWithValidToken(0xc000392d00)
  	/home/kater/dev/git/stratos/src/jetstream/oauth_requests_test.go:23 +0xcc
  testing.tRunner(0xc000392d00, 0xee4278)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 301 [select]:
  net/http.(*Transport).getConn(0xc00024d440, 0xc000698c30, 0x0, 0xc0004f2680, 0x5, 0xc0003f65a0, 0xf, 0x0, 0x0, 0x0, ...)
  	/usr/local/go/src/net/http/transport.go:1020 +0x63d
  net/http.(*Transport).roundTrip(0xc00024d440, 0xc000392b00, 0xc0006981b0, 0xc0003f656c, 0xc0003f6590)
  	/usr/local/go/src/net/http/transport.go:467 +0x6ef
  net/http.(*Transport).RoundTrip(0xc00024d440, 0xc000392b00, 0xc00024d440, 0xbf56607bd6023a5c, 0x2557b08bb)
  	/usr/local/go/src/net/http/roundtrip.go:17 +0x35
  net/http.send(0xc00021c200, 0xffb8a0, 0xc00024d440, 0xbf56607bd6023a5c, 0x2557b08bb, 0x16be960, 0xc0004aa0a0, 0xbf56607bd6023a5c, 0x1, 0x0)
  	/usr/local/go/src/net/http/client.go:250 +0x461
  net/http.(*Client).send(0xc000153fb0, 0xc00021c200, 0xbf56607bd6023a5c, 0x2557b08bb, 0x16be960, 0xc0004aa0a0, 0x0, 0x1, 0xc0003f0e00)
  	/usr/local/go/src/net/http/client.go:174 +0xfb
  net/http.(*Client).do(0xc000153fb0, 0xc00021c200, 0x0, 0x0, 0x0)
  	/usr/local/go/src/net/http/client.go:641 +0x279
  net/http.(*Client).Do(...)
  	/usr/local/go/src/net/http/client.go:509
  github.com/cloudfoundry-incubator/stratos/src/jetstream.(*portalProxy).OAuthHandlerFunc.func1(0xea1b2d, 0xf, 0xc0004d8000, 0xcbc, 0xc0004d8d80, 0xcbc, 0x577c6630, 0x0, 0xe98728, 0x6, ...)
  	/home/kater/dev/git/stratos/src/jetstream/oauth_requests.go:33 +0x307
  github.com/cloudfoundry-incubator/stratos/src/jetstream.(*portalProxy).DoAuthFlowRequest(0xc000624280, 0xc000232160, 0xc00021c200, 0xc00064f4d0, 0xc00064f4d0, 0xb0, 0xe66920)
  	/home/kater/dev/git/stratos/src/jetstream/auth.go:1133 +0x2e0
  github.com/cloudfoundry-incubator/stratos/src/jetstream.(*portalProxy).doOauthFlowRequest(0xc000624280, 0xc000232160, 0xc00021c200, 0xc0003db360, 0xc0003db270, 0xc0003db270)
  	/home/kater/dev/git/stratos/src/jetstream/oauth_requests.go:53 +0xfa
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestDoOauthFlowRequestWithExpiredToken.func1()
  	/home/kater/dev/git/stratos/src/jetstream/oauth_requests_test.go:258 +0x16be
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/discovery.go:80 +0x24
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:261 +0x154
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:110 +0xf1
  github.com/jtolds/gls.(*ContextManager).SetValues.func1(0x5)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:97 +0x40d
  github.com/jtolds/gls.EnsureGoroutineId.func1()
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0x2e
  github.com/jtolds/gls._m(0x0, 0xc0004beb00)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:108 +0x31
  github.com/jtolds/gls.github_com_jtolds_gls_mark5(0x0, 0xc0004beb00)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:74 +0x35
  github.com/jtolds/gls._m(0x5, 0xc0004beb00)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:110 +0x64
  github.com/jtolds/gls.github_com_jtolds_gls_markS(0x5, 0xc0004beb00)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:56 +0x35
  github.com/jtolds/gls.addStackTag(...)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:49
  github.com/jtolds/gls.EnsureGoroutineId(0xc000532c00)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0xd6
  github.com/jtolds/gls.(*ContextManager).SetValues(0xc00015b810, 0xc000532ba0, 0xc0004beac0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:63 +0x14b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:105 +0x22b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/doc.go:75 +0xbf
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestDoOauthFlowRequestWithExpiredToken(0xc000392e00)
  	/home/kater/dev/git/stratos/src/jetstream/oauth_requests_test.go:149 +0xcc
  testing.tRunner(0xc000392e00, 0xee4250)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 302 [chan send]:
  testing.tRunner.func1(0xc000392f00)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc000392f00, 0xee4258)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 306 [chan send]:
  testing.tRunner.func1(0xc000393300)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc000393300, 0xee4260)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 307 [chan send]:
  testing.tRunner.func1(0xc000393400)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc000393400, 0xee4400)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 308 [chan send]:
  testing.tRunner.func1(0xc000393500)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc000393500, 0xee43f8)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 309 [chan receive]:
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestPassthroughDoRequest.func1()
  	/home/kater/dev/git/stratos/src/jetstream/passthrough_test.go:94 +0xe20
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/discovery.go:80 +0x24
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:261 +0x154
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:110 +0xf1
  github.com/jtolds/gls.(*ContextManager).SetValues.func1(0x2)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:97 +0x40d
  github.com/jtolds/gls.EnsureGoroutineId.func1()
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0x2e
  github.com/jtolds/gls._m(0x0, 0xc00000f1c0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:108 +0x31
  github.com/jtolds/gls.github_com_jtolds_gls_mark2(0x0, 0xc00000f1c0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:65 +0x35
  github.com/jtolds/gls._m(0x2, 0xc00000f1c0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:110 +0x64
  github.com/jtolds/gls.github_com_jtolds_gls_markS(0x2, 0xc00000f1c0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:56 +0x35
  github.com/jtolds/gls.addStackTag(...)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:49
  github.com/jtolds/gls.EnsureGoroutineId(0xc0003428a0)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0xd6
  github.com/jtolds/gls.(*ContextManager).SetValues(0xc00015b810, 0xc000342840, 0xc00000f180)
  	/home/kater/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:63 +0x14b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/context.go:105 +0x22b
  	/home/kater/go/pkg/mod/github.com/smartystreets/goconvey@v0.0.0-20160503033757-d4c757aa9afd/convey/doc.go:75 +0xbf
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestPassthroughDoRequest(0xc000393600)
  	/home/kater/dev/git/stratos/src/jetstream/passthrough_test.go:18 +0xcc
  testing.tRunner(0xc000393600, 0xee4390)
  	/usr/local/go/src/testing/testing.go:865 +0xc0
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 310 [chan send]:
  testing.tRunner.func1(0xc000393700)
  	/usr/local/go/src/testing/testing.go:860 +0x283
  testing.tRunner(0xc000393700, 0xee43b0)
  	/usr/local/go/src/testing/testing.go:869 +0xca
  created by testing.(*T).Run
  	/usr/local/go/src/testing/testing.go:916 +0x35a
  
  goroutine 311 [chan receive]:
  testing.(*testContext).waitParallel(0xc000339500)
  	/usr/local/go/src/testing/testing.go:964 +0x95
  testing.(*T).Parallel(0xc000393800)
  	/usr/local/go/src/testing/testing.go:771 +0x1f1
  github.com/cloudfoundry-incubator/stratos/src/jetstream.TestPassthroughGetEchoHeaders(0xc000393800)
  	/home/kater/dev/git/stratos/src/jetstream/passthrough_test.g

[0m[33m[0m[31m--- PASS: TestRegisterCFClusterButCantSaveCNSIRecord (0.00s)

87 total assertions[0m=== CONT  TestLocalLoginWithNoAdminScope


--- FAIL: TestLoginToUAAButCantSaveToken (0.00s)
=== CONT  TestLocalLogin

  Local Login tests 
  Local Login tests time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"

time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
    Oauth flow request failed with invalid response or status [32mâœ”[0m[32mâœ”[0mtime="2019-09-11T15:53:25+01:00" level=error msg="Unable to load CNSI record: Error trying to Find CNSI record: all expectations were already fulfilled, call to query 'SELECT guid, name, cnsi_type, api_endpoint, auth_endpoint, token_endpoint, doppler_logging_endpoint, skip_ssl_validation, client_id, client_secret, sso_allowed, sub_type, meta_data FROM cnsis WHERE guid=$1' with args [some-guid-1234] was not expected"

    should have all expectations met [32mâœ”[0m
    Login should not return an error [32mâœ”[0mtime="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
[32mâœ”[0mtime="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
time="2019-09-11T15:53:25+01:00" level=info msg="CloudFoundry Connect..."
time="2019-09-11T15:53:25+01:00" level=info msg="Updating token mock-token-guid"

    should not have a new CNSI Request error [32mâœ”[0m
    Oauth flow request failed with invalid number of requests [32mâœ”[0m

[31m[0m[33m[0m[31m
94 total assertions[0m

--- PASS: TestDoOauthFlowRequestWithValidToken (0.02s)
=== CONT  TestPassthroughGetEchoHeaders
[32mâœ”[0mtime="2019-09-11T15:53:25+01:00" level=error msg="Unable to load CNSI record: Error trying to Find CNSI record: all expectations were already fulfilled, call to query 'SELECT guid, name, cnsi_type, api_endpoint, auth_endpoint, token_endpoint, doppler_logging_endpoint, skip_ssl_validation, client_id, client_secret, sso_allowed, sub_type, meta_data FROM cnsis WHERE guid=$1' with args [some-guid-1234] was not expected"

  Should have correct headers time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"

    Should meet expectations time="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
[32mâœ”[0mtime="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
[32mâœ”[0m[32mâœ”[0m

[31m[0m[33m[0m[31m
98 total assertions[0m

--- PASS: TestPassthroughGetEchoHeaders (0.00s)


[31m[0m[33m[0m[31m
98 total assertions[0m

--- PASS: TestLoginToCNSI (0.01s)

    Expectation should be met [32mâœ”[0mtime="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"

    CNSI Request must be identical to expected response [32mâœ”[0m

[31m[0m[33m[0m[31m
100 total assertions[0m

--- PASS: TestPassthroughDoRequest (0.02s)
time="2019-09-11T15:53:25+01:00" level=info msg="Updating token mock-token-guid"

    Oauth flow request failed with invalid response or status [32mâœ”[0m[32mâœ”[0mtime="2019-09-11T15:53:25+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:25+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
time="2019-09-11T15:53:25+01:00" level=info msg="Updating token mock-token-guid"

    Oauth flow request failed with invalid number of requests [32mâœ”[0m

[31m[0m[33m[0m[31m
103 total assertions[0m

--- PASS: TestDoOauthFlowRequestWithExpiredToken (0.02s)

    Should not fail to add new user [32mâœ”[0m[32mâœ”[0m
    Login times should match [32mâœ”[0mtime="2019-09-11T15:53:26+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:26+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
time="2019-09-11T15:53:26+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:26+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
time="2019-09-11T15:53:26+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:26+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"

    Should not fail to login [32mâœ”[0m[32mâœ”[0mtime="2019-09-11T15:53:26+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:26+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
time="2019-09-11T15:53:26+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:26+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"

    Password hashes should match [32mâœ”[0mtime="2019-09-11T15:53:26+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:26+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
--- PASS: TestGetCFv2InfoWithInvalidEndpoint (1.13s)

    Expectations should be met [32mâœ”[0m

[31m[0m[33m[0m[31m
110 total assertions[0m

--- PASS: TestUpdateLastLoginTime (1.82s)

    Should fail to login [32mâœ”[0m
    Should fail to login [32mâœ”[0mtime="2019-09-11T15:53:27+01:00" level=error msg="Error adding local user unable to INSERT local user: "
time="2019-09-11T15:53:27+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:27+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"

    Should not fail to login [32mâœ”[0m
    Expectations should be met [32mâœ”[0m

[31m[0m[33m[0m[31m
114 total assertions[0m

--- PASS: TestAddLocalUser (1.88s)

    Expectations should be met [32mâœ”[0m

[31m[0m[33m[0m[31m
115 total assertions[0m

--- PASS: TestFindPasswordHash (1.99s)
time="2019-09-11T15:53:28+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:28+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
time="2019-09-11T15:53:28+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:28+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"
time="2019-09-11T15:53:28+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:28+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"

    Expectations should be met [32mâœ”[0m

[31m[0m[33m[0m[31m
116 total assertions[0m

--- PASS: TestLocalLoginWithBadCredentials (3.62s)

    Expectations should be met [32mâœ”[0m

[31m[0m[33m[0m[31m
117 total assertions[0m

--- PASS: TestLocalLoginWithNoAdminScope (3.63s)
time="2019-09-11T15:53:29+01:00" level=error msg="Error adding local user unable to INSERT local user: "

    Should fail to add duplicate user [32mâœ”[0m[32mâœ”[0m[32mâœ”[0mtime="2019-09-11T15:53:29+01:00" level=info msg="Session Cookie name: console-session"
time="2019-09-11T15:53:29+01:00" level=warning msg="Invalid auth endpoint type: , defaulting to auth type: remote"

    Expectations should be met [32mâœ”[0m

[31m[0m[33m[0m[31m
121 total assertions[0m

--- PASS: TestLocalLogin (3.67s)
time="2019-09-11T15:53:30+01:00" level=error msg="Error adding local user unable to INSERT local user: "

    Expectations should be met [32mâœ”[0m

[31m[0m[33m[0m[31m
122 total assertions[0m

--- PASS: TestAddLocalUserDuplicate (5.45s)
FAIL
FAIL	github.com/cloudfoundry-incubator/stratos/src/jetstream	5.458s
=== RUN   TestDatastore

  Given the requirement for a non-TLS database connection 
    when the database config is valid 
      err will be nil [32mâœ”[0m
      a valid non-TLS DatabaseConfig will be returned [32mâœ”[0m
      database config can be used to build a connection string time="2019-09-11T15:35:49+01:00" level=info msg="DB Connection string: dbname='mydb' host='localhost' port=5432 connect_timeout=5"
[32mâœ”[0m
      connection string will not contain anything SSL related time="2019-09-11T15:35:49+01:00" level=info msg="DB Connection string: dbname='mydb' host='localhost' port=5432 connect_timeout=5"
[32mâœ”[0m[32mâœ”[0m[32mâœ”[0m
      when the connection timeout is less than zero 
        the default connection timeout will be set [32mâœ”[0m
        no error will be returned [32mâœ”[0m
        database config can be used to build a connection string time="2019-09-11T15:35:49+01:00" level=info msg="DB Connection string: dbname='mydb' host='localhost' port=5432 connect_timeout=10"
[32mâœ”[0m
      when the connection timeout is zero 
        the default connection timeout will be set [32mâœ”[0m
        no error will be returned [32mâœ”[0m
    when the database config is invalid 
      when username is missing 
        an error should be returned [32mâœ”[0m
      when password is missing 
        an error should be returned [32mâœ”[0m
      when database is missing 
        an error should be returned [32mâœ”[0m
      when host is missing 
        an error should be returned [32mâœ”[0m
      when port is 0 
        an error should be returned [32mâœ”[0m
      when port is < 0 
        an error should be returned [32mâœ”[0m
      when port is > 65535 
        an error should be returned [32mâœ”[0m
      when connection timeout is zero 
        an error should be returned [32mâœ”[0m
      when missing ssl mode 
        an error should be returned [32mâœ”[0m
      when invalid ssl mode 
        an error should be returned [32mâœ”[0m

[31m[0m[33m[0m[32m
21 total assertions[0m


  Given the requirement for a TLS database connection 
    when the database config is valid 
      err will be nil [32mâœ”[0m
      a valid non-TLS DatabaseConfig will be returned [32mâœ”[0m
      database config can be used to build a connection string time="2019-09-11T15:35:49+01:00" level=info msg="DB Connection string: dbname='mydb' host='localhost' port=5432 connect_timeout=5"
[32mâœ”[0m
      when the connection timeout is less than zero 
        the default connection timeout will be set [32mâœ”[0m
        no error will be returned [32mâœ”[0m
      when the connection timeout is zero 
        the default connection timeout will be set [32mâœ”[0m
        no error will be returned [32mâœ”[0m
    when the database config is invalid 
      when username is missing 
        an error should be returned [32mâœ”[0m
      when password is missing 
        an error should be returned [32mâœ”[0m
      when database is missing 
        an error should be returned [32mâœ”[0m
      when host is missing 
        an error should be returned [32mâœ”[0m
      when port is 0 
        an error should be returned [32mâœ”[0m
      when port is < 0 
        an error should be returned [32mâœ”[0m
      when port is > 65535 
        an error should be returned [32mâœ”[0m
      when missing ssl mode 
        an error should be returned [32mâœ”[0m
      when invalid ssl mode 
        an error should be returned [32mâœ”[0m

[31m[0m[33m[0m[32m
37 total assertions[0m

--- PASS: TestDatastore (0.01s)
PASS
ok  	github.com/cloudfoundry-incubator/stratos/src/jetstream/datastore	(cached)
?   	github.com/cloudfoundry-incubator/stratos/src/jetstream/plugins/autoscaler	[no test files]
?   	github.com/cloudfoundry-incubator/stratos/src/jetstream/plugins/cfapppush	[no test files]
?   	github.com/cloudfoundry-incubator/stratos/src/jetstream/plugins/cfapppush/pushapp	[no test files]
?   	github.com/cloudfoundry-incubator/stratos/src/jetstream/plugins/cfappssh	[no test files]
?   	github.com/cloudfoundry-incubator/stratos/src/jetstream/plugins/cloudfoundry	[no test files]
?   	github.com/cloudfoundry-incubator/stratos/src/jetstream/plugins/cloudfoundryhosting	[no test files]
?   	github.com/cloudfoundry-incubator/stratos/src/jetstream/plugins/metrics	[no test files]
?   	github.com/cloudfoundry-incubator/stratos/src/jetstream/plugins/userfavorites	[no test files]
?   	github.com/cloudfoundry-incubator/stratos/src/jetstream/plugins/userfavorites/userfavoritesendpoints	[no test files]
?   	github.com/cloudfoundry-incubator/stratos/src/jetstream/plugins/userfavorites/userfavoritesstore	[no test files]
?   	github.com/cloudfoundry-incubator/stratos/src/jetstream/plugins/userinfo	[no test files]
?   	github.com/cloudfoundry-incubator/stratos/src/jetstream/plugins/userinvite	[no test files]
=== RUN   TestPgSQLCNSIs

  Given a request for a new reference to a CNSI Repository 
    A valid CNSI Repository should be returned without error. [32mâœ”[0m[32mâœ”[0m

[31m[0m[33m[0m[32m
2 total assertions[0m


  Given a request for a list of CNSIs 
    if no records exist in the database 
      No CNSIs should be returned [32mâœ”[0m[32mâœ”[0m
      the list of returned CNSIs should be empty [32mâœ”[0m[32mâœ”[0m
      there should be no error returned [32mâœ”[0m[32mâœ”[0m
    if two records exist in the database 
      2 CNSIs should be returned [32mâœ”[0m[32mâœ”[0m
      the list of returned CNSIs should match the expected list of CNSIs [32mâœ”[0m[32mâœ”[0m
      there should be no error returned [32mâœ”[0m[32mâœ”[0m
    If the database call fails for some reason 
      the returned value should be nil [32mâœ”[0m[32mâœ”[0m
      there should be a 'not found' error returned [32mâœ”[0m[32mâœ”[0m

[31m[0m[33m[0m[32m
18 total assertions[0m


  Given a request for a list of CNSIs for a user 
    if no records exist in the database 
      No CNSIs should be returned [32mâœ”[0m[32mâœ”[0m
      the list of returned CNSIs should be empty [32mâœ”[0m[32mâœ”[0m
      there should be no error returned [32mâœ”[0m[32mâœ”[0m
    if 2 cluster records exist in the database 
      2 CNSIs should be returned [32mâœ”[0m[32mâœ”[0m
      the cluster list returned should match the expected cluster list [32mâœ”[0m[32mâœ”[0m
      there should be no error returned [32mâœ”[0m[32mâœ”[0m
    If the database call fails for some reason 
      the returned value should be nil [32mâœ”[0m[32mâœ”[0m
      there should be a 'not found' error returned [32mâœ”[0m[32mâœ”[0m

[31m[0m[33m[0m[32m
34 total assertions[0m


  Given a request to find a specific CNSI by GUID 
    if the specified CNSI is in the database 
      the returned CNSI should match the expected CNSI [32mâœ”[0m[32mâœ”[0m
      there should be no error returned [32mâœ”[0m[32mâœ”[0m
    if the specified CNSI isn't in the database 
      the returned CNSI record should be empty [32mâœ”[0m[32mâœ”[0m
      there should be a 'not found' error returned [32mâœ”[0m[32mâœ”[0m
    if the Find() method throws an error 
      the returned CNSI record should be empty [32mâœ”[0m[32mâœ”[0m
      there should be a 'not found' error returned [32mâœ”[0m[32mâœ”[0m

[31m[0m[33m[0m[32m
46 total assertions[0m


  Given a request to find a specific CNSI by endpoint string 
    if the specified endpoint is in the database 
      the returned CNSI should match the expected CNSI [32mâœ”[0m[32mâœ”[0m
      there should be no error returned [32mâœ”[0m[32mâœ”[0m
    if the specified endpoint isn't in the database 
      the returned CNSI record should be empty [32mâœ”[0m[32mâœ”[0m
      there should be a 'not found' error returned [32mâœ”[0m[32mâœ”[0m
    if the find by endpoint method throws an error 
      the returned CNSI record should be empty [32mâœ”[0m[32mâœ”[0m
      there should be a 'not found' error returned [32mâœ”[0m[32mâœ”[0m

[31m[0m[33m[0m[32m
58 total assertions[0m


  Given a request to save a specific CNSI 
    if successful 
      there should be no error returned [32mâœ”[0m[32mâœ”[0m
    if unsuccessful 
      there should be an error returned [32mâœ”[0m[32mâœ”[0m

[31m[0m[33m[0m[32m
62 total assertions[0m


  Given a request to delete a specific CNSI 
    if successful 
      there should be no error returned [32mâœ”[0m[32mâœ”[0m
    if unsuccessful 
      there should be an error returned [32mâœ”[0m[32mâœ”[0m

[31m[0m[33m[0m[32m
66 total assertions[0m

--- PASS: TestPgSQLCNSIs (0.01s)
PASS
ok  	github.com/cloudfoundry-incubator/stratos/src/jetstream/repository/cnsis	(cached)
?   	github.com/cloudfoundry-incubator/stratos/src/jetstream/repository/console_config	[no test files]
=== RUN   TestAESEncryptDecrypt

  Given an encryption key and a string that requires encryption 
    encrypting & decrypting the string it should succeed [32mâœ”[0m

[31m[0m[33m[0m[32m
1 total assertion[0m


  Given the need to read an encryption key from a volume 
    if successfully read [32mâœ”[0m
    if not successfully read 

[31m[0m[33m[0m[32m
2 total assertions[0m


  TestEncryptToken 
    should fail with an invalid key time="2019-09-11T15:53:24+01:00" level=info msg="Unable to encrypt token: crypto/aes: invalid key size 0"
[32mâœ”[0m
    should succeed [32mâœ”[0m[32mâœ”[0m

[31m[0m[33m[0m[32m
5 total assertions[0m


  TestDecryptToken 
    should fail with an invalid key time="2019-09-11T15:53:24+01:00" level=info msg="Unable to decrypt token: crypto/aes: invalid key size 0"
[32mâœ”[0m
    should succeed [32mâœ”[0m[32mâœ”[0m

[31m[0m[33m[0m[32m
8 total assertions[0m

--- PASS: TestAESEncryptDecrypt (0.00s)
PASS
ok  	github.com/cloudfoundry-incubator/stratos/src/jetstream/repository/crypto	0.003s
=== RUN   TestPgSQLGooseDB

  Given a request for a new reference to the Goose PG Repository 
    A valid CNSI Repository should be returned without error. [32mâœ”[0m[32mâœ”[0m

[31m[0m[33m[0m[32m
2 total assertions[0m


  Given a request for the current Goose database version 
    if one exists 
      it should be returned [32mâœ”[0m[32mâœ”[0m
    if one doesn't exist 
      there should be an error [32mâœ”[0m[32mâœ”[0m
    if there is a problem talking to the database 
      there should be an error [32mâœ”[0m[32mâœ”[0m

[31m[0m[33m[0m[32m
8 total assertions[0m

--- PASS: TestPgSQLGooseDB (0.00s)
PASS
ok  	github.com/cloudfoundry-incubator/stratos/src/jetstream/repository/goose-db-version	(cached)
?   	github.com/cloudfoundry-incubator/stratos/src/jetstream/repository/localusers	[no test files]
=== RUN   TestSaveUAATokens

  SaveUAATokens Tests 
    Test expected failures 
      should fail to save token with an invalid user GUID [32mâœ”[0m
      should fail to save token with an invalid AuthToken [32mâœ”[0m
      should fail to save token with an invalid RefreshToken time="2019-09-11T15:35:49+01:00" level=error msg="Unknown error attempting to find UAA token: all expectations were already fulfilled, call to query 'SELECT COUNT(*) FROM tokens WHERE token_type = 'uaa' AND user_guid = $1' with args [foo-bar] was not expected"
[32mâœ”[0m
      should fail to encrypt with an invalid encryptionKey time="2019-09-11T15:35:49+01:00" level=info msg="Unable to encrypt token: crypto/aes: invalid key size 0"
[32mâœ”[0m
    Test Insert/Update of token 
      Insertion of token 
        Should fail to insert due to DB exception time="2019-09-11T15:35:49+01:00" level=error msg="Unknown error attempting to find UAA token: random error"
[32mâœ”[0m[32mâœ”[0m
        Should suceed to insert time="2019-09-11T15:35:49+01:00" level=error msg="Unknown error attempting to find UAA token: sql: no rows in result set"
[32mâœ”[0m[32mâœ”[0m
      Update of token 
        Should fail to update due to DB exception time="2019-09-11T15:35:49+01:00" level=error msg="Unknown error attempting to find UAA token: random error"
[32mâœ”[0m[32mâœ”[0m

[31m[0m[33m[0m[32m
10 total assertions[0m

--- PASS: TestSaveUAATokens (0.00s)
=== RUN   TestSaveCNSITokens

  SaveCNSIToken Tests 
    Test expected failures 
      should fail to save token with an invalid CNSI GUID [32mâœ”[0m
      should fail to save token with an invalid user GUID [32mâœ”[0m
      should fail to save token with an invalid AuthToken [32mâœ”[0m
      should fail to save token with an invalid RefreshToken time="2019-09-11T15:35:49+01:00" level=error msg="Unknown error attempting to find CNSI token: all expectations were already fulfilled, call to query 'SELECT COUNT(*) FROM tokens WHERE cnsi_guid=$1 AND user_guid = $2 AND token_type = 'cnsi'' with args [foo-bar foo-bar] was not expected"
[32mâœ”[0m
      should fail to encrypt with an invalid encryptionKey time="2019-09-11T15:35:49+01:00" level=info msg="Unable to encrypt token: crypto/aes: invalid key size 0"
[32mâœ”[0m
    Test Insert/Update of token 
      Insertion of token 
        Should fail to insert due to DB exception time="2019-09-11T15:35:49+01:00" level=error msg="Unknown error attempting to find CNSI token: random error"
[32mâœ”[0m[32mâœ”[0m
        Should suceed to insert time="2019-09-11T15:35:49+01:00" level=error msg="Unknown error attempting to find CNSI token: sql: Scan error on column index 0, name \"COUNT\": converting driver.Value type string (\"value\") to a int: invalid syntax"
[32mâœ”[0m[32mâœ”[0m
      Update of token 
        Should fail to update due to DB exception time="2019-09-11T15:35:49+01:00" level=error msg="Unknown error attempting to find CNSI token: random error"
[32mâœ”[0m[32mâœ”[0m

[31m[0m[33m[0m[32m
21 total assertions[0m

--- PASS: TestSaveCNSITokens (0.00s)
=== RUN   TestFindUAATokens

  FindAuthToken Tests 
    should fail to find token with an invalid user GUID [32mâœ”[0m
    should throw exception when finding a non-existent token [32mâœ”[0m[32mâœ”[0m
    should fail to decrypt with invalid encryptionKey [32mâœ”[0m[32mâœ”[0m
    Success case [32mâœ”[0m[32mâœ”[0m[32mâœ”[0m[32mâœ”[0m[32mâœ”[0m

[31m[0m[33m[0m[32m
31 total assertions[0m

--- PASS: TestFindUAATokens (0.00s)
=== RUN   TestFindCNSITokens

  FindAuthToken Tests 
    should fail to find token with an invalid CNSI GUID 2019/09/11 15:35:49 findUAA returned Unable to find CNSI Token without a valid CNSI GUID.
[32mâœ”[0m
    should fail to find token with an invalid user GUID 2019/09/11 15:35:49 findUAA returned Unable to find CNSI Token without a valid User GUID.
[32mâœ”[0m
    should throw exception when finding a non-existent token time="2019-09-11T15:35:49+01:00" level=error msg="Unable to Find CNSI token: doesnt exist"
[32mâœ”[0m[32mâœ”[0m
    should fail to decrypt with invalid encryptionKey time="2019-09-11T15:35:49+01:00" level=error msg="Unable to Find CNSI token: sql: expected 7 destination arguments in Scan, not 9"
[32mâœ”[0m[32mâœ”[0m
    Success case [32mâœ”[0m[32mâœ”[0m[32mâœ”[0m[32mâœ”[0m[32mâœ”[0m

[31m[0m[33m[0m[32m
42 total assertions[0m

--- PASS: TestFindCNSITokens (0.00s)
=== RUN   TestDeleteCNSIToken

  DeleteCNSIToken Tests 
    should fail to delete token with an invalid CNSI GUID [32mâœ”[0m
    should fail to delete token with an invalid user GUID [32mâœ”[0m
    should throw exception when encountering DB error [32mâœ”[0m[32mâœ”[0m
    Test successful path [32mâœ”[0m[32mâœ”[0m

[31m[0m[33m[0m[32m
48 total assertions[0m

--- PASS: TestDeleteCNSIToken (0.00s)
=== RUN   TestDeleteCNSITokens

  DeleteCNSITokens Tests 
    should fail to delete token with an invalid CNSI GUID [32mâœ”[0m
    should throw exception when encountering DB error [32mâœ”[0m[32mâœ”[0m
    Test successful path [32mâœ”[0m[32mâœ”[0m

[31m[0m[33m[0m[32m
53 total assertions[0m

--- PASS: TestDeleteCNSITokens (0.00s)
PASS
ok  	github.com/cloudfoundry-incubator/stratos/src/jetstream/repository/tokens	(cached)
=== RUN   TestUtils

  ArrayContainsString [32mâœ”[0m[32mâœ”[0m[32mâœ”[0m[32mâœ”[0m

[31m[0m[33m[0m[32m
4 total assertions[0m


  RemoveSpaces [32mâœ”[0m[32mâœ”[0m[32mâœ”[0m[32mâœ”[0m[32mâœ”[0m

[31m[0m[33m[0m[32m
9 total assertions[0m

--- PASS: TestUtils (0.00s)
PASS
ok  	github.com/cloudfoundry-incubator/stratos/src/jetstream/stringutils	(cached)
